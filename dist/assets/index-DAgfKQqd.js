var Fo=Object.defineProperty;var Oo=(n,e,l)=>e in n?Fo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[e]=l;var ui=(n,e,l)=>Oo(n,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();function pe(){}function wn(n,e){for(const l in e)n[l]=e[l];return n}function ro(n){return n()}function Nl(){return Object.create(null)}function We(n){n.forEach(ro)}function Mn(n){return typeof n=="function"}function Ae(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function $o(n){return Object.keys(n).length===0}function oo(n,...e){if(n==null){for(const i of e)i(void 0);return pe}const l=n.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Oe(n,e,l){n.$$.on_destroy.push(oo(e,l))}function Be(n,e,l){return n.set(l),e}function Cn(n){return n&&Mn(n.destroy)?n.destroy:pe}function u(n,e){n.appendChild(e)}function y(n,e,l){n.insertBefore(e,l||null)}function v(n){n.parentNode&&n.parentNode.removeChild(n)}function at(n,e){for(let l=0;l<n.length;l+=1)n[l]&&n[l].d(e)}function d(n){return document.createElement(n)}function Nn(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function F(n){return document.createTextNode(n)}function N(){return F(" ")}function lt(){return F("")}function x(n,e,l,i){return n.addEventListener(e,l,i),()=>n.removeEventListener(e,l,i)}function jo(n){return function(e){return e.preventDefault(),n.call(this,e)}}function S(n,e,l){l==null?n.removeAttribute(e):n.getAttribute(e)!==l&&n.setAttribute(e,l)}function Uo(n){let e;return{p(...l){e=l,e.forEach(i=>n.push(i))},r(){e.forEach(l=>n.splice(n.indexOf(l),1))}}}function mt(n){return n===""?null:+n}function zo(n){return Array.from(n.childNodes)}function q(n,e){e=""+e,n.data!==e&&(n.data=e)}function ge(n,e){n.value=e??""}function B(n,e,l,i){l==null?n.style.removeProperty(e):n.style.setProperty(e,l,"")}function it(n,e,l){for(let i=0;i<n.options.length;i+=1){const t=n.options[i];if(t.__value===e){t.selected=!0;return}}(!l||e!==void 0)&&(n.selectedIndex=-1)}function jt(n){const e=n.querySelector(":checked");return e&&e.__value}function X(n,e,l){n.classList.toggle(e,!!l)}function Ho(n,e,{bubbles:l=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:l,cancelable:i})}function Sn(n,e){return new n(e)}let nn;function xt(n){nn=n}function rn(){if(!nn)throw new Error("Function called outside component initialization");return nn}function qo(n){rn().$$.after_update.push(n)}function Wo(n){rn().$$.on_destroy.push(n)}function so(){const n=rn();return(e,l,{cancelable:i=!1}={})=>{const t=n.$$.callbacks[e];if(t){const r=Ho(e,l,{cancelable:i});return t.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}function fi(n,e){return rn().$$.context.set(n,e),e}function $e(n){return rn().$$.context.get(n)}function Sl(n,e){const l=n.$$.callbacks[e.type];l&&l.slice().forEach(i=>i.call(this,e))}const $t=[],zt=[];let Ut=[];const El=[],ao=Promise.resolve();let bi=!1;function uo(){bi||(bi=!0,ao.then(fo))}function Bn(){return uo(),ao}function ct(n){Ut.push(n)}const ci=new Set;let Ft=0;function fo(){if(Ft!==0)return;const n=nn;do{try{for(;Ft<$t.length;){const e=$t[Ft];Ft++,xt(e),Qo(e.$$)}}catch(e){throw $t.length=0,Ft=0,e}for(xt(null),$t.length=0,Ft=0;zt.length;)zt.pop()();for(let e=0;e<Ut.length;e+=1){const l=Ut[e];ci.has(l)||(ci.add(l),l())}Ut.length=0}while($t.length);for(;El.length;)El.pop()();bi=!1,ci.clear(),xt(n)}function Qo(n){if(n.fragment!==null){n.update(),We(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(ct)}}function Ko(n){const e=[],l=[];Ut.forEach(i=>n.indexOf(i)===-1?e.push(i):l.push(i)),l.forEach(i=>i()),Ut=e}const kn=new Set;let yt;function He(){yt={r:0,c:[],p:yt}}function qe(){yt.r||We(yt.c),yt=yt.p}function G(n,e){n&&n.i&&(kn.delete(n),n.i(e))}function le(n,e,l,i){if(n&&n.o){if(kn.has(n))return;kn.add(n),yt.c.push(()=>{kn.delete(n),i&&(l&&n.d(1),i())}),n.o(e)}else i&&i()}function Le(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function En(n,e){const l={},i={},t={$$scope:1};let r=n.length;for(;r--;){const o=n[r],s=e[r];if(s){for(const a in o)a in s||(i[a]=1);for(const a in s)t[a]||(l[a]=s[a],t[a]=1);n[r]=s}else for(const a in o)t[a]=1}for(const o in i)o in l||(l[o]=void 0);return l}function Ln(n){return typeof n=="object"&&n!==null?n:{}}function Ce(n){n&&n.c()}function ke(n,e,l){const{fragment:i,after_update:t}=n.$$;i&&i.m(e,l),ct(()=>{const r=n.$$.on_mount.map(ro).filter(Mn);n.$$.on_destroy?n.$$.on_destroy.push(...r):We(r),n.$$.on_mount=[]}),t.forEach(ct)}function we(n,e){const l=n.$$;l.fragment!==null&&(Ko(l.after_update),We(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Vo(n,e){n.$$.dirty[0]===-1&&($t.push(n),uo(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Te(n,e,l,i,t,r,o=null,s=[-1]){const a=nn;xt(n);const f=n.$$={fragment:null,ctx:[],props:r,update:pe,not_equal:t,bound:Nl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Nl(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let c=!1;if(f.ctx=l?l(n,e.props||{},(g,h,...m)=>{const _=m.length?m[0]:h;return f.ctx&&t(f.ctx[g],f.ctx[g]=_)&&(!f.skip_bound&&f.bound[g]&&f.bound[g](_),c&&Vo(n,g)),h}):[],f.update(),c=!0,We(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const g=zo(e.target);f.fragment&&f.fragment.l(g),g.forEach(v)}else f.fragment&&f.fragment.c();e.intro&&G(n.$$.fragment),ke(n,e.target,e.anchor),fo()}xt(a)}class Pe{constructor(){ui(this,"$$");ui(this,"$$set")}$destroy(){we(this,1),this.$destroy=pe}$on(e,l){if(!Mn(l))return pe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(l),()=>{const t=i.indexOf(l);t!==-1&&i.splice(t,1)}}$set(e){this.$$set&&!$o(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Jo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Jo);const Ot=[];function co(n,e){return{subscribe:en(n,e).subscribe}}function en(n,e=pe){let l;const i=new Set;function t(s){if(Ae(n,s)&&(n=s,l)){const a=!Ot.length;for(const f of i)f[1](),Ot.push(f,n);if(a){for(let f=0;f<Ot.length;f+=2)Ot[f][0](Ot[f+1]);Ot.length=0}}}function r(s){t(s(n))}function o(s,a=pe){const f=[s,a];return i.add(f),i.size===1&&(l=e(t,r)||pe),s(n),()=>{i.delete(f),i.size===0&&l&&(l(),l=null)}}return{set:t,update:r,subscribe:o}}function ho(n,e,l){const i=!Array.isArray(n),t=i?[n]:n;if(!t.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return co(l,(o,s)=>{let a=!1;const f=[];let c=0,g=pe;const h=()=>{if(c)return;g();const _=e(i?f[0]:f,o,s);r?o(_):g=Mn(_)?_:pe},m=t.map((_,I)=>oo(_,C=>{f[I]=C,c&=~(1<<I),a&&h()},()=>{c|=1<<I}));return a=!0,h(),function(){We(m),g(),a=!1}})}function Yo(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var l,i,t,r,o=[],s="",a=n.split("/");for(a[0]||a.shift();t=a.shift();)l=t[0],l==="*"?(o.push("wild"),s+="/(.*)"):l===":"?(i=t.indexOf("?",1),r=t.indexOf(".",1),o.push(t.substring(1,~i?i:~r?r:t.length)),s+=~i&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(s+=(~i?"?":"")+"\\"+t.substring(r))):s+="/"+t;return{keys:o,pattern:new RegExp("^"+s+"/?$","i")}}function Go(n){let e,l,i;const t=[n[2]];var r=n[0];function o(s,a){let f={};for(let c=0;c<t.length;c+=1)f=wn(f,t[c]);return a!==void 0&&a&4&&(f=wn(f,En(t,[Ln(s[2])]))),{props:f}}return r&&(e=Sn(r,o(n)),e.$on("routeEvent",n[7])),{c(){e&&Ce(e.$$.fragment),l=lt()},m(s,a){e&&ke(e,s,a),y(s,l,a),i=!0},p(s,a){if(a&1&&r!==(r=s[0])){if(e){He();const f=e;le(f.$$.fragment,1,0,()=>{we(f,1)}),qe()}r?(e=Sn(r,o(s,a)),e.$on("routeEvent",s[7]),Ce(e.$$.fragment),G(e.$$.fragment,1),ke(e,l.parentNode,l)):e=null}else if(r){const f=a&4?En(t,[Ln(s[2])]):{};e.$set(f)}},i(s){i||(e&&G(e.$$.fragment,s),i=!0)},o(s){e&&le(e.$$.fragment,s),i=!1},d(s){s&&v(l),e&&we(e,s)}}}function Zo(n){let e,l,i;const t=[{params:n[1]},n[2]];var r=n[0];function o(s,a){let f={};for(let c=0;c<t.length;c+=1)f=wn(f,t[c]);return a!==void 0&&a&6&&(f=wn(f,En(t,[a&2&&{params:s[1]},a&4&&Ln(s[2])]))),{props:f}}return r&&(e=Sn(r,o(n)),e.$on("routeEvent",n[6])),{c(){e&&Ce(e.$$.fragment),l=lt()},m(s,a){e&&ke(e,s,a),y(s,l,a),i=!0},p(s,a){if(a&1&&r!==(r=s[0])){if(e){He();const f=e;le(f.$$.fragment,1,0,()=>{we(f,1)}),qe()}r?(e=Sn(r,o(s,a)),e.$on("routeEvent",s[6]),Ce(e.$$.fragment),G(e.$$.fragment,1),ke(e,l.parentNode,l)):e=null}else if(r){const f=a&6?En(t,[a&2&&{params:s[1]},a&4&&Ln(s[2])]):{};e.$set(f)}},i(s){i||(e&&G(e.$$.fragment,s),i=!0)},o(s){e&&le(e.$$.fragment,s),i=!1},d(s){s&&v(l),e&&we(e,s)}}}function Xo(n){let e,l,i,t;const r=[Zo,Go],o=[];function s(a,f){return a[1]?0:1}return e=s(n),l=o[e]=r[e](n),{c(){l.c(),i=lt()},m(a,f){o[e].m(a,f),y(a,i,f),t=!0},p(a,[f]){let c=e;e=s(a),e===c?o[e].p(a,f):(He(),le(o[c],1,1,()=>{o[c]=null}),qe(),l=o[e],l?l.p(a,f):(l=o[e]=r[e](a),l.c()),G(l,1),l.m(i.parentNode,i))},i(a){t||(G(l),t=!0)},o(a){le(l),t=!1},d(a){a&&v(i),o[e].d(a)}}}function Ll(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const l=e.indexOf("?");let i="";return l>-1&&(i=e.substr(l+1),e=e.substr(0,l)),{location:e,querystring:i}}const Ci=co(null,function(e){e(Ll());const l=()=>{e(Ll())};return window.addEventListener("hashchange",l,!1),function(){window.removeEventListener("hashchange",l,!1)}});ho(Ci,n=>n.location);ho(Ci,n=>n.querystring);const Rl=en(void 0);async function Dl(n){if(n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await Bn(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(n.charAt(0)=="#"?"":"#")+n}async function xo(){await Bn(),window.history.back()}async function es(n){if(n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await Bn();const e=(n.charAt(0)=="#"?"":"#")+n;try{const l={...history.state};delete l.__svelte_spa_router_scrollX,delete l.__svelte_spa_router_scrollY,window.history.replaceState(l,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function Rn(n,e){if(e=Al(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Il(n,e),{update(l){l=Al(l),Il(n,l)}}}function ts(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Il(n,e){let l=e.href||n.getAttribute("href");if(l&&l.charAt(0)=="/")l="#"+l;else if(!l||l.length<2||l.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+l);n.setAttribute("href",l),n.addEventListener("click",i=>{i.preventDefault(),e.disabled||ns(i.currentTarget.getAttribute("href"))})}function Al(n){return n&&typeof n=="string"?{href:n}:n||{}}function ns(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function is(n,e,l){let{routes:i={}}=e,{prefix:t=""}=e,{restoreScrollState:r=!1}=e;class o{constructor(R,E){if(!E||typeof E!="function"&&(typeof E!="object"||E._sveltesparouter!==!0))throw Error("Invalid component object");if(!R||typeof R=="string"&&(R.length<1||R.charAt(0)!="/"&&R.charAt(0)!="*")||typeof R=="object"&&!(R instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:$,keys:b}=Yo(R);this.path=R,typeof E=="object"&&E._sveltesparouter===!0?(this.component=E.component,this.conditions=E.conditions||[],this.userData=E.userData,this.props=E.props||{}):(this.component=()=>Promise.resolve(E),this.conditions=[],this.props={}),this._pattern=$,this._keys=b}match(R){if(t){if(typeof t=="string")if(R.startsWith(t))R=R.substr(t.length)||"/";else return null;else if(t instanceof RegExp){const p=R.match(t);if(p&&p[0])R=R.substr(p[0].length)||"/";else return null}}const E=this._pattern.exec(R);if(E===null)return null;if(this._keys===!1)return E;const $={};let b=0;for(;b<this._keys.length;){try{$[this._keys[b]]=decodeURIComponent(E[b+1]||"")||null}catch{$[this._keys[b]]=null}b++}return $}async checkConditions(R){for(let E=0;E<this.conditions.length;E++)if(!await this.conditions[E](R))return!1;return!0}}const s=[];i instanceof Map?i.forEach((w,R)=>{s.push(new o(R,w))}):Object.keys(i).forEach(w=>{s.push(new o(w,i[w]))});let a=null,f=null,c={};const g=so();async function h(w,R){await Bn(),g(w,R)}let m=null,_=null;r&&(_=w=>{w.state&&(w.state.__svelte_spa_router_scrollY||w.state.__svelte_spa_router_scrollX)?m=w.state:m=null},window.addEventListener("popstate",_),qo(()=>{ts(m)}));let I=null,C=null;const L=Ci.subscribe(async w=>{I=w;let R=0;for(;R<s.length;){const E=s[R].match(w.location);if(!E){R++;continue}const $={route:s[R].path,location:w.location,querystring:w.querystring,userData:s[R].userData,params:E&&typeof E=="object"&&Object.keys(E).length?E:null};if(!await s[R].checkConditions($)){l(0,a=null),C=null,h("conditionsFailed",$);return}h("routeLoading",Object.assign({},$));const b=s[R].component;if(C!=b){b.loading?(l(0,a=b.loading),C=b,l(1,f=b.loadingParams),l(2,c={}),h("routeLoaded",Object.assign({},$,{component:a,name:a.name,params:f}))):(l(0,a=null),C=null);const p=await b();if(w!=I)return;l(0,a=p&&p.default||p),C=b}E&&typeof E=="object"&&Object.keys(E).length?l(1,f=E):l(1,f=null),l(2,c=s[R].props),h("routeLoaded",Object.assign({},$,{component:a,name:a.name,params:f})).then(()=>{Rl.set(f)});return}l(0,a=null),C=null,Rl.set(void 0)});Wo(()=>{L(),_&&window.removeEventListener("popstate",_)});function P(w){Sl.call(this,n,w)}function k(w){Sl.call(this,n,w)}return n.$$set=w=>{"routes"in w&&l(3,i=w.routes),"prefix"in w&&l(4,t=w.prefix),"restoreScrollState"in w&&l(5,r=w.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=r?"manual":"auto")},[a,f,c,i,t,r,P,k]}class ls extends Pe{constructor(e){super(),Te(this,e,is,Xo,Ae,{routes:3,prefix:4,restoreScrollState:5})}}const rs={header:"Let's make some labels",box:"Drag and drop a CSV file with your label data here or click to select from your hard drive",count:"Duplicate labels using count",romanNums:"Use Roman numerals for months",collName:"Add my collection name",dets:"Include det labels",detsOnly:"Make det labels only",punch:"Include punch mark",storage:"Show storage info",authors:"Include taxon authorities",excludeCatNums:"Exclude records with no catalog or collector numbers",underline:"Underline, not bold",printDate:"Include printer model and date",font:"Font",fontSize:"Font size",lineHeight:"Line height",fontWeight:"Font weight",labelWidth:"Label width",labelWidthUnit:"cm",saveSettings:"Settings are saved when you print",printButton:"Let's print these babies...",reset:"reset",mappings:"Field mappings",mappingHelp:"Each mapping on this page shows a label field and the mapped field from your dataset. Not all fields are required; simply map your dataset fields to the label fields that make sense and see how they appear",refreshMappings:"Refresh mappings",back:"back",exampleData:"example data",exampleLabels:"example labels",remove:"remove"},os={header:"Koms ons begin - Maak so paar etikette, hier gaan ons nou! Heeha!",box:"Sleep en los 'n CSV-lêer met jou etiketdata hier of klik om van jou hardeskyf te kies",count:"Dupliseer etikette gebasseer op telling",romanNums:"Gebruik Romeinse syfers vir maande",collName:"Voegby my versameling",dets:"Sluit in determinasie labels",detsOnly:"Maaks slegs determinasie labels",punch:"Sluit in a gat merk",storage:"Wys my jou storage",authors:"Sluit in taksonomiese autoriteite",excludeCatNums:"Sluit etikette sonder rekordnommers uit",underline:"Onderstreep ipv vetdruk",printDate:"Sluit in drukkermodel en datum",font:"Skrif",fontSize:"Skrif groote",fontWeight:"Skrif massa",lineHeight:"Lyn hoogte",labelWidth:"Etiket breedte",labelWidthUnit:"sentimeter",saveSettings:"Stellings is getstoor as jy uitdruk",printButton:"Lat ons druk etikette",reset:"herstel",mappings:"Veld passings",mappingHelp:"Net sekere velde word vereis, pas net daai wat sin maak en kyk hoe lyk hulle oppie etiket",refreshMappings:"herhaal passings",back:"terug",exampleData:"voorbeeld data",exampleLabels:"voorbeeld etikette",remove:"vat hom weg"},Z={en:rs,afr:os};function ss(n){let e,l,i=Z[n[0].lang].header+"",t,r,o,s,a,f,c,g,h=n[0].lang+"",m,_,I;return{c(){e=d("div"),l=d("h2"),t=F(i),r=N(),o=d("nav"),s=d("a"),s.textContent="home",a=N(),f=d("a"),f.textContent="info",c=N(),g=d("button"),m=F(h),S(s,"href","/"),S(f,"href","/info"),S(g,"class","secondary-button svelte-qjy5s4"),B(o,"display","flex"),B(o,"gap","2em"),S(o,"class","svelte-qjy5s4"),B(e,"display","flex"),B(e,"width","100%"),B(e,"justify-content","space-between")},m(C,L){y(C,e,L),u(e,l),u(l,t),u(e,r),u(e,o),u(o,s),u(o,a),u(o,f),u(o,c),u(o,g),u(g,m),_||(I=[Cn(Rn.call(null,s)),Cn(Rn.call(null,f)),x(g,"click",n[2])],_=!0)},p(C,[L]){L&1&&i!==(i=Z[C[0].lang].header+"")&&q(t,i),L&1&&h!==(h=C[0].lang+"")&&q(m,h)},i:pe,o:pe,d(C){C&&v(e),_=!1,We(I)}}}function as(n,e,l){let i,t=["en","afr"];const r=$e("settings");return Oe(n,r,s=>l(0,i=s)),[i,r,s=>{const f=t.indexOf(i.lang)+1;t.length>f?Be(r,i.lang=t[f],i):Be(r,i.lang=t[0],i)}]}class Ni extends Pe{constructor(e){super(),Te(this,e,as,ss,Ae,{})}}function us(n){let e,l;return{c(){e=Nn("svg"),l=Nn("path"),S(l,"d","m291-240-51-51 189-189-189-189 51-51 189 189 189-189 51 51-189 189 189 189-51 51-189-189-189 189Z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"height","20px"),S(e,"viewBox","0 -960 960 960"),S(e,"width","20px"),S(e,"fill","#5f6368")},m(i,t){y(i,e,t),u(e,l)},p:pe,i:pe,o:pe,d(i){i&&v(e)}}}class po extends Pe{constructor(e){super(),Te(this,e,null,us,Ae,{})}}var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mo={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(n,e){(function(l,i){n.exports=i()})(fs,function l(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},t=!i.document&&!!i.postMessage,r=i.IS_PAPA_WORKER||!1,o={},s=0,a={parse:function(b,p){var A=(p=p||{}).dynamicTyping||!1;if($(A)&&(p.dynamicTypingFunction=A,A={}),p.dynamicTyping=A,p.transform=!!$(p.transform)&&p.transform,p.worker&&a.WORKERS_SUPPORTED){var U=function(){if(!a.WORKERS_SUPPORTED)return!1;var O=(K=i.URL||i.webkitURL||null,D=l.toString(),a.BLOB_URL||(a.BLOB_URL=K.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))),T=new i.Worker(O),K,D;return T.onmessage=P,T.id=s++,o[T.id]=T}();return U.userStep=p.step,U.userChunk=p.chunk,U.userComplete=p.complete,U.userError=p.error,p.step=$(p.step),p.chunk=$(p.chunk),p.complete=$(p.complete),p.error=$(p.error),delete p.worker,void U.postMessage({input:b,config:p,workerId:U.id})}var H=null;return a.NODE_STREAM_INPUT,typeof b=="string"?(b=function(O){return O.charCodeAt(0)===65279?O.slice(1):O}(b),H=p.download?new g(p):new m(p)):b.readable===!0&&$(b.read)&&$(b.on)?H=new _(p):(i.File&&b instanceof File||b instanceof Object)&&(H=new h(p)),H.stream(b)},unparse:function(b,p){var A=!1,U=!0,H=",",O=`\r
`,T='"',K=T+T,D=!1,M=null,ee=!1;(function(){if(typeof p=="object"){if(typeof p.delimiter!="string"||a.BAD_DELIMITERS.filter(function(z){return p.delimiter.indexOf(z)!==-1}).length||(H=p.delimiter),(typeof p.quotes=="boolean"||typeof p.quotes=="function"||Array.isArray(p.quotes))&&(A=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(D=p.skipEmptyLines),typeof p.newline=="string"&&(O=p.newline),typeof p.quoteChar=="string"&&(T=p.quoteChar),typeof p.header=="boolean"&&(U=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");M=p.columns}p.escapeChar!==void 0&&(K=p.escapeChar+T),(typeof p.escapeFormulae=="boolean"||p.escapeFormulae instanceof RegExp)&&(ee=p.escapeFormulae instanceof RegExp?p.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var V=new RegExp(C(T),"g");if(typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(b)){if(!b.length||Array.isArray(b[0]))return re(null,b,D);if(typeof b[0]=="object")return re(M||Object.keys(b[0]),b,D)}else if(typeof b=="object")return typeof b.data=="string"&&(b.data=JSON.parse(b.data)),Array.isArray(b.data)&&(b.fields||(b.fields=b.meta&&b.meta.fields||M),b.fields||(b.fields=Array.isArray(b.data[0])?b.fields:typeof b.data[0]=="object"?Object.keys(b.data[0]):[]),Array.isArray(b.data[0])||typeof b.data[0]=="object"||(b.data=[b.data])),re(b.fields||[],b.data||[],D);throw new Error("Unable to serialize unrecognized input");function re(z,te,de){var ae="";typeof z=="string"&&(z=JSON.parse(z)),typeof te=="string"&&(te=JSON.parse(te));var ve=Array.isArray(z)&&0<z.length,he=!Array.isArray(te[0]);if(ve&&U){for(var ce=0;ce<z.length;ce++)0<ce&&(ae+=H),ae+=fe(z[ce],ce);0<te.length&&(ae+=O)}for(var J=0;J<te.length;J++){var ie=ve?z.length:te[J].length,oe=!1,ue=ve?Object.keys(te[J]).length===0:te[J].length===0;if(de&&!ve&&(oe=de==="greedy"?te[J].join("").trim()==="":te[J].length===1&&te[J][0].length===0),de==="greedy"&&ve){for(var j=[],se=0;se<ie;se++){var be=he?z[se]:se;j.push(te[J][be])}oe=j.join("").trim()===""}if(!oe){for(var me=0;me<ie;me++){0<me&&!ue&&(ae+=H);var Re=ve&&he?z[me]:me;ae+=fe(te[J][Re],me)}J<te.length-1&&(!de||0<ie&&!ue)&&(ae+=O)}}return ae}function fe(z,te){if(z==null)return"";if(z.constructor===Date)return JSON.stringify(z).slice(1,25);var de=!1;ee&&typeof z=="string"&&ee.test(z)&&(z="'"+z,de=!0);var ae=z.toString().replace(V,K);return(de=de||A===!0||typeof A=="function"&&A(z,te)||Array.isArray(A)&&A[te]||function(ve,he){for(var ce=0;ce<he.length;ce++)if(-1<ve.indexOf(he[ce]))return!0;return!1}(ae,a.BAD_DELIMITERS)||-1<ae.indexOf(H)||ae.charAt(0)===" "||ae.charAt(ae.length-1)===" ")?T+ae+T:ae}}};if(a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!t&&!!i.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=L,a.ParserHandle=I,a.NetworkStreamer=g,a.FileStreamer=h,a.StringStreamer=m,a.ReadableStreamStreamer=_,i.jQuery){var f=i.jQuery;f.fn.parse=function(b){var p=b.config||{},A=[];return this.each(function(O){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var T=0;T<this.files.length;T++)A.push({file:this.files[T],inputElem:this,instanceConfig:f.extend({},p)})}),U(),this;function U(){if(A.length!==0){var O,T,K,D,M=A[0];if($(b.before)){var ee=b.before(M.file,M.inputElem);if(typeof ee=="object"){if(ee.action==="abort")return O="AbortError",T=M.file,K=M.inputElem,D=ee.reason,void($(b.error)&&b.error({name:O},T,K,D));if(ee.action==="skip")return void H();typeof ee.config=="object"&&(M.instanceConfig=f.extend(M.instanceConfig,ee.config))}else if(ee==="skip")return void H()}var V=M.instanceConfig.complete;M.instanceConfig.complete=function(re){$(V)&&V(re,M.file,M.inputElem),H()},a.parse(M.file,M.instanceConfig)}else $(b.complete)&&b.complete()}function H(){A.splice(0,1),U()}}}function c(b){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(p){var A=R(p);A.chunkSize=parseInt(A.chunkSize),p.step||p.chunk||(A.chunkSize=null),this._handle=new I(A),(this._handle.streamer=this)._config=A}).call(this,b),this.parseChunk=function(p,A){if(this.isFirstChunk&&$(this._config.beforeFirstChunk)){var U=this._config.beforeFirstChunk(p);U!==void 0&&(p=U)}this.isFirstChunk=!1,this._halted=!1;var H=this._partialLine+p;this._partialLine="";var O=this._handle.parse(H,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var T=O.meta.cursor;this._finished||(this._partialLine=H.substring(T-this._baseIndex),this._baseIndex=T),O&&O.data&&(this._rowCount+=O.data.length);var K=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)i.postMessage({results:O,workerId:a.WORKER_ID,finished:K});else if($(this._config.chunk)&&!A){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);O=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!K||!$(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),K||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(p){$(this._config.error)?this._config.error(p):r&&this._config.error&&i.postMessage({workerId:a.WORKER_ID,error:p,finished:!1})}}function g(b){var p;(b=b||{}).chunkSize||(b.chunkSize=a.RemoteChunkSize),c.call(this,b),this._nextChunk=t?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),t||(p.onload=E(this._chunkLoaded,this),p.onerror=E(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!t),this._config.downloadRequestHeaders){var A=this._config.downloadRequestHeaders;for(var U in A)p.setRequestHeader(U,A[U])}if(this._config.chunkSize){var H=this._start+this._config.chunkSize-1;p.setRequestHeader("Range","bytes="+this._start+"-"+H)}try{p.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}t&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:p.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(A){var U=A.getResponseHeader("Content-Range");return U===null?-1:parseInt(U.substring(U.lastIndexOf("/")+1))}(p),this.parseChunk(p.responseText)))},this._chunkError=function(A){var U=p.statusText||A;this._sendError(new Error(U))}}function h(b){var p,A;(b=b||{}).chunkSize||(b.chunkSize=a.LocalChunkSize),c.call(this,b);var U=typeof FileReader<"u";this.stream=function(H){this._input=H,A=H.slice||H.webkitSlice||H.mozSlice,U?((p=new FileReader).onload=E(this._chunkLoaded,this),p.onerror=E(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var H=this._input;if(this._config.chunkSize){var O=Math.min(this._start+this._config.chunkSize,this._input.size);H=A.call(H,this._start,O)}var T=p.readAsText(H,this._config.encoding);U||this._chunkLoaded({target:{result:T}})},this._chunkLoaded=function(H){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(H.target.result)},this._chunkError=function(){this._sendError(p.error)}}function m(b){var p;c.call(this,b=b||{}),this.stream=function(A){return p=A,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var A,U=this._config.chunkSize;return U?(A=p.substring(0,U),p=p.substring(U)):(A=p,p=""),this._finished=!p,this.parseChunk(A)}}}function _(b){c.call(this,b=b||{});var p=[],A=!0,U=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(H){this._input=H,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){U&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):A=!0},this._streamData=E(function(H){try{p.push(typeof H=="string"?H:H.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(O){this._streamError(O)}},this),this._streamError=E(function(H){this._streamCleanUp(),this._sendError(H)},this),this._streamEnd=E(function(){this._streamCleanUp(),U=!0,this._streamData("")},this),this._streamCleanUp=E(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function I(b){var p,A,U,H=Math.pow(2,53),O=-H,T=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,K=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,M=0,ee=0,V=!1,re=!1,fe=[],z={data:[],errors:[],meta:{}};if($(b.step)){var te=b.step;b.step=function(J){if(z=J,ve())ae();else{if(ae(),z.data.length===0)return;M+=J.data.length,b.preview&&M>b.preview?A.abort():(z.data=z.data[0],te(z,D))}}}function de(J){return b.skipEmptyLines==="greedy"?J.join("").trim()==="":J.length===1&&J[0].length===0}function ae(){return z&&U&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),U=!1),b.skipEmptyLines&&(z.data=z.data.filter(function(J){return!de(J)})),ve()&&function(){if(!z)return;function J(oe,ue){$(b.transformHeader)&&(oe=b.transformHeader(oe,ue)),fe.push(oe)}if(Array.isArray(z.data[0])){for(var ie=0;ve()&&ie<z.data.length;ie++)z.data[ie].forEach(J);z.data.splice(0,1)}else z.data.forEach(J)}(),function(){if(!z||!b.header&&!b.dynamicTyping&&!b.transform)return z;function J(oe,ue){var j,se=b.header?{}:[];for(j=0;j<oe.length;j++){var be=j,me=oe[j];b.header&&(be=j>=fe.length?"__parsed_extra":fe[j]),b.transform&&(me=b.transform(me,be)),me=he(be,me),be==="__parsed_extra"?(se[be]=se[be]||[],se[be].push(me)):se[be]=me}return b.header&&(j>fe.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+fe.length+" fields but parsed "+j,ee+ue):j<fe.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+fe.length+" fields but parsed "+j,ee+ue)),se}var ie=1;return!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(J),ie=z.data.length):z.data=J(z.data,0),b.header&&z.meta&&(z.meta.fields=fe),ee+=ie,z}()}function ve(){return b.header&&fe.length===0}function he(J,ie){return oe=J,b.dynamicTypingFunction&&b.dynamicTyping[oe]===void 0&&(b.dynamicTyping[oe]=b.dynamicTypingFunction(oe)),(b.dynamicTyping[oe]||b.dynamicTyping)===!0?ie==="true"||ie==="TRUE"||ie!=="false"&&ie!=="FALSE"&&(function(ue){if(T.test(ue)){var j=parseFloat(ue);if(O<j&&j<H)return!0}return!1}(ie)?parseFloat(ie):K.test(ie)?new Date(ie):ie===""?null:ie):ie;var oe}function ce(J,ie,oe,ue){var j={type:J,code:ie,message:oe};ue!==void 0&&(j.row=ue),z.errors.push(j)}this.parse=function(J,ie,oe){var ue=b.quoteChar||'"';if(b.newline||(b.newline=function(be,me){be=be.substring(0,1048576);var Re=new RegExp(C(me)+"([^]*?)"+C(me),"gm"),De=(be=be.replace(Re,"")).split("\r"),Ee=be.split(`
`),Q=1<Ee.length&&Ee[0].length<De[0].length;if(De.length===1||Q)return`
`;for(var Y=0,ye=0;ye<De.length;ye++)De[ye][0]===`
`&&Y++;return Y>=De.length/2?`\r
`:"\r"}(J,ue)),U=!1,b.delimiter)$(b.delimiter)&&(b.delimiter=b.delimiter(J),z.meta.delimiter=b.delimiter);else{var j=function(be,me,Re,De,Ee){var Q,Y,ye,Ne;Ee=Ee||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ot=0;ot<Ee.length;ot++){var _e=Ee[ot],ft=0,Fe=0,Qe=0;ye=void 0;for(var rt=new L({comments:De,delimiter:_e,newline:me,preview:10}).parse(be),Ze=0;Ze<rt.data.length;Ze++)if(Re&&de(rt.data[Ze]))Qe++;else{var nt=rt.data[Ze].length;Fe+=nt,ye!==void 0?0<nt&&(ft+=Math.abs(nt-ye),ye=nt):ye=nt}0<rt.data.length&&(Fe/=rt.data.length-Qe),(Y===void 0||ft<=Y)&&(Ne===void 0||Ne<Fe)&&1.99<Fe&&(Y=ft,Q=_e,Ne=Fe)}return{successful:!!(b.delimiter=Q),bestDelimiter:Q}}(J,b.newline,b.skipEmptyLines,b.comments,b.delimitersToGuess);j.successful?b.delimiter=j.bestDelimiter:(U=!0,b.delimiter=a.DefaultDelimiter),z.meta.delimiter=b.delimiter}var se=R(b);return b.preview&&b.header&&se.preview++,p=J,A=new L(se),z=A.parse(p,ie,oe),ae(),V?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return V},this.pause=function(){V=!0,A.abort(),p=$(b.chunk)?"":p.substring(A.getCharIndex())},this.resume=function(){D.streamer._halted?(V=!1,D.streamer.parseChunk(p,!0)):setTimeout(D.resume,3)},this.aborted=function(){return re},this.abort=function(){re=!0,A.abort(),z.meta.aborted=!0,$(b.complete)&&b.complete(z),p=""}}function C(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function L(b){var p,A=(b=b||{}).delimiter,U=b.newline,H=b.comments,O=b.step,T=b.preview,K=b.fastMode,D=p=b.quoteChar===void 0||b.quoteChar===null?'"':b.quoteChar;if(b.escapeChar!==void 0&&(D=b.escapeChar),(typeof A!="string"||-1<a.BAD_DELIMITERS.indexOf(A))&&(A=","),H===A)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||-1<a.BAD_DELIMITERS.indexOf(H))&&(H=!1),U!==`
`&&U!=="\r"&&U!==`\r
`&&(U=`
`);var M=0,ee=!1;this.parse=function(V,re,fe){if(typeof V!="string")throw new Error("Input must be a string");var z=V.length,te=A.length,de=U.length,ae=H.length,ve=$(O),he=[],ce=[],J=[],ie=M=0;if(!V)return je();if(b.header&&!re){var oe=V.split(U)[0].split(A),ue=[],j={},se=!1;for(var be in oe){var me=oe[be];$(b.transformHeader)&&(me=b.transformHeader(me,be));var Re=me,De=j[me]||0;for(0<De&&(se=!0,Re=me+"_"+De),j[me]=De+1;ue.includes(Re);)Re=Re+"_"+De;ue.push(Re)}if(se){var Ee=V.split(U);Ee[0]=ue.join(A),V=Ee.join(U)}}if(K||K!==!1&&V.indexOf(p)===-1){for(var Q=V.split(U),Y=0;Y<Q.length;Y++){if(J=Q[Y],M+=J.length,Y!==Q.length-1)M+=U.length;else if(fe)return je();if(!H||J.substring(0,ae)!==H){if(ve){if(he=[],Qe(J.split(A)),_t(),ee)return je()}else Qe(J.split(A));if(T&&T<=Y)return he=he.slice(0,T),je(!0)}}return je()}for(var ye=V.indexOf(A,M),Ne=V.indexOf(U,M),ot=new RegExp(C(D)+C(p),"g"),_e=V.indexOf(p,M);;)if(V[M]!==p)if(H&&J.length===0&&V.substring(M,M+ae)===H){if(Ne===-1)return je();M=Ne+de,Ne=V.indexOf(U,M),ye=V.indexOf(A,M)}else if(ye!==-1&&(ye<Ne||Ne===-1))J.push(V.substring(M,ye)),M=ye+te,ye=V.indexOf(A,M);else{if(Ne===-1)break;if(J.push(V.substring(M,Ne)),nt(Ne+de),ve&&(_t(),ee))return je();if(T&&he.length>=T)return je(!0)}else for(_e=M,M++;;){if((_e=V.indexOf(p,_e+1))===-1)return fe||ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:he.length,index:M}),Ze();if(_e===z-1)return Ze(V.substring(M,_e).replace(ot,p));if(p!==D||V[_e+1]!==D){if(p===D||_e===0||V[_e-1]!==D){ye!==-1&&ye<_e+1&&(ye=V.indexOf(A,_e+1)),Ne!==-1&&Ne<_e+1&&(Ne=V.indexOf(U,_e+1));var ft=rt(Ne===-1?ye:Math.min(ye,Ne));if(V.substr(_e+1+ft,te)===A){J.push(V.substring(M,_e).replace(ot,p)),V[M=_e+1+ft+te]!==p&&(_e=V.indexOf(p,M)),ye=V.indexOf(A,M),Ne=V.indexOf(U,M);break}var Fe=rt(Ne);if(V.substring(_e+1+Fe,_e+1+Fe+de)===U){if(J.push(V.substring(M,_e).replace(ot,p)),nt(_e+1+Fe+de),ye=V.indexOf(A,M),_e=V.indexOf(p,M),ve&&(_t(),ee))return je();if(T&&he.length>=T)return je(!0);break}ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:he.length,index:M}),_e++}}else _e++}return Ze();function Qe(Ue){he.push(Ue),ie=M}function rt(Ue){var dt=0;if(Ue!==-1){var st=V.substring(_e+1,Ue);st&&st.trim()===""&&(dt=st.length)}return dt}function Ze(Ue){return fe||(Ue===void 0&&(Ue=V.substring(M)),J.push(Ue),M=z,Qe(J),ve&&_t()),je()}function nt(Ue){M=Ue,Qe(J),J=[],Ne=V.indexOf(U,M)}function je(Ue){return{data:he,errors:ce,meta:{delimiter:A,linebreak:U,aborted:ee,truncated:!!Ue,cursor:ie+(re||0)}}}function _t(){O(je()),he=[],ce=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return M}}function P(b){var p=b.data,A=o[p.workerId],U=!1;if(p.error)A.userError(p.error,p.file);else if(p.results&&p.results.data){var H={abort:function(){U=!0,k(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if($(A.userStep)){for(var O=0;O<p.results.data.length&&(A.userStep({data:p.results.data[O],errors:p.results.errors,meta:p.results.meta},H),!U);O++);delete p.results}else $(A.userChunk)&&(A.userChunk(p.results,H,p.file),delete p.results)}p.finished&&!U&&k(p.workerId,p.results)}function k(b,p){var A=o[b];$(A.userComplete)&&A.userComplete(p),A.terminate(),delete o[b]}function w(){throw new Error("Not implemented.")}function R(b){if(typeof b!="object"||b===null)return b;var p=Array.isArray(b)?[]:{};for(var A in b)p[A]=R(b[A]);return p}function E(b,p){return function(){b.apply(p,arguments)}}function $(b){return typeof b=="function"}return r&&(i.onmessage=function(b){var p=b.data;if(a.WORKER_ID===void 0&&p&&(a.WORKER_ID=p.workerId),typeof p.input=="string")i.postMessage({workerId:a.WORKER_ID,results:a.parse(p.input,p.config),finished:!0});else if(i.File&&p.input instanceof File||p.input instanceof Object){var A=a.parse(p.input,p.config);A&&i.postMessage({workerId:a.WORKER_ID,results:A,finished:!0})}}),(g.prototype=Object.create(c.prototype)).constructor=g,(h.prototype=Object.create(c.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(_.prototype=Object.create(c.prototype)).constructor=_,a})})(mo);var ds=mo.exports;const hs=cs(ds);function ps(n){return new Promise((e,l)=>{hs.parse(n,{header:!0,skipEmptyLines:!0,complete:async i=>{if(i.errors&&i.errors.length){for(const t in i.errors)console.log(t);l("oooppppssss!!!!")}e(i.data)}})})}const Ml={"01":"i","02":"ii","03":"iii","04":"iv","05":"v","06":"vi","07":"vii","08":"viii","09":"ix",10:"x",11:"xi",12:"xii"};function ms(n,e,l,i,t,r){try{Bl(n)}catch{throw new Error("invalid start date, a valid start date is required")}let o=!1;n.endsWith("Z")&&(n=n.replace("Z",""),o=!0);const s=n.trim().split(/[-\/\.:T]/);for(let h=0;h<s.length;h++)h>0&&s[h].length<2&&(s[h]=s[h].padStart(2,"0"));r&&s.length>=2&&(s[1]=Ml[s[1]]);let a;if(e){try{Bl(e)}catch{throw new Error("invalid end date")}e.endsWith("Z")&&(e=e.replace("Z","")),a=e.split(/[-\/\.:T]/);for(let h=0;h<a.length;h++)h>0&&a[h].length<2&&(a[h]=a[h].padStart(2,"0"));if(r&&a.length>=2&&(a[1]=Ml[a[1]]),s.length!=a.length)throw new Error("start date and end date formats do not match")}let f;if(l){try{f=Tl(l)}catch{throw new Error("invalid start time")}if(s.length<3)throw new Error("start time not valid for partial start date");if(s.length>3)throw new Error("cannot have start time for full ISO datetime string")}let c;if(i){if(!a)throw new Error("no end date for end time");if(!f)throw new Error("no start time for end time");try{c=Tl(i)}catch{throw new Error("invalid end time")}if(a.length<3)throw new Error("end time not valid for partial end date");if(a.length>3)throw new Error("cannot have end time for full ISO datetime string");if(f.length!=c.length)throw new Error("start time and end time formats do not match")}let g;if(!a)g=s.join("-"),f&&(g+="T"+f.join(":"));else{const h=s.concat(f).filter(L=>L),m=new Date(...h),_=a.concat(c).filter(L=>L);if(new Date(..._)<m)throw new Error("end date is before start date");let C=[];for(let L=0;L<h.length;L++)if(h[L]!=_[L]){let P=[];for(let k=L;k<h.length;k++)C.push(h[k]),P.push(_[k]),k<2?(C.push("-"),P.push("-")):k==2?(C.push("T"),P.push("T")):(C.push(":"),P.push(":"));C.pop(),C.push("/"),C=[...C,...P];break}else C.push(h[L]),L<2?C.push("-"):L==2?C.push("T"):C.push(":");C.pop(),g=C.join("")}return o&&(g+="Z"),g=g.replace("/","|").replace(/-/g,"/").replace("|","-").replace(/T/g," ").replace("Z",""),g}function Bl(n){if(!n||!n.trim||!n.trim())throw new Error;const e=new Date(n);if(isNaN(e.getTime()))throw new Error;if(n.includes("±"))throw new Error("invalid start date, only UTC ISO strings permitted");const l=n.match(/([a-zA-Z]+)$/);if(l&&l[1]!="Z")throw new Error("invalid start date, only UTC ISO strings permitted")}function Tl(n){if(!n.trim||!n.trim())throw new Error;const e=n.split(/[:\.]/);if(e.length<2||e.length>3)throw new Error;const l=new Date;if(l.setHours(e[0]),l.setMinutes(e[1]),e.length==3&&l.setSeconds(e[2]),isNaN(l.getTime()))throw new Error;return e}const Pl={"01":"i","02":"ii","03":"iii","04":"iv","05":"v","06":"vi","07":"vii","08":"viii","09":"ix",10:"x",11:"xi",12:"xii"};function Fl(n){let e=n.match(/\d{1,2}[-\/]{1}\d{4}/);if(e){let l=e[0].split(/[-\/]/)[0],i=l.padStart(2,"0"),t=Pl[i],r=e[0].replace(l,t);n=n.replace(e[0],r)}else if(e=n.match(/\d{4}[-\/]{1}\d{1,2}/),e){let l=e[0].split(/[-\/]/)[1],i=l.padStart(2,"0"),t=Pl[i],r=`(${l})(?!.*\\1)`,o=e[0].replace(new RegExp(r),t);n=n.replace(e[0],o)}return n}function _i(n,e,l,i){let t={};for(const[r,o]of Object.entries(e))t[r]=n[o]&&n[o].trim?n[o].trim():n[o];if(t.catalogNumber){let r=/\d+$/,o=t.catalogNumber.match(r);if(o&&o.length){let s=Number(o[0]);t.catalogNumber=t.catalogNumber.replace(o[0],s.toString())}t.catalogNumber.includes("-zzz")&&(t.catalogNumber=t.catalogNumber.replace("-zzz","-Her"))}if(t.recordNumber&&(isNaN(t.recordNumber)||(t.primaryCollectorLastName?t.recordNumber=t.primaryCollectorLastName+" "+t.recordNumber:t.recordNumber="coll. no. "+t.recordNumber)),t.geography==null&&(/^\s*South\s+Africa\s*$/i.test(t.country)&&(t.country="RSA"),/congo/i.test(t.country)&&/democratic/i.test(t.country)&&(t.country="DRC"),t.stateProvince&&t.admin1Type&&(t.stateProvince+=" "+t.admin1Type,t.county&&t.admin2Type&&(t.county+=" "+t.admin2Type)),t.geography=[t.country,t.stateProvince,t.county].filter(r=>r).map(r=>r.trim()).filter(r=>r).join("; ")),!t.fullCoordsString){let r=null;if(t.verbatimCoordinates==null?t.verbatimLatitude&&t.verbatimLongitude?r=`${t.verbatimLatitude} ${t.verbatimLongitude}`:t.decimalLatitude&&t.decimalLongitude&&(r=`${t.decimalLatitude} ${t.decimalLongitude}`):r=t.verbatimCoordinates,r&&t.coordsUncertainty!=null&&t.coordsUncertaintyUnit){let o=`${t.coordsUncertainty}${t.coordsUncertaintyUnit}`;r=r+"±"+o}r&&t.coordsSource&&(r+=`  ${t.coordsSource}`),r&&t.verbatimSRS&&(r+=`  ${t.verbatimSRS}`),t.fullCoordsString=r}if(t.gridReference&&i&&(t.fullCoordsString?t.fullCoordsString+=" "+t.gridReference:t.fullCoordsString=t.gridReference),!t.labelElevation){if(t.verbatimElevation)t.labelElevation=t.verbatimElevation;else if(t.minElevationMeters&&t.maxElevationMeters)if(t.minElevationMeters==t.maxElevationMeters)t.verbatimElevation=t.minElevationMeters+"m";else{let r=[Number(t.minElevationMeters),Number(t.maxElevationMeters)],o=Math.min(r),s=Math.max(r);t.verbatimElevation=[o,s].join("-")+"m"}}if(t.fullLocality||(t.locality?t.locality.toLowerCase().includes(t.geography.toLowerCase())?t.fullLocality=t.locality:t.fullLocality=[t.geography,t.locality].join("; "):t.fullLocality=t.geography),t.fullLocality&&t.fullLocality.includes(t.verbatimElevation)&&(t.fullLocality=t.fullLocality.replace(t.verbatimElevation,"").trim()),t.recordedBy){t.recordedBy=t.recordedBy.split(/\s*[;|]\s*/g).filter(o=>o).map(o=>o.trim()).filter(o=>o);let r=[];for(let o of t.recordedBy){let s=o.split(/\s*,\s*/g);if(s[1]){let a=s[1];if(/^[A-Z\s\.]+$/.test(a))r.push(`${s[0]}, ${s[1].replace(/\s+/g,"")}`);else{let c=a.split(" ").map(g=>g[0].toUpperCase()).join(".");r.push(`${s[0]}, ${c}`)}}else r.push(o)}for(let o=0;o<r.length-1;o++)r[o]=r[o]+";";t.recordedBy=r}if(t.collectionDate)l&&(t.collectionDate=Fl(t.collectionDate));else if(t.collectionStartDate)try{t.collectionDate=ms(t.collectionStartDate,t.collectionEndDate||null,t.collectionStartTime||null,t.collectionEndTime||null,!0,l)}catch(r){console.error("error with record",t.catalogNumber),console.error(r)}if(t.collectionDate&&t.collectionDate.includes("-")&&(t.collectionDate=t.collectionDate.replace("-","–")),!t.specimenStageSex){let r,o;t.sex&&(r=t.sex.split(",").map(s=>s.trim()).filter(s=>s&&s.toLowerCase()!="unknown").join(" and ")),t.lifeStage&&(o=t.lifeStage.split(",").map(s=>{let a=s.trim();return a&&a.toLowerCase()=="unknown"||a.toLowerCase().startsWith("indet")?"stage "+a:a}).filter(s=>s).join(" and ")),r&&o?t.specimenStageSex=`${r}, ${o}`:t.specimenStageSex=`${r||o||""}`}if(t.eventConditions&&(t.eventRemarks?t.eventRemarks=t.eventConditions+"; "+t.eventRemarks:t.eventRemarks=t.eventConditions),t.occurrenceRemarks&&(t.occurrenceRemarks=="-"||t.occurrenceRemarks.toLowerCase()=="no data"||t.occurrenceRemarks.toLowerCase()=="no identification label")&&(t.occurrenceRemarks=null),t.specimenStageSex!=null){if(isNaN(t.specimenCount)){t.specimenCount=null;const r=t.specimenStageSex.match(/\d+/g);r&&r.length&&(t.specimenCount=r.reduce((o,s)=>o+Number(s),0))}else if(Number(t.specimenCount)>0)t.specimenCount=Number(t.specimenCount);else{t.specimenCount=null;const r=t.specimenStageSex.match(/\d+/g);r&&(t.specimenCount=r.reduce((o,s)=>o+Number(s),0))}t.specimenStageSex=t.specimenStageSex.replace(/M/g,"♂").replace(/F/g,"♀")}return t.dateIdentified&&l&&(t.dateIdentified=Fl(t.dateIdentified)),t.identifiedBy||(t.detByLast?(t.identifiedBy=t.detByLast,t.detByFirst?/^[A-Z\.\s]+$/.test(t.detByFirst)?t.identifiedBy+=`, ${Array.from(t.detByFirst).filter(r=>r&&/[a-zA-Z]+/.test(r)).map(r=>r.toUpperCase()).join(".")}`:(t.identifiedBy+=`, ${t.detByFirst[0].toUpperCase()+"."}`,t.detByInitials&&(/^[A-Z\.\s]+$/.test(t.detByInitials)?t.identifiedBy+=Array.from(t.detByInitials).filter(r=>r&&/[a-zA-Z]+/.test(r)).map(r=>r.toUpperCase()).join("."):t.identifiedBy+=t.detByInitials[0].toUpperCase()+".")):t.detByInitials&&(/^[A-Z\.\s]+$/.test(t.detByInitials)?t.identifiedBy+=`, ${Array.from(t.detByInitials).filter(r=>r&&/[a-zA-Z]+/.test(r)).map(r=>r.toUpperCase()).join(".")}`:t.identifiedBy+=t.detByInitials[0].toUpperCase()+".")):t.detByFirst?/^[A-Z\.\s]+$/.test(t.detByFirst)?t.identifiedBy=Array.from(t.detByFirst).filter(r=>r&&/[a-zA-Z]+/.test(r)).map(r=>r.toUpperCase()).join("."):(t.identifiedBy=t.detByFirst,t.detByInitials&&(/^[A-Z\.\s]+$/.test(t.detByInitials)?t.identifiedBy+=` ${Array.from(t.detByInitials).filter(r=>r&&/[a-zA-Z]+/.test(r)).map(r=>r.toUpperCase()).join(".")}`:t.identifiedBy+=` ${t.detByInitials}`)):t.detByMiddleInitial&&(t.identifiedBy=t.detByMiddleInitial)),t.identificationMethod?(t.identificationReferences&&(t.identificationMethod+=` (${t.identificationReferences})`),t.identificationRemarks?t.identificationRemarks=[t.identificationMethod,t.identificationRemarks].join("; "):t.identificationRemarks=t.identificationMethod):(t.identificationReferences&&(t.identificationReferences=`From ${t.identificationReferences}`),t.identificationRemarks?t.identificationRemarks=[t.identificationReferences,t.identificationRemarks].join("; "):t.identificationRemarks=t.identificationReferences),t}function gs(n){return new Promise((e,l)=>{n.text().then(i=>{const t=JSON.parse(i);t&&Array.isArray(t)&&t.length?e(t):l("invalid json file")}).catch(i=>l("error parsing JSON: "+i.message))})}function bs(n){let e,l,i,t=Z[n[4].lang].box+"",r,o,s,a,f,c,g,h,m,_,I,C,L,P;return h=new po({}),{c(){e=d("div"),l=d("div"),i=d("p"),r=F(t),o=N(),s=d("input"),a=N(),f=d("dialog"),c=d("div"),g=d("button"),Ce(h.$$.fragment),m=N(),_=d("div"),I=F(n[2]),S(i,"class","svelte-1tnliv6"),S(l,"id","fileDropBox"),S(l,"class","fileDropBox svelte-1tnliv6"),S(l,"ondragover","return false"),X(l,"active",n[3]),X(l,"inactive",!n[3]),S(e,"id","wrapper"),S(e,"class","wrapper svelte-1tnliv6"),S(s,"type","file"),B(s,"visibility","hidden"),S(s,"class","svelte-1tnliv6"),B(g,"background-color","transparent"),B(g,"border","none"),B(g,"padding","0"),B(g,"margin","0"),S(g,"class","svelte-1tnliv6"),B(c,"display","flex"),B(c,"width","100%"),B(c,"justify-content","flex-end"),S(c,"class","svelte-1tnliv6"),S(_,"class","svelte-1tnliv6"),B(f,"background-color","#FFCC66"),S(f,"class","svelte-1tnliv6")},m(k,w){y(k,e,w),u(e,l),u(l,i),u(i,r),y(k,o,w),y(k,s,w),n[11](s),y(k,a,w),y(k,f,w),u(f,c),u(c,g),ke(h,g,null),u(f,m),u(f,_),u(_,I),n[13](f),C=!0,L||(P=[x(l,"mouseenter",n[6]),x(l,"mouseleave",n[7]),x(l,"dragenter",n[6]),x(l,"dragleave",n[7]),x(l,"drop",n[9]),x(l,"click",n[10]),x(s,"change",n[8]),x(g,"click",n[12])],L=!0)},p(k,[w]){(!C||w&16)&&t!==(t=Z[k[4].lang].box+"")&&q(r,t),(!C||w&8)&&X(l,"active",k[3]),(!C||w&8)&&X(l,"inactive",!k[3]),(!C||w&4)&&q(I,k[2])},i(k){C||(G(h.$$.fragment,k),C=!0)},o(k){le(h.$$.fragment,k),C=!1},d(k){k&&(v(e),v(o),v(s),v(a),v(f)),n[11](null),we(h),n[13](null),L=!1,We(P)}}}function _s(n,e,l){let i;const t=so(),r=$e("settings");Oe(n,r,E=>l(4,i=E));const o=["text/csv","application/vnd.ms-excel","text/json","application/json"];let s,a,f="This is a default message",c=!1;function g(E){E.stopPropagation(),E.preventDefault(),l(3,c=!0)}function h(E){E.stopPropagation(),E.preventDefault(),l(3,c=!1)}function m(){let E=s.files[0];l(3,c=!1),C(E),l(0,s.value=null,s)}function _(E){E.stopPropagation(),E.preventDefault(),l(3,c=!1);let $=E.dataTransfer.files[0];C($)}async function I(E){let $;if(E.type.endsWith("json"))try{$=await gs(E)}catch(p){throw p}else try{$=await ps(E)}catch(p){throw p}let b=E.name.replace(/\.[a-z]+$/i,"").trim();return b.toLowerCase().includes("label")||(b+=" labels"),{data:$,title:b}}async function C(E){if(E&&o.includes(E.type))try{const $=await I(E);t("data",$)}catch($){L("Oops! Something went wrong: "+$.message)}else L("Please select a valid CSV file")}const L=E=>{E&&l(2,f=E),a.showModal()},P=E=>s.click();function k(E){zt[E?"unshift":"push"](()=>{s=E,l(0,s)})}const w=E=>a.close();function R(E){zt[E?"unshift":"push"](()=>{a=E,l(1,a)})}return[s,a,f,c,i,r,g,h,m,_,P,k,w,R]}class vs extends Pe{constructor(e){super(),Te(this,e,_s,bs,Ae,{})}}const ys=[{catnum:"",collectorNo:"IE06-253",typestatus:"",country:"South Africa",admin1:"Mpumalanga",admin1Type:"Prov.",admin2:"Carolina",admin2Type:"Distr.",locality:"Farm Frisgewaagd 409, Ca. 10km north of Carolina",verbatimLatitude:`S25°55'09.0"`,verbatimLongitude:`E30°03'44.6"`,uncertainty:200,uncertaintyUnit:"m",geodeticDatum:"WGS84",georefSources:"GPS",habitat:"Hill crest; 100% quarzite; orange, sandy soil",verbatimElevation:"1725m",sitecode:"",permitNumber:"",collectingDate:"2006/11/12 10:00–10:40",startdate:"",enddate:"",collectors:"I. Engelbrecht (GDACE); A. Mathie; H. Claasens",collectMethods:"opportunistic searching; rock turning",conditions:"soil slightly damp",lifeStageSexCounts:"",seriesNote:"",class:"Arachnida",order:"Araneae",family:"Theraphosidae",genus:"Harpactira",specificEpithet:"",infraspecificEpithet:"",canonicalName:"Harpactira",taxonRank:"genus",author:"",verbatimIdentification:"",dateIdentified:"2006-11-23",identifiedBy:"I. Engelbrecht (GDACE)",detMethod:"",identificationQualifier:null,identificationConfidence:"",detReferences:"",detNote:""},{catnum:"TM54321",collectorNo:"IE11-143",typestatus:"",country:"South Africa",admin1:"Northern Cape",admin1Type:"Prov.",admin2:"Noupoort",admin2Type:"Distr.",locality:"Caroluspoort, ca. 10km NW of Noupoort, north side of ridge alongside railwayline",verbatimLatitude:"S31°07'27.5''",verbatimLongitude:"E24°53'20.6''",uncertainty:null,uncertaintyUnit:"",geodeticDatum:"WGS84",georefSources:"GPS",habitat:"Gentle to moderate, N facing hill base & slope; loose rocks (50 - 75% cover); 100% dolerite; open, besemkaree shrubland",verbatimElevation:"",sitecode:"",permitNumber:"",collectingDate:"2011/11/19",startdate:"",enddate:"",collectors:"I. Engelbrecht (GDACE); K. Moir",collectMethods:"UV lighting",conditions:"cool, moderately windy, very dry",lifeStageSexCounts:"1ad♀",seriesNote:"captive reared",class:"",order:"",family:"",genus:"",specificEpithet:"",infraspecificEpithet:"",canonicalName:"Harpactira baviana",taxonRank:"species",author:"Purcell, 1903",verbatimIdentification:"",dateIdentified:"2016-07-01",identifiedBy:"I. Engelbrecht (UP)",detMethod:"tacit expertise",identificationQualifier:"cf.",identificationConfidence:"",detReferences:"",detNote:"Confirmed after topotypes collected at Hanover"},{catnum:"TM12335",collectorNo:"IE15-018",typestatus:"paratype",country:"South Africa",admin1:"Eastern Cape",admin1Type:"Prov.",admin2:"Jansenville",admin2Type:"Distr.",locality:"Farm Osplaat, 18km WNW Jansenville",verbatimLatitude:"S32.8772°",verbatimLongitude:"E24.4952°",uncertainty:3,uncertaintyUnit:"km",geodeticDatum:"WGS84",georefSources:"GPS",habitat:"Acacia karroo scrubland, pale sandy loam soils",verbatimElevation:"",sitecode:"ARB12",permitNumber:"",collectingDate:"",startdate:"2015/07/17",enddate:"2015/07/19",collectors:"I. Engelbrecht (UP); D. Kambas",collectMethods:"road cruise",conditions:"",lifeStageSexCounts:"5ad♂",seriesNote:"presumed conspecific with IE15-017",canonicalName:"Harpactirella",taxonRank:"genus",author:"",verbatimIdentification:"",dateIdentified:"2015-07-17",identifiedBy:"I. Engelbrecht (UP)",detMethod:"tacit expertise",identificationQualifier:null,identificationConfidence:"asd",detReferences:"",detNote:""},{catnum:"",collectorNo:"",typestatus:"",country:"South Africa",admin1:"Limpopo",admin1Type:"Prov.",admin2:"Phalaborwa",admin2Type:"Distr.",locality:"Kruger National Park, Shingwedzi Research Camp, Area W of airstrip",verbatimLatitude:`S23°06'59.3"`,verbatimLongitude:`E31°25'38.9"`,uncertainty:null,uncertaintyUnit:"",geodeticDatum:"WGS84",georefSources:"GPS",habitat:"Plain with gentle slope and E aspect; Mopane woodland; dark grey/black clay loam soils",verbatimElevation:"273m",sitecode:"",permitNumber:"RB/06/82",collectingDate:"2007/01/02 08:00–11:30",startdate:"",enddate:"",collectors:"Spider Club members (SCSA)",collectMethods:"opportunistic searching",conditions:"soil wet",lifeStageSexCounts:"",seriesNote:"Many newly dispersed juveniles seen in the field, and one female had babies in the burrow, SCSA07-296 to 336",class:"Arachnida",order:"Araneae",family:"Theraphosidae",genus:"Ceratogyrus",specificEpithet:"bechuanicus",infraspecificEpithet:"",canonicalName:"Ceratogyrus bechuanicus",taxonRank:"species",author:"Purcell, 1902",dateIdentified:"2007-01-02",identifiedBy:"I. Engelbrecht (GDACE)",detMethod:"tacit expertise",identificationQualifier:"sensu lato",identificationConfidence:"",detReferences:"",detNote:""}],Se={fontSize:{min:4,max:24,default:12},lineHeight:{min:90,max:120,default:100,step:5},labelWidth:{min:2.5,max:10,default:5,step:.5},qrCodeDims:{min:25,max:60,default:30,step:5}},Dn={lang:"en",type:"general",showInstitution:!1,collectionName:null,labelPerSpecimen:!1,labelCountField:null,useRomanNumeralMonths:!1,detLabel:!0,detLabelOnly:!1,italicizeNames:!1,showStorage:!1,includePunch:!1,includeQRCode:!1,qrCodeErrorLevel:"Q",qrCodeOnDetLabels:!1,includeTaxonAuthorities:!1,excludeNoCatnums:!1,includeFieldNumber:!1,underline:!1,italics:!1,addPrintedDate:!1,includeProject:!1,font:"Roboto Condensed",fontSize:Se.fontSize.default,fontWeight:400,lineHeight:Se.lineHeight.default,labelWidth:Se.labelWidth.default,qrCodeDims:Se.qrCodeDims.default};function ks(n){let e,l,i,t,r,o,s,a,f,c=Z[n[1].lang].exampleData+"",g,h,m,_=Z[n[1].lang].exampleLabels+"",I,C,L,P;return document.title=e=n[0],i=new Ni({}),o=new vs({}),o.$on("data",n[4]),{c(){l=N(),Ce(i.$$.fragment),t=N(),r=d("div"),Ce(o.$$.fragment),s=N(),a=d("div"),f=d("a"),g=F(c),h=N(),m=d("a"),I=F(_),S(f,"href",ws),S(f,"target","_blank"),S(m,"href","/design"),B(a,"width","100%"),B(a,"display","flex"),B(a,"justify-content","flex-end"),B(a,"gap","2em"),B(r,"max-width","600px"),B(r,"margin","auto")},m(k,w){y(k,l,w),ke(i,k,w),y(k,t,w),y(k,r,w),ke(o,r,null),u(r,s),u(r,a),u(a,f),u(f,g),u(a,h),u(a,m),u(m,I),C=!0,L||(P=[Cn(Rn.call(null,m)),x(m,"click",jo(n[5]))],L=!0)},p(k,[w]){(!C||w&1)&&e!==(e=k[0])&&(document.title=e),(!C||w&2)&&c!==(c=Z[k[1].lang].exampleData+"")&&q(g,c),(!C||w&2)&&_!==(_=Z[k[1].lang].exampleLabels+"")&&q(I,_)},i(k){C||(G(i.$$.fragment,k),G(o.$$.fragment,k),C=!0)},o(k){le(i.$$.fragment,k),le(o.$$.fragment,k),C=!1},d(k){k&&(v(l),v(t),v(r)),we(i,k),we(o),L=!1,We(P)}}}let ws="https://docs.google.com/spreadsheets/d/17GK3ET4YRysCzieaSZAwn4mOyt3dBvTwlocZSIVPFgc/edit?usp=sharing";function Cs(n,e,l){let i,t,r="NSCF labels";const o=$e("data");Oe(n,o,g=>l(7,i=g));const s={};for(const[g,h]of Object.entries(Dn))s[g]=h;if(localStorage.getItem("labelSettings")!=null){const g=JSON.parse(localStorage.getItem("labelSettings"));for(const[h,m]of Object.entries(g))h in Dn&&(s[h]=m)}const a=$e("settings");return Oe(n,a,g=>l(1,t=g)),Be(a,t=s,t),[r,t,o,a,async g=>{let h=g.detail;Be(o,i=h.data,i),l(0,r=h.title),Dl("/design")},g=>{Be(o,i=ys,i),Dl("/design")}]}class Ns extends Pe{constructor(e){super(),Te(this,e,Cs,ks,Ae,{})}}function Ol(n,e,l){const i=n.slice();return i[35]=e[l],i}function $l(n,e,l){const i=n.slice();return i[38]=e[l],i}function jl(n){let e,l,i,t,r,o;return{c(){e=d("input"),l=d("br"),i=N(),t=d("br"),S(e,"type","text"),B(e,"display","inline"),B(e,"margin","0"),B(e,"height","10px"),S(e,"placeholder","Collection name...")},m(s,a){y(s,e,a),ge(e,n[0].collectionName),y(s,l,a),y(s,i,a),y(s,t,a),r||(o=x(e,"input",n[13]),r=!0)},p(s,a){a[0]&5&&e.value!==s[0].collectionName&&ge(e,s[0].collectionName)},d(s){s&&(v(e),v(l),v(i),v(t)),r=!1,o()}}}function Ul(n){let e,l,i,t,r,o,s;return{c(){e=d("label"),l=d("input"),i=F(`\r
    Add it on det labels`),t=N(),r=d("br"),S(l,"type","checkbox"),B(l,"margin-left","2em"),B(e,"display","inline")},m(a,f){y(a,e,f),u(e,l),l.checked=n[0].qrCodeOnDetLabels,u(e,i),y(a,t,f),y(a,r,f),o||(s=x(l,"change",n[18]),o=!0)},p(a,f){f[0]&5&&(l.checked=a[0].qrCodeOnDetLabels)},d(a){a&&(v(e),v(t),v(r)),o=!1,s()}}}function zl(n){let e,l,i,t,r,o;return{c(){e=d("input"),l=d("br"),i=N(),t=d("br"),S(e,"type","text"),B(e,"display","inline"),B(e,"margin","0"),B(e,"height","10px"),S(e,"placeholder","Printer make and model")},m(s,a){y(s,e,a),ge(e,n[0].printerModel),y(s,l,a),y(s,i,a),y(s,t,a),r||(o=x(e,"input",n[27]),r=!0)},p(s,a){a[0]&5&&e.value!==s[0].printerModel&&ge(e,s[0].printerModel)},d(s){s&&(v(e),v(l),v(i),v(t)),r=!1,o()}}}function Hl(n){let e,l=n[38]+"",i;return{c(){e=d("option"),i=F(l),e.__value=n[38],ge(e,e.__value)},m(t,r){y(t,e,r),u(e,i)},p:pe,d(t){t&&v(e)}}}function ql(n){let e,l,i=Z[n[0].lang].fontWeight+"",t,r,o,s,a,f=Le(n[3][n[0].font]),c=[];for(let g=0;g<f.length;g+=1)c[g]=Wl(Ol(n,f,g));return{c(){e=d("div"),l=d("label"),t=F(i),r=N(),o=d("select");for(let g=0;g<c.length;g+=1)c[g].c();n[0].fontWeight===void 0&&ct(()=>n[29].call(o))},m(g,h){y(g,e,h),u(e,l),u(l,t),u(e,r),u(e,o);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(o,null);it(o,n[0].fontWeight,!0),s||(a=x(o,"change",n[29]),s=!0)},p(g,h){if(h[0]&1&&i!==(i=Z[g[0].lang].fontWeight+"")&&q(t,i),h[0]&9){f=Le(g[3][g[0].font]);let m;for(m=0;m<f.length;m+=1){const _=Ol(g,f,m);c[m]?c[m].p(_,h):(c[m]=Wl(_),c[m].c(),c[m].m(o,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=f.length}h[0]&5&&it(o,g[0].fontWeight)},d(g){g&&v(e),at(c,g),s=!1,a()}}}function Wl(n){let e,l=n[35]+"",i,t;return{c(){e=d("option"),i=F(l),e.__value=t=n[35],ge(e,e.__value)},m(r,o){y(r,e,o),u(e,i)},p(r,o){o[0]&1&&l!==(l=r[35]+"")&&q(i,l),o[0]&5&&t!==(t=r[35])&&(e.__value=t,ge(e,e.__value))},d(r){r&&v(e)}}}function Ql(n){let e,l,i,t,r,o,s,a,f,c,g,h,m,_,I;return{c(){e=d("div"),l=d("label"),l.textContent="QR Code size",i=N(),t=d("input"),r=N(),o=d("div"),s=d("label"),s.textContent="Robustness",a=N(),f=d("select"),c=d("option"),c.textContent="Low",g=d("option"),g.textContent="Medium",h=d("option"),h.textContent="Quartile",m=d("option"),m.textContent="High",S(t,"type","number"),S(t,"name","qrCodeDims"),S(t,"min",Se.qrCodeDims.min),S(t,"max",Se.qrCodeDims.max),S(t,"step",Se.qrCodeDims.step),c.__value="L",ge(c,c.__value),g.__value="M",ge(g,g.__value),h.__value="Q",ge(h,h.__value),m.__value="H",ge(m,m.__value),n[0].qrCodeErrorLevel===void 0&&ct(()=>n[34].call(f))},m(C,L){y(C,e,L),u(e,l),u(e,i),u(e,t),ge(t,n[0].qrCodeDims),y(C,r,L),y(C,o,L),u(o,s),u(o,a),u(o,f),u(f,c),u(f,g),u(f,h),u(f,m),it(f,n[0].qrCodeErrorLevel,!0),_||(I=[x(t,"keyup",n[4]),x(t,"wheel",n[5]),x(t,"input",n[33]),x(f,"change",n[34])],_=!0)},p(C,L){L[0]&5&&mt(t.value)!==C[0].qrCodeDims&&ge(t,C[0].qrCodeDims),L[0]&5&&it(f,C[0].qrCodeErrorLevel)},d(C){C&&(v(e),v(r),v(o)),_=!1,We(I)}}}function Ss(n){let e,l,i,t,r,o,s,a,f,c,g,h,m,_,I,C,L,P,k,w,R,E,$,b,p=Z[n[0].lang].count+"",A,U,H,O,T,K,D,M=Z[n[0].lang].romanNums+"",ee,V,re,fe,z,te,de,ae=Z[n[0].lang].collName+"",ve,he,ce,J,ie,oe,ue,j,se=Z[n[0].lang].dets+"",be,me,Re,De,Ee,Q,Y,ye=Z[n[0].lang].detsOnly+"",Ne,ot,_e,ft,Fe,Qe,rt,Ze=Z[n[0].lang].punch+"",nt,je,_t,Ue,dt,st,Ai,Mi,Bi,Ti,jn,wt,Ct,Pi,an=Z[n[0].lang].storage+"",Un,Fi,Oi,$i,Nt,St,ji,un=Z[n[0].lang].authors+"",zn,Ui,zi,Hi,Et,Lt,qi,fn=Z[n[0].lang].excludeCatNums+"",Hn,Wi,Qi,Ki,Kt,Rt,Vi,Ji,Yi,Gi,Vt,Dt,Zi,Xi,xi,el,It,At,tl,cn=Z[n[0].lang].underline+"",qn,nl,il,ll,Jt,Mt,rl,ol,sl,al,Bt,Tt,ul,dn=Z[n[0].lang].printDate+"",Wn,fl,cl,dl,Qn,Ie,Yt,Kn,hn=Z[n[0].lang].font+"",Vn,hl,ht,pl,Jn,Gt,Yn,pn=Z[n[0].lang].fontSize+"",Gn,ml,Xe,gl,Zt,Zn,mn=Z[n[0].lang].lineHeight+"",Xn,bl,xe,_l,Xt,xn,gn=Z[n[0].lang].labelWidth+"",ei,vl,vt,et,yl,ti,bn=Z[n[0].lang].labelWidthUnit+"",ni,kl,ii,pt,_n=Z[n[0].lang].saveSettings+"",li,ri,oi,si,ai,wl,Ke=n[0].showInstitution&&jl(n),Ve=n[0].includeQRCode&&n[0].detLabel&&!n[0].detLabelOnly&&Ul(n),Je=n[0].addPrintedDate&&zl(n),Pt=Le(n[2]),ze=[];for(let W=0;W<Pt.length;W+=1)ze[W]=Hl($l(n,Pt,W));let Ye=n[0].font in n[3]&&ql(n),Ge=n[0].includeQRCode&&Ql(n);return si=Uo(n[7][0]),{c(){e=d("div"),l=d("label"),i=F(`Label type\r
    `),t=d("br"),r=N(),o=d("input"),s=N(),a=d("label"),a.textContent="General",f=d("br"),c=N(),g=d("input"),h=N(),m=d("label"),m.textContent="Herbarium (coming soon)",_=d("br"),I=N(),C=d("input"),L=N(),P=d("label"),P.textContent="Insect (coming soon)",k=N(),w=d("br"),R=N(),E=d("label"),$=d("input"),b=N(),A=F(p),U=N(),H=d("br"),O=N(),T=d("label"),K=d("input"),D=N(),ee=F(M),V=N(),re=d("br"),fe=N(),z=d("label"),te=d("input"),de=N(),ve=F(ae),he=N(),ce=d("br"),J=N(),Ke&&Ke.c(),ie=N(),oe=d("label"),ue=d("input"),j=N(),be=F(se),me=N(),Re=d("br"),De=N(),Ee=d("label"),Q=d("input"),Y=N(),Ne=F(ye),ot=N(),_e=d("br"),ft=N(),Fe=d("label"),Qe=d("input"),rt=N(),nt=F(Ze),je=N(),_t=d("br"),Ue=N(),dt=d("label"),st=d("input"),Ai=F(`\r
    Include QR code`),Mi=N(),Bi=d("br"),Ti=N(),Ve&&Ve.c(),jn=N(),wt=d("label"),Ct=d("input"),Pi=N(),Un=F(an),Fi=N(),Oi=d("br"),$i=N(),Nt=d("label"),St=d("input"),ji=N(),zn=F(un),Ui=N(),zi=d("br"),Hi=N(),Et=d("label"),Lt=d("input"),qi=N(),Hn=F(fn),Wi=N(),Qi=d("br"),Ki=N(),Kt=d("label"),Rt=d("input"),Vi=F(`\r
    Include field number`),Ji=N(),Yi=d("br"),Gi=N(),Vt=d("label"),Dt=d("input"),Zi=F(`\r
    Include project name`),Xi=N(),xi=d("br"),el=N(),It=d("label"),At=d("input"),tl=N(),qn=F(cn),nl=N(),il=d("br"),ll=N(),Jt=d("label"),Mt=d("input"),rl=F(`\r
    Italics for scientific names`),ol=N(),sl=d("br"),al=N(),Bt=d("label"),Tt=d("input"),ul=N(),Wn=F(dn),fl=N(),cl=d("br"),dl=N(),Je&&Je.c(),Qn=N(),Ie=d("div"),Yt=d("div"),Kn=d("label"),Vn=F(hn),hl=N(),ht=d("select");for(let W=0;W<ze.length;W+=1)ze[W].c();pl=N(),Ye&&Ye.c(),Jn=N(),Gt=d("div"),Yn=d("label"),Gn=F(pn),ml=N(),Xe=d("input"),gl=N(),Zt=d("div"),Zn=d("label"),Xn=F(mn),bl=N(),xe=d("input"),_l=N(),Xt=d("div"),xn=d("label"),ei=F(gn),vl=N(),vt=d("div"),et=d("input"),yl=N(),ti=d("span"),ni=F(bn),kl=N(),Ge&&Ge.c(),ii=N(),pt=d("p"),li=F(_n),ri=N(),oi=d("br"),S(o,"type","radio"),S(o,"id","wetlabel"),S(o,"name","label-type"),o.__value="general",ge(o,o.__value),S(a,"for","wetlabel"),S(g,"type","radio"),S(g,"id","herbariumlabel"),S(g,"name","label-type"),g.__value="herbarium",ge(g,g.__value),g.disabled=!0,S(m,"for","herbariumlabel"),S(C,"type","radio"),S(C,"id","insectlabel"),S(C,"name","label-type"),C.__value="insect",ge(C,C.__value),C.disabled=!0,S(P,"for","insectlabel"),B(l,"display","inline"),S($,"type","checkbox"),B(E,"display","inline"),S(K,"type","checkbox"),B(T,"display","inline"),S(te,"type","checkbox"),B(z,"display","inline"),S(ue,"type","checkbox"),B(oe,"display","inline"),S(Q,"type","checkbox"),B(Ee,"display","inline"),S(Qe,"type","checkbox"),B(Fe,"display","inline"),S(st,"type","checkbox"),B(dt,"display","inline"),S(Ct,"type","checkbox"),B(wt,"display","inline"),S(St,"type","checkbox"),B(Nt,"display","inline"),S(Lt,"type","checkbox"),B(Et,"display","inline"),S(Rt,"type","checkbox"),B(Kt,"display","inline"),S(Dt,"type","checkbox"),B(Vt,"display","inline"),S(At,"type","checkbox"),B(It,"display","inline"),S(Mt,"type","checkbox"),B(Jt,"display","inline"),S(Tt,"type","checkbox"),B(Bt,"display","inline"),S(e,"class","cols svelte-sl18gb"),n[0].font===void 0&&ct(()=>n[28].call(ht)),S(Xe,"type","number"),S(Xe,"name","fontSize"),S(Xe,"min",Se.fontSize.min),S(Xe,"max",Se.fontSize.max),S(Xe,"step",Se.fontSize.step||1),S(xe,"type","number"),S(xe,"name","lineHeight"),S(xe,"min",Se.lineHeight.min),S(xe,"max",Se.lineHeight.max),S(xe,"step",Se.lineHeight.step),S(et,"type","number"),S(et,"name","labelWidth"),S(et,"min",Se.labelWidth.min),S(et,"max",Se.labelWidth.max),S(et,"step",Se.labelWidth.step),B(vt,"display","flex"),B(vt,"align-items","baseline"),B(Ie,"display","flex"),B(Ie,"gap","5px"),B(pt,"position","relative"),B(pt,"margin","0"),B(pt,"top","-1em"),B(pt,"font-size","0.7em"),si.p(o,g,C)},m(W,ne){y(W,e,ne),u(e,l),u(l,i),u(l,t),u(l,r),u(l,o),o.checked=o.__value===n[0].type,u(l,s),u(l,a),u(l,f),u(l,c),u(l,g),g.checked=g.__value===n[0].type,u(l,h),u(l,m),u(l,_),u(l,I),u(l,C),C.checked=C.__value===n[0].type,u(l,L),u(l,P),u(e,k),u(e,w),u(e,R),u(e,E),u(E,$),$.checked=n[0].labelPerSpecimen,u(E,b),u(E,A),u(e,U),u(e,H),u(e,O),u(e,T),u(T,K),K.checked=n[0].useRomanNumeralMonths,u(T,D),u(T,ee),u(e,V),u(e,re),u(e,fe),u(e,z),u(z,te),te.checked=n[0].showInstitution,u(z,de),u(z,ve),u(e,he),u(e,ce),u(e,J),Ke&&Ke.m(e,null),u(e,ie),u(e,oe),u(oe,ue),ue.checked=n[0].detLabel,u(oe,j),u(oe,be),u(e,me),u(e,Re),u(e,De),u(e,Ee),u(Ee,Q),Q.checked=n[0].detLabelOnly,u(Ee,Y),u(Ee,Ne),u(e,ot),u(e,_e),u(e,ft),u(e,Fe),u(Fe,Qe),Qe.checked=n[0].includePunch,u(Fe,rt),u(Fe,nt),u(e,je),u(e,_t),u(e,Ue),u(e,dt),u(dt,st),st.checked=n[0].includeQRCode,u(dt,Ai),u(e,Mi),u(e,Bi),u(e,Ti),Ve&&Ve.m(e,null),u(e,jn),u(e,wt),u(wt,Ct),Ct.checked=n[0].showStorage,u(wt,Pi),u(wt,Un),u(e,Fi),u(e,Oi),u(e,$i),u(e,Nt),u(Nt,St),St.checked=n[0].includeTaxonAuthorities,u(Nt,ji),u(Nt,zn),u(e,Ui),u(e,zi),u(e,Hi),u(e,Et),u(Et,Lt),Lt.checked=n[0].excludeNoCatnums,u(Et,qi),u(Et,Hn),u(e,Wi),u(e,Qi),u(e,Ki),u(e,Kt),u(Kt,Rt),Rt.checked=n[0].includeFieldNumber,u(Kt,Vi),u(e,Ji),u(e,Yi),u(e,Gi),u(e,Vt),u(Vt,Dt),Dt.checked=n[0].includeProject,u(Vt,Zi),u(e,Xi),u(e,xi),u(e,el),u(e,It),u(It,At),At.checked=n[0].underline,u(It,tl),u(It,qn),u(e,nl),u(e,il),u(e,ll),u(e,Jt),u(Jt,Mt),Mt.checked=n[0].italics,u(Jt,rl),u(e,ol),u(e,sl),u(e,al),u(e,Bt),u(Bt,Tt),Tt.checked=n[0].addPrintedDate,u(Bt,ul),u(Bt,Wn),u(e,fl),u(e,cl),u(e,dl),Je&&Je.m(e,null),y(W,Qn,ne),y(W,Ie,ne),u(Ie,Yt),u(Yt,Kn),u(Kn,Vn),u(Yt,hl),u(Yt,ht);for(let Me=0;Me<ze.length;Me+=1)ze[Me]&&ze[Me].m(ht,null);it(ht,n[0].font,!0),u(Ie,pl),Ye&&Ye.m(Ie,null),u(Ie,Jn),u(Ie,Gt),u(Gt,Yn),u(Yn,Gn),u(Gt,ml),u(Gt,Xe),ge(Xe,n[0].fontSize),u(Ie,gl),u(Ie,Zt),u(Zt,Zn),u(Zn,Xn),u(Zt,bl),u(Zt,xe),ge(xe,n[0].lineHeight),u(Ie,_l),u(Ie,Xt),u(Xt,xn),u(xn,ei),u(Xt,vl),u(Xt,vt),u(vt,et),ge(et,n[0].labelWidth),u(vt,yl),u(vt,ti),u(ti,ni),u(Ie,kl),Ge&&Ge.m(Ie,null),y(W,ii,ne),y(W,pt,ne),u(pt,li),y(W,ri,ne),y(W,oi,ne),ai||(wl=[x(o,"change",n[6]),x(g,"change",n[8]),x(C,"change",n[9]),x($,"change",n[10]),x(K,"change",n[11]),x(te,"change",n[12]),x(ue,"change",n[14]),x(Q,"change",n[15]),x(Qe,"change",n[16]),x(st,"change",n[17]),x(Ct,"change",n[19]),x(St,"change",n[20]),x(Lt,"change",n[21]),x(Rt,"change",n[22]),x(Dt,"change",n[23]),x(At,"change",n[24]),x(Mt,"change",n[25]),x(Tt,"change",n[26]),x(ht,"change",n[28]),x(Xe,"keyup",n[4]),x(Xe,"wheel",n[5]),x(Xe,"input",n[30]),x(xe,"keyup",n[4]),x(xe,"wheel",n[5]),x(xe,"input",n[31]),x(et,"keyup",n[4]),x(et,"wheel",n[5]),x(et,"input",n[32])],ai=!0)},p(W,ne){if(ne[0]&5&&(o.checked=o.__value===W[0].type),ne[0]&5&&(g.checked=g.__value===W[0].type),ne[0]&5&&(C.checked=C.__value===W[0].type),ne[0]&5&&($.checked=W[0].labelPerSpecimen),ne[0]&1&&p!==(p=Z[W[0].lang].count+"")&&q(A,p),ne[0]&5&&(K.checked=W[0].useRomanNumeralMonths),ne[0]&1&&M!==(M=Z[W[0].lang].romanNums+"")&&q(ee,M),ne[0]&5&&(te.checked=W[0].showInstitution),ne[0]&1&&ae!==(ae=Z[W[0].lang].collName+"")&&q(ve,ae),W[0].showInstitution?Ke?Ke.p(W,ne):(Ke=jl(W),Ke.c(),Ke.m(e,ie)):Ke&&(Ke.d(1),Ke=null),ne[0]&5&&(ue.checked=W[0].detLabel),ne[0]&1&&se!==(se=Z[W[0].lang].dets+"")&&q(be,se),ne[0]&5&&(Q.checked=W[0].detLabelOnly),ne[0]&1&&ye!==(ye=Z[W[0].lang].detsOnly+"")&&q(Ne,ye),ne[0]&5&&(Qe.checked=W[0].includePunch),ne[0]&1&&Ze!==(Ze=Z[W[0].lang].punch+"")&&q(nt,Ze),ne[0]&5&&(st.checked=W[0].includeQRCode),W[0].includeQRCode&&W[0].detLabel&&!W[0].detLabelOnly?Ve?Ve.p(W,ne):(Ve=Ul(W),Ve.c(),Ve.m(e,jn)):Ve&&(Ve.d(1),Ve=null),ne[0]&5&&(Ct.checked=W[0].showStorage),ne[0]&1&&an!==(an=Z[W[0].lang].storage+"")&&q(Un,an),ne[0]&5&&(St.checked=W[0].includeTaxonAuthorities),ne[0]&1&&un!==(un=Z[W[0].lang].authors+"")&&q(zn,un),ne[0]&5&&(Lt.checked=W[0].excludeNoCatnums),ne[0]&1&&fn!==(fn=Z[W[0].lang].excludeCatNums+"")&&q(Hn,fn),ne[0]&5&&(Rt.checked=W[0].includeFieldNumber),ne[0]&5&&(Dt.checked=W[0].includeProject),ne[0]&5&&(At.checked=W[0].underline),ne[0]&1&&cn!==(cn=Z[W[0].lang].underline+"")&&q(qn,cn),ne[0]&5&&(Mt.checked=W[0].italics),ne[0]&5&&(Tt.checked=W[0].addPrintedDate),ne[0]&1&&dn!==(dn=Z[W[0].lang].printDate+"")&&q(Wn,dn),W[0].addPrintedDate?Je?Je.p(W,ne):(Je=zl(W),Je.c(),Je.m(e,null)):Je&&(Je.d(1),Je=null),ne[0]&1&&hn!==(hn=Z[W[0].lang].font+"")&&q(Vn,hn),ne[0]&4){Pt=Le(W[2]);let Me;for(Me=0;Me<Pt.length;Me+=1){const Cl=$l(W,Pt,Me);ze[Me]?ze[Me].p(Cl,ne):(ze[Me]=Hl(Cl),ze[Me].c(),ze[Me].m(ht,null))}for(;Me<ze.length;Me+=1)ze[Me].d(1);ze.length=Pt.length}ne[0]&5&&it(ht,W[0].font),W[0].font in W[3]?Ye?Ye.p(W,ne):(Ye=ql(W),Ye.c(),Ye.m(Ie,Jn)):Ye&&(Ye.d(1),Ye=null),ne[0]&1&&pn!==(pn=Z[W[0].lang].fontSize+"")&&q(Gn,pn),ne[0]&5&&mt(Xe.value)!==W[0].fontSize&&ge(Xe,W[0].fontSize),ne[0]&1&&mn!==(mn=Z[W[0].lang].lineHeight+"")&&q(Xn,mn),ne[0]&5&&mt(xe.value)!==W[0].lineHeight&&ge(xe,W[0].lineHeight),ne[0]&1&&gn!==(gn=Z[W[0].lang].labelWidth+"")&&q(ei,gn),ne[0]&5&&mt(et.value)!==W[0].labelWidth&&ge(et,W[0].labelWidth),ne[0]&1&&bn!==(bn=Z[W[0].lang].labelWidthUnit+"")&&q(ni,bn),W[0].includeQRCode?Ge?Ge.p(W,ne):(Ge=Ql(W),Ge.c(),Ge.m(Ie,null)):Ge&&(Ge.d(1),Ge=null),ne[0]&1&&_n!==(_n=Z[W[0].lang].saveSettings+"")&&q(li,_n)},i:pe,o:pe,d(W){W&&(v(e),v(Qn),v(Ie),v(ii),v(pt),v(ri),v(oi)),Ke&&Ke.d(),Ve&&Ve.d(),Je&&Je.d(),at(ze,W),Ye&&Ye.d(),Ge&&Ge.d(),si.r(),ai=!1,We(wl)}}}function Es(n,e,l){let i;const t=$e("settings");Oe(n,t,z=>l(0,i=z));const r=["Roboto Condensed","Courier","PT Sans Narrow","Arial"],o={"Roboto Condensed":[100,200,300,400]},s=z=>{const te=z.target.name;i[te]>Se[te].max&&Be(t,i[te]=Se[te].max,i),i[te]<Se[te].min&&Be(t,i[te]=Se[te].min,i)},a=z=>{if(document.activeElement===z.target){z.preventDefault();const te=z.target.name;let de=Se[te].step||1,ae=Number(z.target.value);z.deltaY<0&&ae+de<=Se[te].max&&Be(t,i[te]=ae+de,i),z.deltaY>0&&ae-de>=Se[te].min&&Be(t,i[te]=ae-de,i)}},f=[[]];function c(){i.type=this.__value,t.set(i),l(2,r)}function g(){i.type=this.__value,t.set(i),l(2,r)}function h(){i.type=this.__value,t.set(i),l(2,r)}function m(){i.labelPerSpecimen=this.checked,t.set(i),l(2,r)}function _(){i.useRomanNumeralMonths=this.checked,t.set(i),l(2,r)}function I(){i.showInstitution=this.checked,t.set(i),l(2,r)}function C(){i.collectionName=this.value,t.set(i),l(2,r)}function L(){i.detLabel=this.checked,t.set(i),l(2,r)}function P(){i.detLabelOnly=this.checked,t.set(i),l(2,r)}function k(){i.includePunch=this.checked,t.set(i),l(2,r)}function w(){i.includeQRCode=this.checked,t.set(i),l(2,r)}function R(){i.qrCodeOnDetLabels=this.checked,t.set(i),l(2,r)}function E(){i.showStorage=this.checked,t.set(i),l(2,r)}function $(){i.includeTaxonAuthorities=this.checked,t.set(i),l(2,r)}function b(){i.excludeNoCatnums=this.checked,t.set(i),l(2,r)}function p(){i.includeFieldNumber=this.checked,t.set(i),l(2,r)}function A(){i.includeProject=this.checked,t.set(i),l(2,r)}function U(){i.underline=this.checked,t.set(i),l(2,r)}function H(){i.italics=this.checked,t.set(i),l(2,r)}function O(){i.addPrintedDate=this.checked,t.set(i),l(2,r)}function T(){i.printerModel=this.value,t.set(i),l(2,r)}function K(){i.font=jt(this),t.set(i),l(2,r)}function D(){i.fontWeight=jt(this),t.set(i),l(2,r)}function M(){i.fontSize=mt(this.value),t.set(i),l(2,r)}function ee(){i.lineHeight=mt(this.value),t.set(i),l(2,r)}function V(){i.labelWidth=mt(this.value),t.set(i),l(2,r)}function re(){i.qrCodeDims=mt(this.value),t.set(i),l(2,r)}function fe(){i.qrCodeErrorLevel=jt(this),t.set(i),l(2,r)}return n.$$.update=()=>{n.$$.dirty[0]&1&&(i.font in o||Be(t,i.fontWeight=400,i))},[i,t,r,o,s,a,c,f,g,h,m,_,I,C,L,P,k,w,R,E,$,b,p,A,U,H,O,T,K,D,M,ee,V,re,fe]}class Ls extends Pe{constructor(e){super(),Te(this,e,Es,Ss,Ae,{},null,[-1,-1])}}function Rs(n){let e,l=Array(300).join(n[0])+"",i;return{c(){e=d("div"),i=F(l),S(e,"class","svelte-ngj12l")},m(t,r){y(t,e,r),u(e,i)},p(t,[r]){r&1&&l!==(l=Array(300).join(t[0])+"")&&q(i,l)},i:pe,o:pe,d(t){t&&v(e)}}}function Ds(n,e,l){let{char:i}=e;return n.$$set=t=>{"char"in t&&l(0,i=t.char)},[i]}class Tn extends Pe{constructor(e){super(),Te(this,e,Ds,Rs,Ae,{char:0})}}function go(n,e,l,i){let t;return n.verbatimIdentification?t=n.verbatimIdentification:(t=As(n,e,l,i),!t&&n.scientificName&&(t=Ms(n,e,i))),t}const Kl={subspecies:"subsp.",variety:"var.",subvariety:"subvar.",form:"f.",subform:"subf."},Is=["subsp","var","subvar","f","subf"];function Vl(n){return Is.some(e=>new RegExp("^"+e+".?$").test(n))}function As(n,e,l,i){const t=["order","superfamily","family","tribe","subtribe","genus","species","subspecies","variety","subvariety","forma","subforma"];t.reverse();let r,o=!0;const s=[];for(let c of t){if(n[c]&&n[c].trim()&&(r||(r=c),i&&o?s.push("<i>"+n[c]+"</i>"):s.push(n[c]),l&&c in Kl&&s.push(Kl[c]),!o))break;if(c=="genus"){if(s.length>0)break;o=!1}}if(s.length==0)return null;s.reverse();let a=!1;return n.identificationConfidence&&n.identificationConfidence.toLowerCase()!="high"&&(a=!0),n.identificationQualifier?(bo(s,n.identificationQualifier,s.length-1),e&&n.scientificNameAuthorship&&["aff.","cf.","nr"].includes(n.identificationQualifier)&&s.push(n.scientificNameAuthorship)):(r=="genus"||r=="subgenus")&&s.push("sp."),e&&!n.identificationQualifier&&!a&&n.scientificNameAuthorship&&!s.includes(n.scientificNameAuthorship)&&s.push(n.scientificNameAuthorship),a&&s.push("?"),s.join(" ")}function bo(n,e,l){["aff.","cf.","nr"].includes(e)?n.splice(l,0,e):n.push(e)}function Ms(n,e,l){let i=n.scientificName;n.scientificNameAuthorship&&i.includes(n.scientificNameAuthorship)&&(i=i.replace(n.scientificNameAuthorship).trim());let t=i.split(" ").map(s=>s.trim()).filter(s=>s),r=0;for(let s=1;s<t.length&&!/^sp\.?$/i.test(t[s]);s++)if(t[s]==t[s].toLowerCase())r=s;else if(!t[s].includes("("))break;if(l){if(t.length==1)n.taxonRank&&n.taxonRank=="genus"&&(t[0]="<i>"+t[0]+"</i>");else if(/^sp\.?$/.test(t[r])){if(n.taxonRank&&["genus","subgenus"].includes(n.taxonRank))for(let s=0;s<=r;s++)t[s]="<i>"+t[s]+"</i>"}else if(r>0)for(let s=0;s<=r;s++)Vl(t[s])||(t[s]="<i>"+t[s]+"</i>")}Vl(t[r-1])&&(r-=1),n.identificationQualifier?(bo(t,n.identificationQualifier,r),e&&n.scientificNameAuthorship&&["aff.","cf.","nr"].includes(n.identificationQualifier)&&t.push(n.scientificNameAuthorship)):(n.taxonRank&&n.taxonRank=="genus"||n.taxonRank=="subgenus")&&(t.includes("sp.")||t.push("sp."));let o=!1;return n.identificationConfidence&&n.identificationConfidence.toLowerCase()!="high"&&(o=!0),e&&!n.identificationQualifier&&!o&&!t.includes("sp.")&&n.scientificNameAuthorship&&t.push(n.scientificNameAuthorship),o&&t.push("?"),i=t.join(" "),i}var on={},Bs=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},_o={},tt={};let Si;const Ts=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];tt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};tt.getSymbolTotalCodewords=function(e){return Ts[e]};tt.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};tt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Si=e};tt.isKanjiModeEnabled=function(){return typeof Si<"u"};tt.toSJIS=function(e){return Si(e)};var Pn={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+l)}}n.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},n.from=function(i,t){if(n.isValid(i))return i;try{return e(i)}catch{return t}}})(Pn);function vo(){this.buffer=[],this.length=0}vo.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let l=0;l<e;l++)this.putBit((n>>>e-l-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Ps=vo;function sn(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}sn.prototype.set=function(n,e,l,i){const t=n*this.size+e;this.data[t]=l,i&&(this.reservedBit[t]=!0)};sn.prototype.get=function(n,e){return this.data[n*this.size+e]};sn.prototype.xor=function(n,e,l){this.data[n*this.size+e]^=l};sn.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var Fs=sn,yo={};(function(n){const e=tt.getSymbolSize;n.getRowColCoords=function(i){if(i===1)return[];const t=Math.floor(i/7)+2,r=e(i),o=r===145?26:Math.ceil((r-13)/(2*t-2))*2,s=[r-7];for(let a=1;a<t-1;a++)s[a]=s[a-1]-o;return s.push(6),s.reverse()},n.getPositions=function(i){const t=[],r=n.getRowColCoords(i),o=r.length;for(let s=0;s<o;s++)for(let a=0;a<o;a++)s===0&&a===0||s===0&&a===o-1||s===o-1&&a===0||t.push([r[s],r[a]]);return t}})(yo);var ko={};const Os=tt.getSymbolSize,Jl=7;ko.getPositions=function(e){const l=Os(e);return[[0,0],[l-Jl,0],[0,l-Jl]]};var wo={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},n.from=function(t){return n.isValid(t)?parseInt(t,10):void 0},n.getPenaltyN1=function(t){const r=t.size;let o=0,s=0,a=0,f=null,c=null;for(let g=0;g<r;g++){s=a=0,f=c=null;for(let h=0;h<r;h++){let m=t.get(g,h);m===f?s++:(s>=5&&(o+=e.N1+(s-5)),f=m,s=1),m=t.get(h,g),m===c?a++:(a>=5&&(o+=e.N1+(a-5)),c=m,a=1)}s>=5&&(o+=e.N1+(s-5)),a>=5&&(o+=e.N1+(a-5))}return o},n.getPenaltyN2=function(t){const r=t.size;let o=0;for(let s=0;s<r-1;s++)for(let a=0;a<r-1;a++){const f=t.get(s,a)+t.get(s,a+1)+t.get(s+1,a)+t.get(s+1,a+1);(f===4||f===0)&&o++}return o*e.N2},n.getPenaltyN3=function(t){const r=t.size;let o=0,s=0,a=0;for(let f=0;f<r;f++){s=a=0;for(let c=0;c<r;c++)s=s<<1&2047|t.get(f,c),c>=10&&(s===1488||s===93)&&o++,a=a<<1&2047|t.get(c,f),c>=10&&(a===1488||a===93)&&o++}return o*e.N3},n.getPenaltyN4=function(t){let r=0;const o=t.data.length;for(let a=0;a<o;a++)r+=t.data[a];return Math.abs(Math.ceil(r*100/o/5)-10)*e.N4};function l(i,t,r){switch(i){case n.Patterns.PATTERN000:return(t+r)%2===0;case n.Patterns.PATTERN001:return t%2===0;case n.Patterns.PATTERN010:return r%3===0;case n.Patterns.PATTERN011:return(t+r)%3===0;case n.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2===0;case n.Patterns.PATTERN101:return t*r%2+t*r%3===0;case n.Patterns.PATTERN110:return(t*r%2+t*r%3)%2===0;case n.Patterns.PATTERN111:return(t*r%3+(t+r)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}n.applyMask=function(t,r){const o=r.size;for(let s=0;s<o;s++)for(let a=0;a<o;a++)r.isReserved(a,s)||r.xor(a,s,l(t,a,s))},n.getBestMask=function(t,r){const o=Object.keys(n.Patterns).length;let s=0,a=1/0;for(let f=0;f<o;f++){r(f),n.applyMask(f,t);const c=n.getPenaltyN1(t)+n.getPenaltyN2(t)+n.getPenaltyN3(t)+n.getPenaltyN4(t);n.applyMask(f,t),c<a&&(a=c,s=f)}return s}})(wo);var Fn={};const gt=Pn,vn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],yn=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Fn.getBlocksCount=function(e,l){switch(l){case gt.L:return vn[(e-1)*4+0];case gt.M:return vn[(e-1)*4+1];case gt.Q:return vn[(e-1)*4+2];case gt.H:return vn[(e-1)*4+3];default:return}};Fn.getTotalCodewordsCount=function(e,l){switch(l){case gt.L:return yn[(e-1)*4+0];case gt.M:return yn[(e-1)*4+1];case gt.Q:return yn[(e-1)*4+2];case gt.H:return yn[(e-1)*4+3];default:return}};var Co={},On={};const tn=new Uint8Array(512),In=new Uint8Array(256);(function(){let e=1;for(let l=0;l<255;l++)tn[l]=e,In[e]=l,e<<=1,e&256&&(e^=285);for(let l=255;l<512;l++)tn[l]=tn[l-255]})();On.log=function(e){if(e<1)throw new Error("log("+e+")");return In[e]};On.exp=function(e){return tn[e]};On.mul=function(e,l){return e===0||l===0?0:tn[In[e]+In[l]]};(function(n){const e=On;n.mul=function(i,t){const r=new Uint8Array(i.length+t.length-1);for(let o=0;o<i.length;o++)for(let s=0;s<t.length;s++)r[o+s]^=e.mul(i[o],t[s]);return r},n.mod=function(i,t){let r=new Uint8Array(i);for(;r.length-t.length>=0;){const o=r[0];for(let a=0;a<t.length;a++)r[a]^=e.mul(t[a],o);let s=0;for(;s<r.length&&r[s]===0;)s++;r=r.slice(s)}return r},n.generateECPolynomial=function(i){let t=new Uint8Array([1]);for(let r=0;r<i;r++)t=n.mul(t,new Uint8Array([1,e.exp(r)]));return t}})(Co);const No=Co;function Ei(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Ei.prototype.initialize=function(e){this.degree=e,this.genPoly=No.generateECPolynomial(this.degree)};Ei.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(e.length+this.degree);l.set(e);const i=No.mod(l,this.genPoly),t=this.degree-i.length;if(t>0){const r=new Uint8Array(this.degree);return r.set(i,t),r}return i};var $s=Ei,So={},bt={},Li={};Li.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ut={};const Eo="[0-9]+",js="[A-Z $%*+\\-./:]+";let ln="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ln=ln.replace(/u/g,"\\u");const Us="(?:(?![A-Z0-9 $%*+\\-./:]|"+ln+`)(?:.|[\r
]))+`;ut.KANJI=new RegExp(ln,"g");ut.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ut.BYTE=new RegExp(Us,"g");ut.NUMERIC=new RegExp(Eo,"g");ut.ALPHANUMERIC=new RegExp(js,"g");const zs=new RegExp("^"+ln+"$"),Hs=new RegExp("^"+Eo+"$"),qs=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ut.testKanji=function(e){return zs.test(e)};ut.testNumeric=function(e){return Hs.test(e)};ut.testAlphanumeric=function(e){return qs.test(e)};(function(n){const e=Li,l=ut;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(r,o){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?r.ccBits[0]:o<27?r.ccBits[1]:r.ccBits[2]},n.getBestModeForData=function(r){return l.testNumeric(r)?n.NUMERIC:l.testAlphanumeric(r)?n.ALPHANUMERIC:l.testKanji(r)?n.KANJI:n.BYTE},n.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},n.isValid=function(r){return r&&r.bit&&r.ccBits};function i(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+t)}}n.from=function(r,o){if(n.isValid(r))return r;try{return i(r)}catch{return o}}})(bt);(function(n){const e=tt,l=Fn,i=Pn,t=bt,r=Li,o=7973,s=e.getBCHDigit(o);function a(h,m,_){for(let I=1;I<=40;I++)if(m<=n.getCapacity(I,_,h))return I}function f(h,m){return t.getCharCountIndicator(h,m)+4}function c(h,m){let _=0;return h.forEach(function(I){const C=f(I.mode,m);_+=C+I.getBitsLength()}),_}function g(h,m){for(let _=1;_<=40;_++)if(c(h,_)<=n.getCapacity(_,m,t.MIXED))return _}n.from=function(m,_){return r.isValid(m)?parseInt(m,10):_},n.getCapacity=function(m,_,I){if(!r.isValid(m))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=t.BYTE);const C=e.getSymbolTotalCodewords(m),L=l.getTotalCodewordsCount(m,_),P=(C-L)*8;if(I===t.MIXED)return P;const k=P-f(I,m);switch(I){case t.NUMERIC:return Math.floor(k/10*3);case t.ALPHANUMERIC:return Math.floor(k/11*2);case t.KANJI:return Math.floor(k/13);case t.BYTE:default:return Math.floor(k/8)}},n.getBestVersionForData=function(m,_){let I;const C=i.from(_,i.M);if(Array.isArray(m)){if(m.length>1)return g(m,C);if(m.length===0)return 1;I=m[0]}else I=m;return a(I.mode,I.getLength(),C)},n.getEncodedBits=function(m){if(!r.isValid(m)||m<7)throw new Error("Invalid QR Code version");let _=m<<12;for(;e.getBCHDigit(_)-s>=0;)_^=o<<e.getBCHDigit(_)-s;return m<<12|_}})(So);var Lo={};const vi=tt,Ro=1335,Ws=21522,Yl=vi.getBCHDigit(Ro);Lo.getEncodedBits=function(e,l){const i=e.bit<<3|l;let t=i<<10;for(;vi.getBCHDigit(t)-Yl>=0;)t^=Ro<<vi.getBCHDigit(t)-Yl;return(i<<10|t)^Ws};var Do={};const Qs=bt;function Ht(n){this.mode=Qs.NUMERIC,this.data=n.toString()}Ht.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ht.prototype.getLength=function(){return this.data.length};Ht.prototype.getBitsLength=function(){return Ht.getBitsLength(this.data.length)};Ht.prototype.write=function(e){let l,i,t;for(l=0;l+3<=this.data.length;l+=3)i=this.data.substr(l,3),t=parseInt(i,10),e.put(t,10);const r=this.data.length-l;r>0&&(i=this.data.substr(l),t=parseInt(i,10),e.put(t,r*3+1))};var Ks=Ht;const Vs=bt,di=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function qt(n){this.mode=Vs.ALPHANUMERIC,this.data=n}qt.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};qt.prototype.getLength=function(){return this.data.length};qt.prototype.getBitsLength=function(){return qt.getBitsLength(this.data.length)};qt.prototype.write=function(e){let l;for(l=0;l+2<=this.data.length;l+=2){let i=di.indexOf(this.data[l])*45;i+=di.indexOf(this.data[l+1]),e.put(i,11)}this.data.length%2&&e.put(di.indexOf(this.data[l]),6)};var Js=qt,Ys=function(e){for(var l=[],i=e.length,t=0;t<i;t++){var r=e.charCodeAt(t);if(r>=55296&&r<=56319&&i>t+1){var o=e.charCodeAt(t+1);o>=56320&&o<=57343&&(r=(r-55296)*1024+o-56320+65536,t+=1)}if(r<128){l.push(r);continue}if(r<2048){l.push(r>>6|192),l.push(r&63|128);continue}if(r<55296||r>=57344&&r<65536){l.push(r>>12|224),l.push(r>>6&63|128),l.push(r&63|128);continue}if(r>=65536&&r<=1114111){l.push(r>>18|240),l.push(r>>12&63|128),l.push(r>>6&63|128),l.push(r&63|128);continue}l.push(239,191,189)}return new Uint8Array(l).buffer};const Gs=Ys,Zs=bt;function Wt(n){this.mode=Zs.BYTE,typeof n=="string"&&(n=Gs(n)),this.data=new Uint8Array(n)}Wt.getBitsLength=function(e){return e*8};Wt.prototype.getLength=function(){return this.data.length};Wt.prototype.getBitsLength=function(){return Wt.getBitsLength(this.data.length)};Wt.prototype.write=function(n){for(let e=0,l=this.data.length;e<l;e++)n.put(this.data[e],8)};var Xs=Wt;const xs=bt,ea=tt;function Qt(n){this.mode=xs.KANJI,this.data=n}Qt.getBitsLength=function(e){return e*13};Qt.prototype.getLength=function(){return this.data.length};Qt.prototype.getBitsLength=function(){return Qt.getBitsLength(this.data.length)};Qt.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let l=ea.toSJIS(this.data[e]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),n.put(l,13)}};var ta=Qt,Io={exports:{}};(function(n){var e={single_source_shortest_paths:function(l,i,t){var r={},o={};o[i]=0;var s=e.PriorityQueue.make();s.push(i,0);for(var a,f,c,g,h,m,_,I,C;!s.empty();){a=s.pop(),f=a.value,g=a.cost,h=l[f]||{};for(c in h)h.hasOwnProperty(c)&&(m=h[c],_=g+m,I=o[c],C=typeof o[c]>"u",(C||I>_)&&(o[c]=_,s.push(c,_),r[c]=f))}if(typeof t<"u"&&typeof o[t]>"u"){var L=["Could not find a path from ",i," to ",t,"."].join("");throw new Error(L)}return r},extract_shortest_path_from_predecessor_list:function(l,i){for(var t=[],r=i;r;)t.push(r),l[r],r=l[r];return t.reverse(),t},find_path:function(l,i,t){var r=e.single_source_shortest_paths(l,i,t);return e.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(l){var i=e.PriorityQueue,t={},r;l=l||{};for(r in i)i.hasOwnProperty(r)&&(t[r]=i[r]);return t.queue=[],t.sorter=l.sorter||i.default_sorter,t},default_sorter:function(l,i){return l.cost-i.cost},push:function(l,i){var t={value:l,cost:i};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(Io);var na=Io.exports;(function(n){const e=bt,l=Ks,i=Js,t=Xs,r=ta,o=ut,s=tt,a=na;function f(L){return unescape(encodeURIComponent(L)).length}function c(L,P,k){const w=[];let R;for(;(R=L.exec(k))!==null;)w.push({data:R[0],index:R.index,mode:P,length:R[0].length});return w}function g(L){const P=c(o.NUMERIC,e.NUMERIC,L),k=c(o.ALPHANUMERIC,e.ALPHANUMERIC,L);let w,R;return s.isKanjiModeEnabled()?(w=c(o.BYTE,e.BYTE,L),R=c(o.KANJI,e.KANJI,L)):(w=c(o.BYTE_KANJI,e.BYTE,L),R=[]),P.concat(k,w,R).sort(function($,b){return $.index-b.index}).map(function($){return{data:$.data,mode:$.mode,length:$.length}})}function h(L,P){switch(P){case e.NUMERIC:return l.getBitsLength(L);case e.ALPHANUMERIC:return i.getBitsLength(L);case e.KANJI:return r.getBitsLength(L);case e.BYTE:return t.getBitsLength(L)}}function m(L){return L.reduce(function(P,k){const w=P.length-1>=0?P[P.length-1]:null;return w&&w.mode===k.mode?(P[P.length-1].data+=k.data,P):(P.push(k),P)},[])}function _(L){const P=[];for(let k=0;k<L.length;k++){const w=L[k];switch(w.mode){case e.NUMERIC:P.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:P.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:P.push([w,{data:w.data,mode:e.BYTE,length:f(w.data)}]);break;case e.BYTE:P.push([{data:w.data,mode:e.BYTE,length:f(w.data)}])}}return P}function I(L,P){const k={},w={start:{}};let R=["start"];for(let E=0;E<L.length;E++){const $=L[E],b=[];for(let p=0;p<$.length;p++){const A=$[p],U=""+E+p;b.push(U),k[U]={node:A,lastCount:0},w[U]={};for(let H=0;H<R.length;H++){const O=R[H];k[O]&&k[O].node.mode===A.mode?(w[O][U]=h(k[O].lastCount+A.length,A.mode)-h(k[O].lastCount,A.mode),k[O].lastCount+=A.length):(k[O]&&(k[O].lastCount=A.length),w[O][U]=h(A.length,A.mode)+4+e.getCharCountIndicator(A.mode,P))}}R=b}for(let E=0;E<R.length;E++)w[R[E]].end=0;return{map:w,table:k}}function C(L,P){let k;const w=e.getBestModeForData(L);if(k=e.from(P,w),k!==e.BYTE&&k.bit<w.bit)throw new Error('"'+L+'" cannot be encoded with mode '+e.toString(k)+`.
 Suggested mode is: `+e.toString(w));switch(k===e.KANJI&&!s.isKanjiModeEnabled()&&(k=e.BYTE),k){case e.NUMERIC:return new l(L);case e.ALPHANUMERIC:return new i(L);case e.KANJI:return new r(L);case e.BYTE:return new t(L)}}n.fromArray=function(P){return P.reduce(function(k,w){return typeof w=="string"?k.push(C(w,null)):w.data&&k.push(C(w.data,w.mode)),k},[])},n.fromString=function(P,k){const w=g(P,s.isKanjiModeEnabled()),R=_(w),E=I(R,k),$=a.find_path(E.map,"start","end"),b=[];for(let p=1;p<$.length-1;p++)b.push(E.table[$[p]].node);return n.fromArray(m(b))},n.rawSplit=function(P){return n.fromArray(g(P,s.isKanjiModeEnabled()))}})(Do);const $n=tt,hi=Pn,ia=Ps,la=Fs,ra=yo,oa=ko,yi=wo,ki=Fn,sa=$s,An=So,aa=Lo,ua=bt,pi=Do;function fa(n,e){const l=n.size,i=oa.getPositions(e);for(let t=0;t<i.length;t++){const r=i[t][0],o=i[t][1];for(let s=-1;s<=7;s++)if(!(r+s<=-1||l<=r+s))for(let a=-1;a<=7;a++)o+a<=-1||l<=o+a||(s>=0&&s<=6&&(a===0||a===6)||a>=0&&a<=6&&(s===0||s===6)||s>=2&&s<=4&&a>=2&&a<=4?n.set(r+s,o+a,!0,!0):n.set(r+s,o+a,!1,!0))}}function ca(n){const e=n.size;for(let l=8;l<e-8;l++){const i=l%2===0;n.set(l,6,i,!0),n.set(6,l,i,!0)}}function da(n,e){const l=ra.getPositions(e);for(let i=0;i<l.length;i++){const t=l[i][0],r=l[i][1];for(let o=-2;o<=2;o++)for(let s=-2;s<=2;s++)o===-2||o===2||s===-2||s===2||o===0&&s===0?n.set(t+o,r+s,!0,!0):n.set(t+o,r+s,!1,!0)}}function ha(n,e){const l=n.size,i=An.getEncodedBits(e);let t,r,o;for(let s=0;s<18;s++)t=Math.floor(s/3),r=s%3+l-8-3,o=(i>>s&1)===1,n.set(t,r,o,!0),n.set(r,t,o,!0)}function mi(n,e,l){const i=n.size,t=aa.getEncodedBits(e,l);let r,o;for(r=0;r<15;r++)o=(t>>r&1)===1,r<6?n.set(r,8,o,!0):r<8?n.set(r+1,8,o,!0):n.set(i-15+r,8,o,!0),r<8?n.set(8,i-r-1,o,!0):r<9?n.set(8,15-r-1+1,o,!0):n.set(8,15-r-1,o,!0);n.set(i-8,8,1,!0)}function pa(n,e){const l=n.size;let i=-1,t=l-1,r=7,o=0;for(let s=l-1;s>0;s-=2)for(s===6&&s--;;){for(let a=0;a<2;a++)if(!n.isReserved(t,s-a)){let f=!1;o<e.length&&(f=(e[o]>>>r&1)===1),n.set(t,s-a,f),r--,r===-1&&(o++,r=7)}if(t+=i,t<0||l<=t){t-=i,i=-i;break}}}function ma(n,e,l){const i=new ia;l.forEach(function(a){i.put(a.mode.bit,4),i.put(a.getLength(),ua.getCharCountIndicator(a.mode,n)),a.write(i)});const t=$n.getSymbolTotalCodewords(n),r=ki.getTotalCodewordsCount(n,e),o=(t-r)*8;for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const s=(o-i.getLengthInBits())/8;for(let a=0;a<s;a++)i.put(a%2?17:236,8);return ga(i,n,e)}function ga(n,e,l){const i=$n.getSymbolTotalCodewords(e),t=ki.getTotalCodewordsCount(e,l),r=i-t,o=ki.getBlocksCount(e,l),s=i%o,a=o-s,f=Math.floor(i/o),c=Math.floor(r/o),g=c+1,h=f-c,m=new sa(h);let _=0;const I=new Array(o),C=new Array(o);let L=0;const P=new Uint8Array(n.buffer);for(let $=0;$<o;$++){const b=$<a?c:g;I[$]=P.slice(_,_+b),C[$]=m.encode(I[$]),_+=b,L=Math.max(L,b)}const k=new Uint8Array(i);let w=0,R,E;for(R=0;R<L;R++)for(E=0;E<o;E++)R<I[E].length&&(k[w++]=I[E][R]);for(R=0;R<h;R++)for(E=0;E<o;E++)k[w++]=C[E][R];return k}function ba(n,e,l,i){let t;if(Array.isArray(n))t=pi.fromArray(n);else if(typeof n=="string"){let f=e;if(!f){const c=pi.rawSplit(n);f=An.getBestVersionForData(c,l)}t=pi.fromString(n,f||40)}else throw new Error("Invalid data");const r=An.getBestVersionForData(t,l);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=r;else if(e<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const o=ma(e,l,t),s=$n.getSymbolSize(e),a=new la(s);return fa(a,e),ca(a),da(a,e),mi(a,l,0),e>=7&&ha(a,e),pa(a,o),isNaN(i)&&(i=yi.getBestMask(a,mi.bind(null,a,l))),yi.applyMask(i,a),mi(a,l,i),{modules:a,version:e,errorCorrectionLevel:l,maskPattern:i,segments:t}}_o.create=function(e,l){if(typeof e>"u"||e==="")throw new Error("No input text");let i=hi.M,t,r;return typeof l<"u"&&(i=hi.from(l.errorCorrectionLevel,hi.M),t=An.from(l.version),r=yi.from(l.maskPattern),l.toSJISFunc&&$n.setToSJISFunction(l.toSJISFunc)),ba(e,t,i,r)};var Ao={},Ri={};(function(n){function e(l){if(typeof l=="number"&&(l=l.toString()),typeof l!="string")throw new Error("Color should be defined as hex string");let i=l.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+l);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(r){return[r,r]}))),i.length===6&&i.push("F","F");const t=parseInt(i.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+i.slice(0,6).join("")}}n.getOptions=function(i){i||(i={}),i.color||(i.color={});const t=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,r=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:r,scale:r?4:o,margin:t,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},n.getScale=function(i,t){return t.width&&t.width>=i+t.margin*2?t.width/(i+t.margin*2):t.scale},n.getImageWidth=function(i,t){const r=n.getScale(i,t);return Math.floor((i+t.margin*2)*r)},n.qrToImageData=function(i,t,r){const o=t.modules.size,s=t.modules.data,a=n.getScale(o,r),f=Math.floor((o+r.margin*2)*a),c=r.margin*a,g=[r.color.light,r.color.dark];for(let h=0;h<f;h++)for(let m=0;m<f;m++){let _=(h*f+m)*4,I=r.color.light;if(h>=c&&m>=c&&h<f-c&&m<f-c){const C=Math.floor((h-c)/a),L=Math.floor((m-c)/a);I=g[s[C*o+L]?1:0]}i[_++]=I.r,i[_++]=I.g,i[_++]=I.b,i[_]=I.a}}})(Ri);(function(n){const e=Ri;function l(t,r,o){t.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=o,r.width=o,r.style.height=o+"px",r.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(r,o,s){let a=s,f=o;typeof a>"u"&&(!o||!o.getContext)&&(a=o,o=void 0),o||(f=i()),a=e.getOptions(a);const c=e.getImageWidth(r.modules.size,a),g=f.getContext("2d"),h=g.createImageData(c,c);return e.qrToImageData(h.data,r,a),l(g,f,c),g.putImageData(h,0,0),f},n.renderToDataURL=function(r,o,s){let a=s;typeof a>"u"&&(!o||!o.getContext)&&(a=o,o=void 0),a||(a={});const f=n.render(r,o,a),c=a.type||"image/png",g=a.rendererOpts||{};return f.toDataURL(c,g.quality)}})(Ao);var Mo={};const _a=Ri;function Gl(n,e){const l=n.a/255,i=e+'="'+n.hex+'"';return l<1?i+" "+e+'-opacity="'+l.toFixed(2).slice(1)+'"':i}function gi(n,e,l){let i=n+e;return typeof l<"u"&&(i+=" "+l),i}function va(n,e,l){let i="",t=0,r=!1,o=0;for(let s=0;s<n.length;s++){const a=Math.floor(s%e),f=Math.floor(s/e);!a&&!r&&(r=!0),n[s]?(o++,s>0&&a>0&&n[s-1]||(i+=r?gi("M",a+l,.5+f+l):gi("m",t,0),t=0,r=!1),a+1<e&&n[s+1]||(i+=gi("h",o),o=0)):t++}return i}Mo.render=function(e,l,i){const t=_a.getOptions(l),r=e.modules.size,o=e.modules.data,s=r+t.margin*2,a=t.color.light.a?"<path "+Gl(t.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",f="<path "+Gl(t.color.dark,"stroke")+' d="'+va(o,r,t.margin)+'"/>',c='viewBox="0 0 '+s+" "+s+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(t.width?'width="'+t.width+'" height="'+t.width+'" ':"")+c+' shape-rendering="crispEdges">'+a+f+`</svg>
`;return typeof i=="function"&&i(null,h),h};const ya=Bs,wi=_o,Bo=Ao,ka=Mo;function Di(n,e,l,i,t){const r=[].slice.call(arguments,1),o=r.length,s=typeof r[o-1]=="function";if(!s&&!ya())throw new Error("Callback required as last argument");if(s){if(o<2)throw new Error("Too few arguments provided");o===2?(t=l,l=e,e=i=void 0):o===3&&(e.getContext&&typeof t>"u"?(t=i,i=void 0):(t=i,i=l,l=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(l=e,e=i=void 0):o===2&&!e.getContext&&(i=l,l=e,e=void 0),new Promise(function(a,f){try{const c=wi.create(l,i);a(n(c,e,i))}catch(c){f(c)}})}try{const a=wi.create(l,i);t(null,n(a,e,i))}catch(a){t(a)}}on.create=wi.create;on.toCanvas=Di.bind(null,Bo.render);on.toDataURL=Di.bind(null,Bo.renderToDataURL);on.toString=Di.bind(null,function(n,e,l){return ka.render(n,l)});function Zl(n,e,l){const i=n.slice();return i[9]=e[l],i}function Xl(n,e,l){const i=n.slice();return i[12]=e[l],i}function xl(n){let e,l,i;function t(s,a){return s[0].storageBox?Ca:wa}let r=t(n),o=r(n);return l=new Tn({props:{char:"—"}}),{c(){o.c(),e=N(),Ce(l.$$.fragment)},m(s,a){o.m(s,a),y(s,e,a),ke(l,s,a),i=!0},p(s,a){r===(r=t(s))&&o?o.p(s,a):(o.d(1),o=r(s),o&&(o.c(),o.m(e.parentNode,e)))},i(s){i||(G(l.$$.fragment,s),i=!0)},o(s){le(l.$$.fragment,s),i=!1},d(s){s&&v(e),o.d(s),we(l,s)}}}function wa(n){let e;return{c(){e=d("div"),e.textContent="No storage recorded -- cut this off label",B(e,"padding","4px")},m(l,i){y(l,e,i)},p:pe,d(l){l&&v(e)}}}function Ca(n){let e,l,i=n[0].storageBox+"",t,r;return{c(){e=d("div"),l=F("Box: "),t=F(i),r=F(" -- cut this off label"),B(e,"padding","4px")},m(o,s){y(o,e,s),u(e,l),u(e,t),u(e,r)},p(o,s){s&1&&i!==(i=o[0].storageBox+"")&&q(t,i)},d(o){o&&v(e)}}}function er(n){let e,l,i,t,r,o,s,a,f,c,g=(n[0].habitat||"")+"",h,m,_,I,C,L,P,k,w,R,E,$=(n[0].occurrenceRemarks||"")+"",b,p,A,U,H,O=n[2].showInstitution&&tr(n),T=n[2].includePunch&&nr(),K=(n[0].catalogNumber||n[0].recordNumber||n[0].fieldNumber)&&ir(n),D=n[0].fullLocality&&sr(n),M=n[0].labelElevation&&ar(n),ee=n[0].fullCoordsString&&ur(n),V=n[0].collectionDate&&fr(n),re=n[0].recordedBy&&n[0].recordedBy.length&&cr(n),fe=n[0].permitNumber&&hr(n),z=n[0].samplingProtocol&&!n[0].eventRemarks&&pr(n);function te(j,se){return j[0].samplingProtocol&&j[0].eventRemarks?Sa:Na}let de=te(n),ae=de(n);function ve(j,se){if(j[0].specimenCount)return La;if(j[0].specimenStageSex)return Ea}let he=ve(n),ce=he&&he(n),J=n[0].typeStatus&&gr(n),ie=n[2].addPrintedDate&&_r(n),oe=n[0].project&&n[2].includeProject&&vr(n),ue=n[0].catalogNumber&&n[2].includeQRCode&&!(n[2].detLabelOnly||n[2].qrCodeOnDetLabels)&&yr(n);return{c(){O&&O.c(),e=N(),l=d("div"),T&&T.c(),i=N(),t=d("div"),K&&K.c(),r=N(),o=d("div"),D&&D.c(),s=N(),M&&M.c(),a=N(),ee&&ee.c(),f=N(),c=d("div"),h=F(g),m=N(),_=d("div"),V&&V.c(),I=N(),re&&re.c(),C=N(),fe&&fe.c(),L=N(),z&&z.c(),P=N(),k=d("div"),ae.c(),w=N(),ce&&ce.c(),R=N(),E=d("div"),b=F($),p=N(),J&&J.c(),A=N(),ie&&ie.c(),U=N(),oe&&oe.c(),H=N(),ue&&ue.c(),S(o,"class","labelrow clearfloat svelte-1k8c5er"),S(c,"class","labelrow svelte-1k8c5er"),S(_,"class","labelrow svelte-1k8c5er"),S(k,"class","labelrow svelte-1k8c5er"),S(t,"class","labeltext svelte-1k8c5er"),S(l,"class","label-part svelte-1k8c5er")},m(j,se){O&&O.m(j,se),y(j,e,se),y(j,l,se),T&&T.m(l,null),u(l,i),u(l,t),K&&K.m(t,null),u(t,r),u(t,o),D&&D.m(o,null),u(o,s),M&&M.m(o,null),u(o,a),ee&&ee.m(o,null),u(t,f),u(t,c),u(c,h),u(t,m),u(t,_),V&&V.m(_,null),u(_,I),re&&re.m(_,null),u(_,C),fe&&fe.m(_,null),u(_,L),z&&z.m(_,null),u(t,P),u(t,k),ae.m(k,null),u(t,w),ce&&ce.m(t,null),u(t,R),u(t,E),u(E,b),u(t,p),J&&J.m(t,null),u(t,A),ie&&ie.m(t,null),u(t,U),oe&&oe.m(t,null),u(l,H),ue&&ue.m(l,null)},p(j,se){j[2].showInstitution?O?O.p(j,se):(O=tr(j),O.c(),O.m(e.parentNode,e)):O&&(O.d(1),O=null),j[2].includePunch?T||(T=nr(),T.c(),T.m(l,i)):T&&(T.d(1),T=null),j[0].catalogNumber||j[0].recordNumber||j[0].fieldNumber?K?K.p(j,se):(K=ir(j),K.c(),K.m(t,r)):K&&(K.d(1),K=null),j[0].fullLocality?D?D.p(j,se):(D=sr(j),D.c(),D.m(o,s)):D&&(D.d(1),D=null),j[0].labelElevation?M?M.p(j,se):(M=ar(j),M.c(),M.m(o,a)):M&&(M.d(1),M=null),j[0].fullCoordsString?ee?ee.p(j,se):(ee=ur(j),ee.c(),ee.m(o,null)):ee&&(ee.d(1),ee=null),se&1&&g!==(g=(j[0].habitat||"")+"")&&q(h,g),j[0].collectionDate?V?V.p(j,se):(V=fr(j),V.c(),V.m(_,I)):V&&(V.d(1),V=null),j[0].recordedBy&&j[0].recordedBy.length?re?re.p(j,se):(re=cr(j),re.c(),re.m(_,C)):re&&(re.d(1),re=null),j[0].permitNumber?fe?fe.p(j,se):(fe=hr(j),fe.c(),fe.m(_,L)):fe&&(fe.d(1),fe=null),j[0].samplingProtocol&&!j[0].eventRemarks?z?z.p(j,se):(z=pr(j),z.c(),z.m(_,null)):z&&(z.d(1),z=null),de===(de=te(j))&&ae?ae.p(j,se):(ae.d(1),ae=de(j),ae&&(ae.c(),ae.m(k,null))),he===(he=ve(j))&&ce?ce.p(j,se):(ce&&ce.d(1),ce=he&&he(j),ce&&(ce.c(),ce.m(t,R))),se&1&&$!==($=(j[0].occurrenceRemarks||"")+"")&&q(b,$),j[0].typeStatus?J?J.p(j,se):(J=gr(j),J.c(),J.m(t,A)):J&&(J.d(1),J=null),j[2].addPrintedDate?ie?ie.p(j,se):(ie=_r(j),ie.c(),ie.m(t,U)):ie&&(ie.d(1),ie=null),j[0].project&&j[2].includeProject?oe?oe.p(j,se):(oe=vr(j),oe.c(),oe.m(t,null)):oe&&(oe.d(1),oe=null),j[0].catalogNumber&&j[2].includeQRCode&&!(j[2].detLabelOnly||j[2].qrCodeOnDetLabels)?ue?ue.p(j,se):(ue=yr(j),ue.c(),ue.m(l,null)):ue&&(ue.d(1),ue=null)},d(j){j&&(v(e),v(l)),O&&O.d(j),T&&T.d(),K&&K.d(),D&&D.d(),M&&M.d(),ee&&ee.d(),V&&V.d(),re&&re.d(),fe&&fe.d(),z&&z.d(),ae.d(),ce&&ce.d(),J&&J.d(),ie&&ie.d(),oe&&oe.d(),ue&&ue.d()}}}function tr(n){let e,l=(n[2].collectionName||"")+"",i;return{c(){e=d("div"),i=F(l),B(e,"width","100%"),B(e,"text-align","center"),B(e,"margin-bottom",".5em"),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&4&&l!==(l=(t[2].collectionName||"")+"")&&q(i,l),r&4&&X(e,"bolder",!t[2].underline),r&4&&X(e,"underline",t[2].underline)},d(t){t&&v(e)}}}function nr(n){let e;return{c(){e=d("div"),e.innerHTML='<svg height="10" width="10"><circle cx="5" cy="5" r="2" fill="black"></circle></svg>',S(e,"class","labelpunch svelte-1k8c5er")},m(l,i){y(l,e,i)},d(l){l&&v(e)}}}function ir(n){let e,l,i=(n[0].recordNumber||n[0].fieldNumber)&&lr(n),t=n[0].catalogNumber&&or(n);return{c(){e=d("div"),i&&i.c(),l=N(),t&&t.c(),B(e,"display","flex"),B(e,"flex-direction","row-reverse"),B(e,"justify-content","space-between"),B(e,"margin-right","1em")},m(r,o){y(r,e,o),i&&i.m(e,null),u(e,l),t&&t.m(e,null)},p(r,o){r[0].recordNumber||r[0].fieldNumber?i?i.p(r,o):(i=lr(r),i.c(),i.m(e,l)):i&&(i.d(1),i=null),r[0].catalogNumber?t?t.p(r,o):(t=or(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(r){r&&v(e),i&&i.d(),t&&t.d()}}}function lr(n){let e,l,i,t=n[0].recordNumber+"",r,o=n[2].includeFieldNumber&&n[0].fieldNumber&&rr(n);return{c(){e=d("div"),o&&o.c(),l=N(),i=d("span"),r=F(t),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[0].catalogNumber&&!n[2].underline),X(e,"underline",!n[0].catalogNumber&&n[2].underline)},m(s,a){y(s,e,a),o&&o.m(e,null),u(e,l),u(e,i),u(i,r)},p(s,a){s[2].includeFieldNumber&&s[0].fieldNumber?o?o.p(s,a):(o=rr(s),o.c(),o.m(e,l)):o&&(o.d(1),o=null),a&1&&t!==(t=s[0].recordNumber+"")&&q(r,t),a&5&&X(e,"bolder",!s[0].catalogNumber&&!s[2].underline),a&5&&X(e,"underline",!s[0].catalogNumber&&s[2].underline)},d(s){s&&v(e),o&&o.d()}}}function rr(n){let e,l=n[0].fieldNumber+"",i,t=n[0].recordNumber?" / ":"",r;return{c(){e=d("span"),i=F(l),r=F(t)},m(o,s){y(o,e,s),u(e,i),u(e,r)},p(o,s){s&1&&l!==(l=o[0].fieldNumber+"")&&q(i,l),s&1&&t!==(t=o[0].recordNumber?" / ":"")&&q(r,t)},d(o){o&&v(e)}}}function or(n){let e,l=n[0].catalogNumber+"",i;return{c(){e=d("div"),i=F(l),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].catalogNumber+"")&&q(i,l),r&4&&X(e,"bolder",!t[2].underline),r&4&&X(e,"underline",t[2].underline)},d(t){t&&v(e)}}}function sr(n){let e=n[0].fullLocality+"",l;return{c(){l=F(e)},m(i,t){y(i,l,t)},p(i,t){t&1&&e!==(e=i[0].fullLocality+"")&&q(l,e)},d(i){i&&v(l)}}}function ar(n){let e,l=n[0].labelElevation+"",i;return{c(){e=d("span"),i=F(l),S(e,"class","inlineblock svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].labelElevation+"")&&q(i,l)},d(t){t&&v(e)}}}function ur(n){let e,l=n[0].fullCoordsString+"",i;return{c(){e=d("span"),i=F(l),S(e,"class","inlineblock svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].fullCoordsString+"")&&q(i,l)},d(t){t&&v(e)}}}function fr(n){let e,l=n[0].collectionDate+"",i;return{c(){e=d("span"),i=F(l),S(e,"class","padright-sm svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].collectionDate+"")&&q(i,l)},d(t){t&&v(e)}}}function cr(n){let e,l=Le(n[0].recordedBy),i=[];for(let t=0;t<l.length;t+=1)i[t]=dr(Xl(n,l,t));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=lt()},m(t,r){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,r);y(t,e,r)},p(t,r){if(r&1){l=Le(t[0].recordedBy);let o;for(o=0;o<l.length;o+=1){const s=Xl(t,l,o);i[o]?i[o].p(s,r):(i[o]=dr(s),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=l.length}},d(t){t&&v(e),at(i,t)}}}function dr(n){let e,l=n[12]+"",i;return{c(){e=d("span"),i=F(l),S(e,"class","inlineblock padright-sm svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[12]+"")&&q(i,l)},d(t){t&&v(e)}}}function hr(n){let e,l,i=n[0].permitNumber+"",t;return{c(){e=d("span"),l=F("Permit: "),t=F(i),S(e,"class","inlineblock padright-sm svelte-1k8c5er")},m(r,o){y(r,e,o),u(e,l),u(e,t)},p(r,o){o&1&&i!==(i=r[0].permitNumber+"")&&q(t,i)},d(r){r&&v(e)}}}function pr(n){let e,l=n[0].samplingProtocol+"",i;return{c(){e=d("span"),i=F(l),S(e,"class","inlineblock svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].samplingProtocol+"")&&q(i,l)},d(t){t&&v(e)}}}function Na(n){let e=(n[0].eventRemarks||"")+"",l;return{c(){l=F(e)},m(i,t){y(i,l,t)},p(i,t){t&1&&e!==(e=(i[0].eventRemarks||"")+"")&&q(l,e)},d(i){i&&v(l)}}}function Sa(n){let e,l=n[0].samplingProtocol+"",i,t,r=n[0].eventRemarks.toLowerCase()+"",o,s;return{c(){e=d("span"),i=F(l),t=F(" ("),o=F(r),s=F(")"),S(e,"class","inlineblock svelte-1k8c5er")},m(a,f){y(a,e,f),u(e,i),u(e,t),u(e,o),u(e,s)},p(a,f){f&1&&l!==(l=a[0].samplingProtocol+"")&&q(i,l),f&1&&r!==(r=a[0].eventRemarks.toLowerCase()+"")&&q(o,r)},d(a){a&&v(e)}}}function Ea(n){let e,l=n[0].specimenStageSex+"",i;return{c(){e=d("span"),i=F(l),S(e,"class","inlineblock svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].specimenStageSex+"")&&q(i,l)},d(t){t&&v(e)}}}function La(n){let e,l;function i(o,s){return s&1&&(e=null),e==null&&(e=!!(o[0].specimenStageSex&&o[0].specimenStageSex.match(/(\d+)/g).reduce(o[6],0)==Number(o[0].specimenCount))),e?Da:Ra}let t=i(n,-1),r=t(n);return{c(){r.c(),l=lt()},m(o,s){r.m(o,s),y(o,l,s)},p(o,s){t===(t=i(o,s))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(l.parentNode,l)))},d(o){o&&v(l),r.d(o)}}}function Ra(n){let e,l,i,t=n[0].specimenCount+"",r,o,s=n[0].specimenStageSex&&mr(n);return{c(){e=d("div"),l=d("span"),i=F("Specimens: "),r=F(t),o=N(),s&&s.c(),S(l,"class","padright svelte-1k8c5er")},m(a,f){y(a,e,f),u(e,l),u(l,i),u(l,r),u(e,o),s&&s.m(e,null)},p(a,f){f&1&&t!==(t=a[0].specimenCount+"")&&q(r,t),a[0].specimenStageSex?s?s.p(a,f):(s=mr(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&v(e),s&&s.d()}}}function Da(n){let e,l=n[0].specimenStageSex+"",i;return{c(){e=d("span"),i=F(l),S(e,"class","inlineblock svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].specimenStageSex+"")&&q(i,l)},d(t){t&&v(e)}}}function mr(n){let e,l,i=n[0].specimenStageSex+"",t,r;return{c(){e=d("span"),l=F("("),t=F(i),r=F(")"),S(e,"class","inlineblock svelte-1k8c5er")},m(o,s){y(o,e,s),u(e,l),u(e,t),u(e,r)},p(o,s){s&1&&i!==(i=o[0].specimenStageSex+"")&&q(t,i)},d(o){o&&v(e)}}}function gr(n){let e,l,i=n[0].typeStatus+"",t,r,o=n[0].typeNumber&&br(n);return{c(){e=d("div"),l=d("span"),t=F(i),r=N(),o&&o.c(),S(l,"class","floatleft uppercase svelte-1k8c5er"),S(e,"class","clearfix svelte-1k8c5er")},m(s,a){y(s,e,a),u(e,l),u(l,t),u(e,r),o&&o.m(e,null)},p(s,a){a&1&&i!==(i=s[0].typeStatus+"")&&q(t,i),s[0].typeNumber?o?o.p(s,a):(o=br(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(s){s&&v(e),o&&o.d()}}}function br(n){let e,l,i=n[0].typeNumber+"",t;return{c(){e=d("span"),l=F("Type No:"),t=F(i),S(e,"class","floatright svelte-1k8c5er")},m(r,o){y(r,e,o),u(e,l),u(e,t)},p(r,o){o&1&&i!==(i=r[0].typeNumber+"")&&q(t,i)},d(r){r&&v(e)}}}function _r(n){let e,l,i=(n[2].printerModel?n[2].printerModel:"")+"",t,r,o=n[5]()+"",s;return{c(){e=d("div"),l=F("Printed on "),t=F(i),r=N(),s=F(o),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(a,f){y(a,e,f),u(e,l),u(e,t),u(e,r),u(e,s)},p(a,f){f&4&&i!==(i=(a[2].printerModel?a[2].printerModel:"")+"")&&q(t,i),f&4&&X(e,"bolder",!a[2].underline),f&4&&X(e,"underline",a[2].underline)},d(a){a&&v(e)}}}function vr(n){let e,l=n[0].project+"",i;return{c(){e=d("div"),i=F(l),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].project+"")&&q(i,l),r&4&&X(e,"bolder",!t[2].underline),r&4&&X(e,"underline",t[2].underline)},d(t){t&&v(e)}}}function yr(n){let e,l,i,t;return{c(){e=d("div"),l=d("img"),S(l,"width",i=n[2].qrCodeDims),S(l,"height",t=n[2].qrCodeDims),S(l,"alt","QR code"),B(e,"margin",".25em")},m(r,o){y(r,e,o),u(e,l),n[7](l)},p(r,o){o&4&&i!==(i=r[2].qrCodeDims)&&S(l,"width",i),o&4&&t!==(t=r[2].qrCodeDims)&&S(l,"height",t)},d(r){r&&v(e),n[7](null)}}}function kr(n){let e,l,i,t,r,o,s,a;e=new Tn({props:{char:"—"}});let f=(n[0].catalogNumber||n[0].recordNumber||n[0].fieldNumber)&&wr(n),c=Le(n[0].seriesSampleCounts),g=[];for(let h=0;h<c.length;h+=1)g[h]=Ar(Zl(n,c,h));return{c(){Ce(e.$$.fragment),l=N(),i=d("div"),t=d("div"),r=d("div"),r.textContent="Collecting events:",o=N(),f&&f.c(),s=N();for(let h=0;h<g.length;h+=1)g[h].c();S(r,"class","inlineblock svelte-1k8c5er"),X(r,"bolder",!n[2].underline),X(r,"underline",n[2].underline),S(t,"class","labeltext svelte-1k8c5er"),S(i,"class","label-part svelte-1k8c5er")},m(h,m){ke(e,h,m),y(h,l,m),y(h,i,m),u(i,t),u(t,r),u(t,o),f&&f.m(t,null),u(t,s);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(t,null);a=!0},p(h,m){if((!a||m&4)&&X(r,"bolder",!h[2].underline),(!a||m&4)&&X(r,"underline",h[2].underline),h[0].catalogNumber||h[0].recordNumber||h[0].fieldNumber?f?f.p(h,m):(f=wr(h),f.c(),f.m(t,s)):f&&(f.d(1),f=null),m&1){c=Le(h[0].seriesSampleCounts);let _;for(_=0;_<c.length;_+=1){const I=Zl(h,c,_);g[_]?g[_].p(I,m):(g[_]=Ar(I),g[_].c(),g[_].m(t,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=c.length}},i(h){a||(G(e.$$.fragment,h),a=!0)},o(h){le(e.$$.fragment,h),a=!1},d(h){h&&(v(l),v(i)),we(e,h),f&&f.d(),at(g,h)}}}function wr(n){let e,l,i=n[0].recordNumber&&Cr(n),t=n[0].catalogNumber&&Sr(n);return{c(){e=d("div"),i&&i.c(),l=N(),t&&t.c(),B(e,"display","flex"),B(e,"flex-direction","row-reverse"),B(e,"justify-content","space-between"),B(e,"margin-right","1em")},m(r,o){y(r,e,o),i&&i.m(e,null),u(e,l),t&&t.m(e,null)},p(r,o){r[0].recordNumber?i?i.p(r,o):(i=Cr(r),i.c(),i.m(e,l)):i&&(i.d(1),i=null),r[0].catalogNumber?t?t.p(r,o):(t=Sr(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(r){r&&v(e),i&&i.d(),t&&t.d()}}}function Cr(n){let e,l,i,t=n[0].recordNumber+"",r,o=n[2].includeFieldNumber&&n[0].fieldNumber&&Nr(n);return{c(){e=d("div"),o&&o.c(),l=N(),i=d("span"),r=F(t),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[0].catalogNumber&&!n[2].underline),X(e,"underline",!n[0].catalogNumber&&n[2].underline)},m(s,a){y(s,e,a),o&&o.m(e,null),u(e,l),u(e,i),u(i,r)},p(s,a){s[2].includeFieldNumber&&s[0].fieldNumber?o?o.p(s,a):(o=Nr(s),o.c(),o.m(e,l)):o&&(o.d(1),o=null),a&1&&t!==(t=s[0].recordNumber+"")&&q(r,t),a&5&&X(e,"bolder",!s[0].catalogNumber&&!s[2].underline),a&5&&X(e,"underline",!s[0].catalogNumber&&s[2].underline)},d(s){s&&v(e),o&&o.d()}}}function Nr(n){let e,l=n[0].fieldNumber+"",i,t=n[0].recordNumber?" / ":"",r;return{c(){e=d("span"),i=F(l),r=F(t)},m(o,s){y(o,e,s),u(e,i),u(e,r)},p(o,s){s&1&&l!==(l=o[0].fieldNumber+"")&&q(i,l),s&1&&t!==(t=o[0].recordNumber?" / ":"")&&q(r,t)},d(o){o&&v(e)}}}function Sr(n){let e,l=n[0].catalogNumber+"",i;return{c(){e=d("div"),i=F(l),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].catalogNumber+"")&&q(i,l),r&4&&X(e,"bolder",!t[2].underline),r&4&&X(e,"underline",t[2].underline)},d(t){t&&v(e)}}}function Er(n){let e,l,i,t=n[9].collectingDate+"",r,o,s,a,f,c,g,h=n[9].collectors&&Lr(n),m=n[9].collectMethods&&Rr(n),_=n[9].conditions&&Dr(n),I=n[9].lifeStageSexCounts&&Ir(n);return{c(){e=d("br"),l=N(),i=d("div"),r=F(t),o=N(),h&&h.c(),s=N(),m&&m.c(),a=N(),_&&_.c(),f=N(),I&&I.c(),c=N(),g=d("br")},m(C,L){y(C,e,L),y(C,l,L),y(C,i,L),u(i,r),y(C,o,L),h&&h.m(C,L),y(C,s,L),m&&m.m(C,L),y(C,a,L),_&&_.m(C,L),y(C,f,L),I&&I.m(C,L),y(C,c,L),y(C,g,L)},p(C,L){L&1&&t!==(t=C[9].collectingDate+"")&&q(r,t),C[9].collectors?h?h.p(C,L):(h=Lr(C),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null),C[9].collectMethods?m?m.p(C,L):(m=Rr(C),m.c(),m.m(a.parentNode,a)):m&&(m.d(1),m=null),C[9].conditions?_?_.p(C,L):(_=Dr(C),_.c(),_.m(f.parentNode,f)):_&&(_.d(1),_=null),C[9].lifeStageSexCounts?I?I.p(C,L):(I=Ir(C),I.c(),I.m(c.parentNode,c)):I&&(I.d(1),I=null)},d(C){C&&(v(e),v(l),v(i),v(o),v(s),v(a),v(f),v(c),v(g)),h&&h.d(C),m&&m.d(C),_&&_.d(C),I&&I.d(C)}}}function Lr(n){let e,l=n[9].collectors+"",i;return{c(){e=d("div"),i=F(l)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[9].collectors+"")&&q(i,l)},d(t){t&&v(e)}}}function Rr(n){let e,l=n[9].collectMethods+"",i;return{c(){e=d("div"),i=F(l)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[9].collectMethods+"")&&q(i,l)},d(t){t&&v(e)}}}function Dr(n){let e,l=n[9].conditions+"",i;return{c(){e=d("div"),i=F(l)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[9].conditions+"")&&q(i,l)},d(t){t&&v(e)}}}function Ir(n){let e,l=n[9].lifeStageSexCounts+"",i;return{c(){e=d("div"),i=F(l)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[9].lifeStageSexCounts+"")&&q(i,l)},d(t){t&&v(e)}}}function Ar(n){let e,l=n[9].collectingDate&&Er(n);return{c(){l&&l.c(),e=lt()},m(i,t){l&&l.m(i,t),y(i,e,t)},p(i,t){i[9].collectingDate?l?l.p(i,t):(l=Er(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(i){i&&v(e),l&&l.d(i)}}}function Mr(n){let e,l,i,t,r,o,s,a,f,c,g,h,m,_,I=(n[0].identificationRemarks||"")+"",C,L,P,k,w=!n[2].detLabelOnly&&Br(),R=n[2].detLabelOnly&&n[2].showInstitution&&Tr(n),E=n[2].includePunch&&Pr();function $(D,M){if(D[0].typeStatus)return Aa;if(D[0].catalogNumber||D[0].recordNumber)return Ia}let b=$(n),p=b&&b(n);function A(D,M){if(D[0].catalogNumber)return Ba;if(D[0].recordNumber||D[0].fieldNumber)return Ma}let U=A(n),H=U&&U(n),O=(n[0].identifiedBy||n[0].dateIdentified)&&Or(n),T=n[0].typeStatus&&n[0].typeNumber&&$r(n),K=n[0].catalogNumber&&n[2].includeQRCode&&(n[2].detLabelOnly||n[2].qrCodeOnDetLabels)&&jr(n);return{c(){w&&w.c(),e=N(),R&&R.c(),l=N(),i=d("div"),E&&E.c(),t=N(),r=d("div"),o=d("div"),p&&p.c(),s=N(),H&&H.c(),a=N(),f=d("div"),c=d("span"),g=N(),h=d("div"),O&&O.c(),m=N(),_=d("div"),C=F(I),L=N(),T&&T.c(),P=N(),K&&K.c(),B(o,"display","flex"),B(o,"justify-content","space-between"),B(o,"margin-right","1em"),S(c,"class","inlineblock svelte-1k8c5er"),X(c,"bolder",!n[2].underline),X(c,"underline",n[2].underline),S(f,"class","clearfloat svelte-1k8c5er"),S(r,"class","labeltext svelte-1k8c5er"),S(i,"class","label-part det-label svelte-1k8c5er")},m(D,M){w&&w.m(D,M),y(D,e,M),R&&R.m(D,M),y(D,l,M),y(D,i,M),E&&E.m(i,null),u(i,t),u(i,r),u(r,o),p&&p.m(o,null),u(o,s),H&&H.m(o,null),u(r,a),u(r,f),u(f,c),c.innerHTML=n[3],u(r,g),u(r,h),O&&O.m(h,null),u(r,m),u(r,_),u(_,C),u(r,L),T&&T.m(r,null),u(i,P),K&&K.m(i,null),k=!0},p(D,M){D[2].detLabelOnly?w&&(He(),le(w,1,1,()=>{w=null}),qe()):w?M&4&&G(w,1):(w=Br(),w.c(),G(w,1),w.m(e.parentNode,e)),D[2].detLabelOnly&&D[2].showInstitution?R?R.p(D,M):(R=Tr(D),R.c(),R.m(l.parentNode,l)):R&&(R.d(1),R=null),D[2].includePunch?E||(E=Pr(),E.c(),E.m(i,t)):E&&(E.d(1),E=null),b===(b=$(D))&&p?p.p(D,M):(p&&p.d(1),p=b&&b(D),p&&(p.c(),p.m(o,s))),U===(U=A(D))&&H?H.p(D,M):(H&&H.d(1),H=U&&U(D),H&&(H.c(),H.m(o,null))),(!k||M&8)&&(c.innerHTML=D[3]),(!k||M&4)&&X(c,"bolder",!D[2].underline),(!k||M&4)&&X(c,"underline",D[2].underline),D[0].identifiedBy||D[0].dateIdentified?O?O.p(D,M):(O=Or(D),O.c(),O.m(h,null)):O&&(O.d(1),O=null),(!k||M&1)&&I!==(I=(D[0].identificationRemarks||"")+"")&&q(C,I),D[0].typeStatus&&D[0].typeNumber?T?T.p(D,M):(T=$r(D),T.c(),T.m(r,null)):T&&(T.d(1),T=null),D[0].catalogNumber&&D[2].includeQRCode&&(D[2].detLabelOnly||D[2].qrCodeOnDetLabels)?K?K.p(D,M):(K=jr(D),K.c(),K.m(i,null)):K&&(K.d(1),K=null)},i(D){k||(G(w),k=!0)},o(D){le(w),k=!1},d(D){D&&(v(e),v(l),v(i)),w&&w.d(D),R&&R.d(D),E&&E.d(),p&&p.d(),H&&H.d(),O&&O.d(),T&&T.d(),K&&K.d()}}}function Br(n){let e,l;return e=new Tn({props:{char:"—"}}),{c(){Ce(e.$$.fragment)},m(i,t){ke(e,i,t),l=!0},i(i){l||(G(e.$$.fragment,i),l=!0)},o(i){le(e.$$.fragment,i),l=!1},d(i){we(e,i)}}}function Tr(n){let e,l=(n[2].collectionName||"")+"",i;return{c(){e=d("div"),i=F(l),B(e,"width","100%"),B(e,"text-align","center"),B(e,"margin-bottom",".5em"),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&4&&l!==(l=(t[2].collectionName||"")+"")&&q(i,l),r&4&&X(e,"bolder",!t[2].underline),r&4&&X(e,"underline",t[2].underline)},d(t){t&&v(e)}}}function Pr(n){let e;return{c(){e=d("div"),e.innerHTML='<svg height="10" width="10"><circle cx="5" cy="5" r="2" fill="black"></circle></svg>',S(e,"class","labelpunch svelte-1k8c5er")},m(l,i){y(l,e,i)},d(l){l&&v(e)}}}function Ia(n){let e;return{c(){e=d("div")},m(l,i){y(l,e,i)},p:pe,d(l){l&&v(e)}}}function Aa(n){let e,l=n[0].typeStatus+"",i;return{c(){e=d("div"),i=F(l),S(e,"class","uppercase svelte-1k8c5er")},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].typeStatus+"")&&q(i,l)},d(t){t&&v(e)}}}function Ma(n){let e,l,i,t=n[0].recordNumber+"",r,o=n[2].includeFieldNumber&&n[0].fieldNumber&&Fr(n);return{c(){e=d("div"),o&&o.c(),l=N(),i=d("span"),r=F(t),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(s,a){y(s,e,a),o&&o.m(e,null),u(e,l),u(e,i),u(i,r)},p(s,a){s[2].includeFieldNumber&&s[0].fieldNumber?o?o.p(s,a):(o=Fr(s),o.c(),o.m(e,l)):o&&(o.d(1),o=null),a&1&&t!==(t=s[0].recordNumber+"")&&q(r,t),a&4&&X(e,"bolder",!s[2].underline),a&4&&X(e,"underline",s[2].underline)},d(s){s&&v(e),o&&o.d()}}}function Ba(n){let e,l=n[0].catalogNumber+"",i;return{c(){e=d("div"),i=F(l),S(e,"class","svelte-1k8c5er"),X(e,"bolder",!n[2].underline),X(e,"underline",n[2].underline)},m(t,r){y(t,e,r),u(e,i)},p(t,r){r&1&&l!==(l=t[0].catalogNumber+"")&&q(i,l),r&4&&X(e,"bolder",!t[2].underline),r&4&&X(e,"underline",t[2].underline)},d(t){t&&v(e)}}}function Fr(n){let e,l=n[0].fieldNumber+"",i,t=n[0].recordNumber?" / ":"",r;return{c(){e=d("span"),i=F(l),r=F(t)},m(o,s){y(o,e,s),u(e,i),u(e,r)},p(o,s){s&1&&l!==(l=o[0].fieldNumber+"")&&q(i,l),s&1&&t!==(t=o[0].recordNumber?" / ":"")&&q(r,t)},d(o){o&&v(e)}}}function Or(n){let e,l,i,t=(n[0].identifiedBy||"")+"",r,o,s,a=(n[0].dateIdentified||"")+"",f;return{c(){e=d("span"),e.textContent="det:",l=N(),i=d("span"),r=F(t),o=N(),s=d("span"),f=F(a),S(s,"class","inlineblock svelte-1k8c5er")},m(c,g){y(c,e,g),y(c,l,g),y(c,i,g),u(i,r),y(c,o,g),y(c,s,g),u(s,f)},p(c,g){g&1&&t!==(t=(c[0].identifiedBy||"")+"")&&q(r,t),g&1&&a!==(a=(c[0].dateIdentified||"")+"")&&q(f,a)},d(c){c&&(v(e),v(l),v(i),v(o),v(s))}}}function $r(n){let e,l,i,t=n[0].typeNumber+"",r;return{c(){e=d("div"),l=d("span"),i=F("Type No:"),r=F(t),S(l,"class","floatright svelte-1k8c5er"),S(e,"class","clearfix svelte-1k8c5er")},m(o,s){y(o,e,s),u(e,l),u(l,i),u(l,r)},p(o,s){s&1&&t!==(t=o[0].typeNumber+"")&&q(r,t)},d(o){o&&v(e)}}}function jr(n){let e,l,i,t;return{c(){e=d("div"),l=d("img"),S(l,"width",i=n[2].qrCodeDims),S(l,"height",t=n[2].qrCodeDims),S(l,"alt","QR code"),B(e,"margin",".25em")},m(r,o){y(r,e,o),u(e,l),n[8](l)},p(r,o){o&4&&i!==(i=r[2].qrCodeDims)&&S(l,"width",i),o&4&&t!==(t=r[2].qrCodeDims)&&S(l,"height",t)},d(r){r&&v(e),n[8](null)}}}function Ta(n){let e,l,i,t=n[0].seriesSampleCounts&&Array.isArray(n[0].seriesSampleCounts)&&n[0].seriesSampleCounts.length>1,r,o,s,a,f=n[2].showStorage&&xl(n),c=!n[2].detLabelOnly&&er(n),g=t&&kr(n),h=(n[2].detLabel||n[2].detLabelOnly)&&n[3]&&Mr(n);return s=new Tn({props:{char:"-"}}),{c(){e=d("div"),f&&f.c(),l=N(),c&&c.c(),i=N(),g&&g.c(),r=N(),h&&h.c(),o=N(),Ce(s.$$.fragment),S(e,"class","label svelte-1k8c5er"),B(e,"--font",n[2].font),B(e,"--font-weight",n[2].fontWeight),B(e,"--font-size",n[2].fontSize+"pt"),B(e,"--line-height",n[2].lineHeight+"%"),B(e,"--label-width",n[2].labelWidth+"cm")},m(m,_){y(m,e,_),f&&f.m(e,null),u(e,l),c&&c.m(e,null),u(e,i),g&&g.m(e,null),u(e,r),h&&h.m(e,null),u(e,o),ke(s,e,null),a=!0},p(m,[_]){m[2].showStorage?f?(f.p(m,_),_&4&&G(f,1)):(f=xl(m),f.c(),G(f,1),f.m(e,l)):f&&(He(),le(f,1,1,()=>{f=null}),qe()),m[2].detLabelOnly?c&&(c.d(1),c=null):c?c.p(m,_):(c=er(m),c.c(),c.m(e,i)),_&1&&(t=m[0].seriesSampleCounts&&Array.isArray(m[0].seriesSampleCounts)&&m[0].seriesSampleCounts.length>1),t?g?(g.p(m,_),_&1&&G(g,1)):(g=kr(m),g.c(),G(g,1),g.m(e,r)):g&&(He(),le(g,1,1,()=>{g=null}),qe()),(m[2].detLabel||m[2].detLabelOnly)&&m[3]?h?(h.p(m,_),_&12&&G(h,1)):(h=Mr(m),h.c(),G(h,1),h.m(e,o)):h&&(He(),le(h,1,1,()=>{h=null}),qe()),(!a||_&4)&&B(e,"--font",m[2].font),(!a||_&4)&&B(e,"--font-weight",m[2].fontWeight),(!a||_&4)&&B(e,"--font-size",m[2].fontSize+"pt"),(!a||_&4)&&B(e,"--line-height",m[2].lineHeight+"%"),(!a||_&4)&&B(e,"--label-width",m[2].labelWidth+"cm")},i(m){a||(G(f),G(g),G(h),G(s.$$.fragment,m),a=!0)},o(m){le(f),le(g),le(h),le(s.$$.fragment,m),a=!1},d(m){m&&v(e),f&&f.d(),c&&c.d(),g&&g.d(),h&&h.d(),we(s)}}}function Pa(n,e,l){let i,{labelRecord:t}=e;const r=$e("settings");Oe(n,r,h=>l(2,i=h));let o=null,s;const a=h=>{const m=new Date,_=m.toLocaleString("default",{month:"short"}),I=m.getFullYear();return`${_}, ${I}`},f=(h,m)=>h+Number(m);function c(h){zt[h?"unshift":"push"](()=>{s=h,l(1,s),l(2,i),l(0,t)})}function g(h){zt[h?"unshift":"push"](()=>{s=h,l(1,s),l(2,i),l(0,t)})}return n.$$set=h=>{"labelRecord"in h&&l(0,t=h.labelRecord)},n.$$.update=()=>{n.$$.dirty&5&&(t||i.includeTaxonAuthorities||i.italics)&&l(3,o=go(t,i.includeTaxonAuthorities,!1,i.italics)),n.$$.dirty&7&&i.includeQRCode&&i.qrCodeErrorLevel&&s&&t&&t.catalogNumber&&on.toDataURL(t.catalogNumber,{margin:0,errorCorrectionLevel:i.qrCodeErrorLevel},function(h,m){h&&console.error(h),m&&l(1,s.src=m,s)})},[t,s,i,o,r,a,f,c,g]}class Ii extends Pe{constructor(e){super(),Te(this,e,Pa,Ta,Ae,{labelRecord:0})}}function Ur(n,e,l){const i=n.slice();return i[4]=e[l],i}function Fa(n){let e,l,i;return{c(){e=d("div"),e.textContent="insufficent data to make label...",l=N(),i=d("br")},m(t,r){y(t,e,r),y(t,l,r),y(t,i,r)},p:pe,i:pe,o:pe,d(t){t&&(v(e),v(l),v(i))}}}function Oa(n){let e,l,i,t;const r=[ja,$a],o=[];function s(a,f){return a[1].labelPerSpecimen&&a[0].specimenCount?0:1}return e=s(n),l=o[e]=r[e](n),{c(){l.c(),i=lt()},m(a,f){o[e].m(a,f),y(a,i,f),t=!0},p(a,f){let c=e;e=s(a),e===c?o[e].p(a,f):(He(),le(o[c],1,1,()=>{o[c]=null}),qe(),l=o[e],l?l.p(a,f):(l=o[e]=r[e](a),l.c()),G(l,1),l.m(i.parentNode,i))},i(a){t||(G(l),t=!0)},o(a){le(l),t=!1},d(a){a&&v(i),o[e].d(a)}}}function $a(n){let e,l;return e=new Ii({props:{labelRecord:n[0]}}),{c(){Ce(e.$$.fragment)},m(i,t){ke(e,i,t),l=!0},p(i,t){const r={};t&1&&(r.labelRecord=i[0]),e.$set(r)},i(i){l||(G(e.$$.fragment,i),l=!0)},o(i){le(e.$$.fragment,i),l=!1},d(i){we(e,i)}}}function ja(n){let e,l,i=Le(Array(n[0].specimenCount)),t=[];for(let o=0;o<i.length;o+=1)t[o]=zr(Ur(n,i,o));const r=o=>le(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=lt()},m(o,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(o,s);y(o,e,s),l=!0},p(o,s){if(s&1){i=Le(Array(o[0].specimenCount));let a;for(a=0;a<i.length;a+=1){const f=Ur(o,i,a);t[a]?(t[a].p(f,s),G(t[a],1)):(t[a]=zr(f),t[a].c(),G(t[a],1),t[a].m(e.parentNode,e))}for(He(),a=i.length;a<t.length;a+=1)r(a);qe()}},i(o){if(!l){for(let s=0;s<i.length;s+=1)G(t[s]);l=!0}},o(o){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)le(t[s]);l=!1},d(o){o&&v(e),at(t,o)}}}function zr(n){let e,l;return e=new Ii({props:{labelRecord:n[0]}}),{c(){Ce(e.$$.fragment)},m(i,t){ke(e,i,t),l=!0},p(i,t){const r={};t&1&&(r.labelRecord=i[0]),e.$set(r)},i(i){l||(G(e.$$.fragment,i),l=!0)},o(i){le(e.$$.fragment,i),l=!1},d(i){we(e,i)}}}function Ua(n){let e,l,i,t;const r=[Oa,Fa],o=[];function s(a,f){return a[2]?0:1}return e=s(n),l=o[e]=r[e](n),{c(){l.c(),i=lt()},m(a,f){o[e].m(a,f),y(a,i,f),t=!0},p(a,[f]){l.p(a,f)},i(a){t||(G(l),t=!0)},o(a){le(l),t=!1},d(a){a&&v(i),o[e].d(a)}}}function za(n,e,l){let i,{labelRecord:t}=e;const r=s=>t&&(t.fullLocality||t.fullCoordsString||t.collectionDate||t.recordedBy||t.occurrenceRemarks||t.verbatimIdentification||t.scientificName||go(t)),o=$e("settings");return Oe(n,o,s=>l(1,i=s)),n.$$set=s=>{"labelRecord"in s&&l(0,t=s.labelRecord)},[t,i,r,o]}class Ha extends Pe{constructor(e){super(),Te(this,e,za,Ua,Ae,{labelRecord:0})}}function Hr(n,e,l){const i=n.slice();return i[3]=e[l],i}function qa(n){let e;return{c(){e=F("No data to show, refresh to start over and choose a different file")},m(l,i){y(l,e,i)},p:pe,i:pe,o:pe,d(l){l&&v(e)}}}function Wa(n){let e,l,i=Le(n[0]),t=[];for(let o=0;o<i.length;o+=1)t[o]=qr(Hr(n,i,o));const r=o=>le(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=lt()},m(o,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(o,s);y(o,e,s),l=!0},p(o,s){if(s&1){i=Le(o[0]);let a;for(a=0;a<i.length;a+=1){const f=Hr(o,i,a);t[a]?(t[a].p(f,s),G(t[a],1)):(t[a]=qr(f),t[a].c(),G(t[a],1),t[a].m(e.parentNode,e))}for(He(),a=i.length;a<t.length;a+=1)r(a);qe()}},i(o){if(!l){for(let s=0;s<i.length;s+=1)G(t[s]);l=!0}},o(o){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)le(t[s]);l=!1},d(o){o&&v(e),at(t,o)}}}function qr(n){let e,l;return e=new Ha({props:{labelRecord:n[3]}}),{c(){Ce(e.$$.fragment)},m(i,t){ke(e,i,t),l=!0},p(i,t){const r={};t&1&&(r.labelRecord=i[3]),e.$set(r)},i(i){l||(G(e.$$.fragment,i),l=!0)},o(i){le(e.$$.fragment,i),l=!1},d(i){we(e,i)}}}function Qa(n){let e,l,i,t;const r=[Wa,qa],o=[];function s(a,f){return a[0]&&a[0].length?0:1}return l=s(n),i=o[l]=r[l](n),{c(){e=d("div"),i.c(),S(e,"class","cols svelte-hvmzn9"),B(e,"--label-width",n[1].labelWidth+"cm")},m(a,f){y(a,e,f),o[l].m(e,null),t=!0},p(a,[f]){let c=l;l=s(a),l===c?o[l].p(a,f):(He(),le(o[c],1,1,()=>{o[c]=null}),qe(),i=o[l],i?i.p(a,f):(i=o[l]=r[l](a),i.c()),G(i,1),i.m(e,null)),(!t||f&2)&&B(e,"--label-width",a[1].labelWidth+"cm")},i(a){t||(G(i),t=!0)},o(a){le(i),t=!1},d(a){a&&v(e),o[l].d()}}}function Ka(n,e,l){let i;const t=$e("settings");Oe(n,t,o=>l(1,i=o));let{inputData:r}=e;return n.$$set=o=>{"inputData"in o&&l(0,r=o.inputData)},[r,i,t]}class Va extends Pe{constructor(e){super(),Te(this,e,Ka,Qa,Ae,{inputData:0})}}const Ja={catalogNumber:["Catalog Number","CatNum","catnum"],recordNumber:["Field Number","collNum","collNo","collectorNo","collectornumber","collectorCode"],project:["projectname","survey","fieldtrip","trip"],geography:["Orig. Prov","countryprovince"],country:[],stateProvince:["province","state","admin1"],admin1Type:["stateProvinceType","statetype","provincetype"],county:["district","municipality","admin2"],admin2Type:["districttype","countytype","municipalitytype","admin2type"],locality:["localityname","localitystring"],fullLocality:[],fullCoordsString:[],verbatimCoordinates:["Orig Coords","verbatimCoords","original coords","verbatimcoordinates"],verbatimLatitude:["Lat1text","verbatimLat","verbatimlatitude","latitude"],verbatimLongitude:["Long1text","verbatimLong","verbatimlongitude","longitude"],decimalLatitude:["Latitude1","ddLat","ddlat","decimalLat","decimallatitude"],decimalLongitude:["Longitude1","ddLong","ddLon","decimalLong","decimalLon","decimallongitude"],coordsUncertainty:["Max Uncertainty Est","uncertainty"],coordsUncertaintyUnit:["Max Uncertainty Est Unit","uncertaintyunit"],coordsSource:["Lat/Long Method","georeferenceSources","georefSource","georefSources","coordsMethod","coordsSource"],verbatimSRS:["Datum","geodeticDatum"],gridReference:["grid","qds","gridref","qdgs"],labelElevation:[],verbatimElevation:["elevation","altitude","Verbatim Elev"],minElevationMeters:["Min Elevation in meters","minElev"],maxElevationMeters:["Max Elevation in meters","maxElev"],habitat:[],fieldNumber:["eventcode","sitecode","eventnumber","sitenumber","site/eventcode","site/eventnumber"],collectionDate:["verbatimEventDate","dateCollected","eventDate","collectingDate","date"],collectionStartDate:["startdate","collectingstartdate"],collectionEndDate:["enddate","collectingenddate"],collectionStartTime:["starttime","collectingstarttime"],collectionEndTime:["endtime","collectingendtime"],permitNumber:["permit","permitcode","permitnumber","permitno"],recordedBy:["Collectors [Aggregated]","collector","collectors","collectedby"],primaryCollectorLastName:["primaryCollector"],samplingProtocol:["collectionMethod","Collecting Information/Method","collectMethods","collectmethod","method"],eventConditions:["conditions"],eventRemarks:["collectingeventremarks"],specimenStageSex:["Stage Sex Count","lifeStageSexCounts"],sex:["Sex"],lifeStage:["stage"],specimenCount:["count","counts","countamt","countamount","duplicates"],seriesSampleCounts:[],occurrenceRemarks:["Remarks","Collection Object Remarks","Collection Object/Remarks","seriesNote","notes","note","specimenNotes","specimenNote"],verbatimIdentification:["labelDetName","verbatimdet","verbatimdetermination"],scientificName:["Full Name","Taxon/Full Name","taxonname","taxon","canonicalName"],scientificNameAuthorship:["author","authority","taxonauthor","taxonomicauthor","taxonAuthority","taxonomicAuthority","nameAuthority","nameAuthor"],taxonRank:["rank"],order:[],superfamily:[],family:[],tribe:[],subtribe:[],genus:[],species:["specificEpithet"],subspecies:["infraspecificEpithet"],variety:["var"],subvariety:["subvar"],forma:["form"],subforma:["subform","subf"],identificationQualifier:["qualifier","prefix","prefixQualifier","taxonNamePrefix"],suffixQualifier:["suffix","taxonNameSuffix"],identificationConfidence:["confidence","detconfidence","detcertainty"],identificationMethod:["Determinations/Method","detMethod","idmethod"],identificationReferences:["detReferences","detrefs"],identifiedBy:["detBy"],detByLast:["lastname"],detByFirst:["firstname"],detByInitials:["inital","initials","middleinitial"],dateIdentified:["Determined Date","detdate"],identificationRemarks:["Determinations/Remarks","Determinations Remarks","detRemarks","detNotes","detNote"],typeStatus:["typestatus","typification","type"],typeNumber:["typenumber"],storageBox:["Box","storage","storagelocation"]},kt=["catalogNumber","typeStatus","recordNumber","country","stateProvince","county","locality","verbatimCoordinates","verbatimLatitude","verbatimLongitude","decimalLatitude","decimalLongitude","verbatimSRS","verbatimElevation","habitat","fieldNumber","recordedBy","samplingProtocol","eventRemarks","sex","lifeStage","occurrenceRemarks","verbatimIdentification","scientificName","scientificNameAuthorship","identificationQualifier","identifiedBy","dateIdentified","identificationRemarks"];function To(n){const e={},l={};for(const i of Object.keys(n)){const t=Wr(i).toLowerCase();l[t]=i}for(let[i,t]of Object.entries(Ja)){const r=i.toLowerCase();if(kt.includes(i)){const o=Object.keys(n);if(o.includes("dwc:"+i)){const s=o.indexOf("dwc:"+i);e[i]=o[s];continue}}if(r in l){e[i]=l[r];continue}else for(let o of t){const s=Wr(o).toLowerCase();if(s in l){e[i]=l[s];break}}i in e||(e[i]=null)}return e}function Wr(n){return n=n.replace(/[\.\s\(\)\/\[\]\-'";:_`~]+/g,""),n}function Ya(n,e){if(Object.keys(n).length)for(const[l,i]of Object.entries(n))i in e||(n[l]=null)}function Qr(n,e){if(n.catalogNumber&&!e.catalogNumber)return-1;if(!n.catalogNumber&&e.catalogNumber)return 1;if(n.catalogNumber&&e.catalogNumber){if(n.catalogNumber<e.catalogNumber)return-1;if(n.catalogNumber>e.catalogNumber)return 1}if(n.recordNumber&&e.recordNumber){if(n.recordNumber<e.recordNumber)return-1;if(n.recordNumber>e.recordNumber)return 1}return 0}function Ga(n,e){n&&Array.isArray(n)&&n.length&&n.sort((l,i)=>e?l.storageBox<i.storageBox?-1:l.storageBox>i.storageBox?1:l.storageBox==i.storageBox?Qr(l,i):0:Qr(l,i))}function Kr(n,e,l,i,t){let r=[];return n.length&&(r=n.map(o=>_i(o,e,l)),Ga(r,t),i&&(r=r.filter(o=>o.catalogNumber||o.recordNumber))),r}function Za(n){let e,l,i,t,r,o,s,a,f,c,g=Z[n[0].lang].reset+"",h,m,_,I=Z[n[0].lang].mappings.toLowerCase()+"",C,L,P,k=Z[n[0].lang].printButton+"",w,R,E,$,b,p,A,U,H,O;return t=new Ni({}),o=new Ls({}),A=new Va({props:{inputData:n[1]}}),{c(){e=d("div"),e.innerHTML="",l=N(),i=d("div"),Ce(t.$$.fragment),r=N(),Ce(o.$$.fragment),s=N(),a=d("div"),f=d("div"),c=d("button"),h=F(g),m=N(),_=d("a"),C=F(I),L=N(),P=d("button"),w=F(k),E=N(),$=d("hr"),b=N(),p=d("div"),Ce(A.$$.fragment),S(e,"class","container"),S(c,"class","secondary-button svelte-r1aknu"),S(_,"href","/mappings"),B(_,"margin","0.5rem 0"),B(_,"padding","1rem 2rem"),B(f,"display","flex"),B(f,"flex-direction","row"),P.disabled=R=!n[1].length,B(a,"display","flex"),B(a,"justify-content","space-between"),S($,"class","svelte-r1aknu"),S(i,"class","topstuff svelte-r1aknu"),S(p,"class","label-section")},m(T,K){y(T,e,K),y(T,l,K),y(T,i,K),ke(t,i,null),u(i,r),ke(o,i,null),u(i,s),u(i,a),u(a,f),u(f,c),u(c,h),u(f,m),u(f,_),u(_,C),u(a,L),u(a,P),u(P,w),u(i,E),u(i,$),y(T,b,K),y(T,p,K),ke(A,p,null),U=!0,H||(O=[x(c,"click",n[6]),Cn(Rn.call(null,_)),x(P,"click",n[5])],H=!0)},p(T,[K]){(!U||K&1)&&g!==(g=Z[T[0].lang].reset+"")&&q(h,g),(!U||K&1)&&I!==(I=Z[T[0].lang].mappings.toLowerCase()+"")&&q(C,I),(!U||K&1)&&k!==(k=Z[T[0].lang].printButton+"")&&q(w,k),(!U||K&2&&R!==(R=!T[1].length))&&(P.disabled=R);const D={};K&2&&(D.inputData=T[1]),A.$set(D)},i(T){U||(G(t.$$.fragment,T),G(o.$$.fragment,T),G(A.$$.fragment,T),U=!0)},o(T){le(t.$$.fragment,T),le(o.$$.fragment,T),le(A.$$.fragment,T),U=!1},d(T){T&&(v(e),v(l),v(i),v(b),v(p)),we(t),we(o),we(A),H=!1,We(O)}}}function Xa(n,e,l){let i,t,r,o=[];const s=$e("data");Oe(n,s,h=>l(8,r=h));const a=$e("settings");Oe(n,a,h=>l(0,i=h));const f=$e("mappings");if(Oe(n,f,h=>l(7,t=h)),r.length==0&&es("/"),Object.keys(t).length==0){const h=localStorage.getItem("fieldMappings");if(h){const m=JSON.parse(h);Ya(m,r[0]),Be(f,t=m,t),console.log("got mappings from history")}else{const m=To(r[0]);Be(f,t=m,t),console.log("created new mappings")}}const c=h=>{localStorage.setItem("labelSettings",JSON.stringify(i)),localStorage.setItem("fieldMappings",JSON.stringify(t)),window.print()};window.showData=h=>{console.log(o)};const g=h=>{if(localStorage.getItem("labelSettings")!=null){const m=JSON.parse(localStorage.getItem("labelSettings"));for(const[_,I]of Object.entries(m))_ in i?Be(a,i[_]=I,i):_ in Dn&&Be(a,i[_]=Dn[_],i)}};return n.$$.update=()=>{n.$$.dirty&385&&l(1,o=Kr(r,t,i.useRomanNumeralMonths,i.excludeNoCatnums,i.showStorage)),n.$$.dirty&385&&l(1,o=Kr(r,t,i.useRomanNumeralMonths,i.excludeNoCatnums,i.showStorage))},[i,o,s,a,f,c,g,t,r]}class xa extends Pe{constructor(e){super(),Te(this,e,Xa,Za,Ae,{})}}function eu(n){let e,l;return{c(){e=Nn("svg"),l=Nn("path"),S(l,"d","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"height","18px"),S(e,"viewBox","0 -960 960 960"),S(e,"width","18px")},m(i,t){y(i,e,t),u(e,l)},p:pe,i:pe,o:pe,d(i){i&&v(e)}}}class Po extends Pe{constructor(e){super(),Te(this,e,null,eu,Ae,{})}}function Vr(n,e,l){const i=n.slice();return i[7]=e[l],i}function Jr(n){let e,l,i,t;return l=new Po({}),{c(){e=d("a"),Ce(l.$$.fragment),B(e,"position","relative"),B(e,"top","4px"),S(e,"href",i="https://dwc.tdwg.org/terms/#dwc:"+n[1]),S(e,"target","”_blank”"),S(e,"class","svelte-1kw01ir")},m(r,o){y(r,e,o),ke(l,e,null),t=!0},p(r,o){(!t||o&3&&i!==(i="https://dwc.tdwg.org/terms/#dwc:"+r[1]))&&S(e,"href",i)},i(r){t||(G(l.$$.fragment,r),t=!0)},o(r){le(l.$$.fragment,r),t=!1},d(r){r&&v(e),we(l)}}}function Yr(n){let e,l=n[7]+"",i,t;return{c(){e=d("option"),i=F(l),e.__value=t=n[7],ge(e,e.__value)},m(r,o){y(r,e,o),u(e,i)},p(r,o){o&1&&l!==(l=r[7]+"")&&q(i,l),o&1&&t!==(t=r[7])&&(e.__value=t,ge(e,e.__value))},d(r){r&&v(e)}}}function tu(n){let e,l=(kt.includes(n[1])?"dwc:"+n[1]:n[1])+"",i,t,r=kt.includes(n[1]),o,s,a,f=Z[n[2]].remove+"",c,g,h,m,_,I,C,L=r&&Jr(n),P=Le(Object.keys(n[0])),k=[];for(let w=0;w<P.length;w+=1)k[w]=Yr(Vr(n,P,w));return m=new po({}),{c(){e=d("label"),i=F(l),t=N(),L&&L.c(),o=N(),s=d("select"),a=d("option"),c=F(f);for(let w=0;w<k.length;w+=1)k[w].c();g=N(),h=d("button"),Ce(m.$$.fragment),a.__value="",ge(a,a.__value),B(s,"display","inline"),B(s,"color","black"),B(s,"margin","0"),B(s,"margin-left","1em"),n[3][n[1]]===void 0&&ct(()=>n[5].call(s)),S(h,"class","close-button svelte-1kw01ir"),B(e,"margin","auto"),B(e,"margin-bottom","1em"),B(e,"color","grey"),B(e,"display","flex"),B(e,"align-items","center")},m(w,R){y(w,e,R),u(e,i),u(e,t),L&&L.m(e,null),u(e,o),u(e,s),u(s,a),u(a,c);for(let E=0;E<k.length;E+=1)k[E]&&k[E].m(s,null);it(s,n[3][n[1]],!0),u(e,g),u(e,h),ke(m,h,null),_=!0,I||(C=[x(s,"change",n[5]),x(h,"click",n[6])],I=!0)},p(w,[R]){if((!_||R&2)&&l!==(l=(kt.includes(w[1])?"dwc:"+w[1]:w[1])+"")&&q(i,l),R&2&&(r=kt.includes(w[1])),r?L?(L.p(w,R),R&2&&G(L,1)):(L=Jr(w),L.c(),G(L,1),L.m(e,o)):L&&(He(),le(L,1,1,()=>{L=null}),qe()),(!_||R&4)&&f!==(f=Z[w[2]].remove+"")&&q(c,f),R&1){P=Le(Object.keys(w[0]));let E;for(E=0;E<P.length;E+=1){const $=Vr(w,P,E);k[E]?k[E].p($,R):(k[E]=Yr($),k[E].c(),k[E].m(s,null))}for(;E<k.length;E+=1)k[E].d(1);k.length=P.length}R&11&&it(s,w[3][w[1]])},i(w){_||(G(L),G(m.$$.fragment,w),_=!0)},o(w){le(L),le(m.$$.fragment,w),_=!1},d(w){w&&v(e),L&&L.d(),at(k,w),we(m),I=!1,We(C)}}}function nu(n,e,l){let i,{record:t}=e,{labelField:r}=e,{lang:o}=e;const s=$e("mappings");Oe(n,s,c=>l(3,i=c));function a(){i[r]=jt(this),s.set(i),l(0,t)}const f=c=>Be(s,i[r]=null,i);return n.$$set=c=>{"record"in c&&l(0,t=c.record),"labelField"in c&&l(1,r=c.labelField),"lang"in c&&l(2,o=c.lang)},[t,r,o,i,s,a,f]}class iu extends Pe{constructor(e){super(),Te(this,e,nu,tu,Ae,{record:0,labelField:1,lang:2})}}function Gr(n,e,l){const i=n.slice();return i[11]=e[l],i}function Zr(n,e,l){const i=n.slice();return i[14]=e[l],i}function Xr(n){let e,l=n[14]+"",i,t;return{c(){e=d("option"),i=F(l),B(e,"color","black"),e.__value=t=n[14],ge(e,e.__value)},m(r,o){y(r,e,o),u(e,i)},p(r,o){o&16&&l!==(l=r[14]+"")&&q(i,l),o&16&&t!==(t=r[14])&&(e.__value=t,ge(e,e.__value))},d(r){r&&v(e)}}}function xr(n){let e=!n[1].includes(n[14]),l,i=e&&Xr(n);return{c(){i&&i.c(),l=lt()},m(t,r){i&&i.m(t,r),y(t,l,r)},p(t,r){r&18&&(e=!t[1].includes(t[14])),e?i?i.p(t,r):(i=Xr(t),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(t){t&&v(l),i&&i.d(t)}}}function eo(n){let e,l,i,t;return l=new Po({}),{c(){e=d("a"),Ce(l.$$.fragment),B(e,"position","relative"),B(e,"top","4px"),S(e,"href",i="https://dwc.tdwg.org/terms/#dwc:"+n[2]),S(e,"target","”_blank”")},m(r,o){y(r,e,o),ke(l,e,null),t=!0},p(r,o){(!t||o&20&&i!==(i="https://dwc.tdwg.org/terms/#dwc:"+r[2]))&&S(e,"href",i)},i(r){t||(G(l.$$.fragment,r),t=!0)},o(r){le(l.$$.fragment,r),t=!1},d(r){r&&v(e),we(l)}}}function to(n){let e,l=n[11]+"",i,t;return{c(){e=d("option"),i=F(l),B(e,"color","black"),e.__value=t=n[11],ge(e,e.__value)},m(r,o){y(r,e,o),u(e,i)},p(r,o){o&17&&l!==(l=r[11]+"")&&q(i,l),o&17&&t!==(t=r[11])&&(e.__value=t,ge(e,e.__value))},d(r){r&&v(e)}}}function lu(n){let e,l,i,t,r=kt.includes(n[2]),o,s,a,f,c,g,h,m,_=Le(Object.keys(n[4]).filter(n[7])),I=[];for(let k=0;k<_.length;k+=1)I[k]=xr(Zr(n,_,k));let C=r&&eo(n),L=Le(Object.keys(n[0]).filter(n[9])),P=[];for(let k=0;k<L.length;k+=1)P[k]=to(Gr(n,L,k));return{c(){e=d("div"),l=d("select"),i=d("option"),i.textContent="Choose a label field";for(let k=0;k<I.length;k+=1)I[k].c();t=N(),C&&C.c(),o=N(),s=d("select"),a=d("option"),a.textContent="Choose a dataset field";for(let k=0;k<P.length;k+=1)P[k].c();f=N(),c=d("button"),c.textContent="Map",i.__value="",ge(i,i.__value),B(l,"margin","0"),S(l,"class","svelte-4wsq9j"),n[2]===void 0&&ct(()=>n[8].call(l)),X(l,"placeholder-option",!n[2]),a.__value="",ge(a,a.__value),B(s,"margin","0"),B(s,"margin-left","1em"),S(s,"class","svelte-4wsq9j"),n[3]===void 0&&ct(()=>n[10].call(s)),X(s,"placeholder-option",!n[3]),B(c,"margin-left","1em"),B(e,"display","flex"),B(e,"height","2em"),B(e,"align-items","center"),B(e,"margin-bottom","2em")},m(k,w){y(k,e,w),u(e,l),u(l,i);for(let R=0;R<I.length;R+=1)I[R]&&I[R].m(l,null);it(l,n[2],!0),u(e,t),C&&C.m(e,null),u(e,o),u(e,s),u(s,a);for(let R=0;R<P.length;R+=1)P[R]&&P[R].m(s,null);it(s,n[3],!0),u(e,f),u(e,c),g=!0,h||(m=[x(l,"change",n[8]),x(s,"change",n[10]),x(c,"click",n[6])],h=!0)},p(k,[w]){if(w&18){_=Le(Object.keys(k[4]).filter(k[7]));let R;for(R=0;R<_.length;R+=1){const E=Zr(k,_,R);I[R]?I[R].p(E,w):(I[R]=xr(E),I[R].c(),I[R].m(l,null))}for(;R<I.length;R+=1)I[R].d(1);I.length=_.length}if(w&20&&it(l,k[2]),(!g||w&4)&&X(l,"placeholder-option",!k[2]),w&4&&(r=kt.includes(k[2])),r?C?(C.p(k,w),w&4&&G(C,1)):(C=eo(k),C.c(),G(C,1),C.m(e,o)):C&&(He(),le(C,1,1,()=>{C=null}),qe()),w&17){L=Le(Object.keys(k[0]).filter(k[9]));let R;for(R=0;R<L.length;R+=1){const E=Gr(k,L,R);P[R]?P[R].p(E,w):(P[R]=to(E),P[R].c(),P[R].m(s,null))}for(;R<P.length;R+=1)P[R].d(1);P.length=L.length}w&25&&it(s,k[3]),(!g||w&8)&&X(s,"placeholder-option",!k[3])},i(k){g||(G(C),g=!0)},o(k){le(C),g=!1},d(k){k&&v(e),at(I,k),C&&C.d(),at(P,k),h=!1,We(m)}}}function ru(n,e,l){let i,{record:t}=e,{excludeFromMappings:r}=e,o="",s="";const a=$e("mappings");Oe(n,a,_=>l(4,i=_));const f=_=>{o&&(Be(a,i[o]=s,i),l(2,o=""),l(3,s=""))},c=_=>!i[_];function g(){o=jt(this),l(2,o)}const h=_=>!Object.values(i).includes(_);function m(){s=jt(this),l(3,s),l(0,t)}return n.$$set=_=>{"record"in _&&l(0,t=_.record),"excludeFromMappings"in _&&l(1,r=_.excludeFromMappings)},[t,r,o,s,i,a,f,c,g,h,m]}class ou extends Pe{constructor(e){super(),Te(this,e,ru,lu,Ae,{record:0,excludeFromMappings:1})}}function no(n,e,l){const i=n.slice();return i[10]=e[l],i}function io(n){let e,l;return e=new iu({props:{record:n[0][0],labelField:n[10],lang:n[2].lang}}),{c(){Ce(e.$$.fragment)},m(i,t){ke(e,i,t),l=!0},p(i,t){const r={};t&1&&(r.record=i[0][0]),t&2&&(r.labelField=i[10]),t&4&&(r.lang=i[2].lang),e.$set(r)},i(i){l||(G(e.$$.fragment,i),l=!0)},o(i){le(e.$$.fragment,i),l=!1},d(i){we(e,i)}}}function lo(n){let e=n[1][n[10]]&&!n[4].includes(n[10]),l,i,t=e&&io(n);return{c(){t&&t.c(),l=lt()},m(r,o){t&&t.m(r,o),y(r,l,o),i=!0},p(r,o){o&2&&(e=r[1][r[10]]&&!r[4].includes(r[10])),e?t?(t.p(r,o),o&2&&G(t,1)):(t=io(r),t.c(),G(t,1),t.m(l.parentNode,l)):t&&(He(),le(t,1,1,()=>{t=null}),qe())},i(r){i||(G(t),i=!0)},o(r){le(t),i=!1},d(r){r&&v(l),t&&t.d(r)}}}function su(n){let e,l=Z[n[2].lang].mappings+"",i,t,r,o=Z[n[2].lang].mappingHelp+"",s,a,f,c,g=Z[n[2].lang].back+"",h,m,_,I=Z[n[2].lang].refreshMappings+"",C,L,P,k,w,R,E,$,b,p,A,U,H;R=new Ii({props:{labelRecord:n[3]}}),$=new ou({props:{record:n[0][0],excludeFromMappings:n[4]}});let O=Le(Object.keys(n[1])),T=[];for(let D=0;D<O.length;D+=1)T[D]=lo(no(n,O,D));const K=D=>le(T[D],1,1,()=>{T[D]=null});return{c(){e=d("h2"),i=F(l),t=N(),r=d("p"),s=F(o),a=N(),f=d("div"),c=d("button"),h=F(g),m=N(),_=d("button"),C=F(I),L=N(),P=d("div"),k=d("div"),w=d("div"),Ce(R.$$.fragment),E=N(),Ce($.$$.fragment),b=N(),p=d("div");for(let D=0;D<T.length;D+=1)T[D].c();B(r,"max-width","1000px"),S(c,"id","back-button"),S(c,"class","svelte-1bvouec"),B(f,"display","flex"),B(f,"justify-content","space-between"),S(w,"class","label-preview svelte-1bvouec"),B(k,"width",n[2].labelWidth+"cm"),B(P,"width","100%"),B(P,"display","flex"),B(P,"justify-content","center"),B(P,"margin-bottom","2em"),B(p,"display","flex"),B(p,"width","100%"),B(p,"flex-wrap","wrap")},m(D,M){y(D,e,M),u(e,i),y(D,t,M),y(D,r,M),u(r,s),y(D,a,M),y(D,f,M),u(f,c),u(c,h),u(f,m),u(f,_),u(_,C),y(D,L,M),y(D,P,M),u(P,k),u(k,w),ke(R,w,null),y(D,E,M),ke($,D,M),y(D,b,M),y(D,p,M);for(let ee=0;ee<T.length;ee+=1)T[ee]&&T[ee].m(p,null);A=!0,U||(H=[x(c,"click",n[9]),x(_,"click",n[8])],U=!0)},p(D,[M]){(!A||M&4)&&l!==(l=Z[D[2].lang].mappings+"")&&q(i,l),(!A||M&4)&&o!==(o=Z[D[2].lang].mappingHelp+"")&&q(s,o),(!A||M&4)&&g!==(g=Z[D[2].lang].back+"")&&q(h,g),(!A||M&4)&&I!==(I=Z[D[2].lang].refreshMappings+"")&&q(C,I);const ee={};M&8&&(ee.labelRecord=D[3]),R.$set(ee),(!A||M&4)&&B(k,"width",D[2].labelWidth+"cm");const V={};if(M&1&&(V.record=D[0][0]),$.$set(V),M&23){O=Le(Object.keys(D[1]));let re;for(re=0;re<O.length;re+=1){const fe=no(D,O,re);T[re]?(T[re].p(fe,M),G(T[re],1)):(T[re]=lo(fe),T[re].c(),G(T[re],1),T[re].m(p,null))}for(He(),re=O.length;re<T.length;re+=1)K(re);qe()}},i(D){if(!A){G(R.$$.fragment,D),G($.$$.fragment,D);for(let M=0;M<O.length;M+=1)G(T[M]);A=!0}},o(D){le(R.$$.fragment,D),le($.$$.fragment,D),T=T.filter(Boolean);for(let M=0;M<T.length;M+=1)le(T[M]);A=!1},d(D){D&&(v(e),v(t),v(r),v(a),v(f),v(L),v(P),v(E),v(b),v(p)),we(R),we($,D),at(T,D),U=!1,We(H)}}}function au(n,e,l){let i,t,r,o;const s=["detByLast","detByFirst","detByInitials"],a=$e("data");Oe(n,a,m=>l(0,i=m));const f=$e("settings");Oe(n,f,m=>l(2,r=m));const c=$e("mappings");Oe(n,c,m=>l(1,t=m));const g=m=>{localStorage.removeItem("fieldMappings"),Be(c,t=To(i[0]),t)},h=m=>xo();return n.$$.update=()=>{n.$$.dirty&7&&l(3,o=_i(i[0],t)),n.$$.dirty&3&&l(3,o=_i(i[0],t))},[i,t,r,o,s,a,f,c,g,h]}class uu extends Pe{constructor(e){super(),Te(this,e,au,su,Ae,{})}}function fu(n){let e,l,i,t,r,o,s,a,f,c,g,h,m,_,I,C,L,P,k,w,R,E,$,b,p,A,U,H,O,T,K,D,M,ee,V,re,fe,z,te,de,ae,ve,he,ce,J,ie,oe,ue,j,se,be,me,Re,De,Ee;return e=new Ni({}),{c(){Ce(e.$$.fragment),l=F(`\r
-- add hyperlinks for concepts here, like CSV, character encoding, etc\r
`),i=d("p"),i.textContent=`This tool makes creating specimen labels quick and easy. Simply add your dataset, select the label type you want, and \r
  tweak the settings as needed. The labels have been designed to meet the needs of most collection types and adhere to best practices. \r
  We hope this will save you some time and that you will enjoy using it. If you encounter any problems please create on issue\r
  on the Github page.`,t=N(),r=d("h3"),r.textContent="Usage",o=N(),s=d("h4"),s.textContent="Loading your data",a=N(),f=d("p"),f.textContent=`Start by loading in a CSV file with your data from the home page. CSV is the simplest and easiest format for exchanging data between \r
  systems. There is a link to an example file you can use as a template (see below).`,c=N(),g=d("p"),g.textContent=`If you are using Excel or Access to manage your specimen data then make sure to set the encoding \r
  to UTF-8 when you export your records to CSV format, otherwise special characters like degree symbols will get scrambled. \r
  Most other database systems (such as Specify) use UTF-8 by default.`,h=N(),m=d("p"),m.innerHTML=`<em>Note that no specimen data is stored or sent over the internet when using this tool. The source code is available on Github and can be checked
    by someone who knows Javascript to confirm.</em>`,_=N(),I=d("h4"),I.textContent="Data fields",C=N(),L=d("p"),L.textContent=`The tool makes use of standard data fields like locality, date, taxon name, etc. for labels and uses Darwin Core fields \r
  as far as possible. When you load your data the tool does its best to map the fields from your dataset to the label fields. For example, if you have a field called 'localityname'\r
  it will be mapped to 'locality'.`,P=N(),k=d("p"),k.textContent=`If your fields don't appear on the label there is an option to set the mappings manually. Fields can be included or excluded\r
  as you see fit. You can also read up on the Darwin Core term definitions in the mapping section using the links provided.`,w=N(),R=d("p"),R.textContent=`Remember that the fields you include are up to you. The tool requires at lease one field like localit or a taxon name in \r
  order to generate a label, but other than that you are free to pick and choose as you like.`,E=N(),$=d("h5"),$.textContent="Taxon name fields",b=N(),p=d("p"),p.textContent=`Taxon names are stored in many different ways. The tool gives priority to names stored in individual rank fields, i.e. family,\r
  genus, species, etc. Alternatively you can use a single field like taxon name or scientific name. It is also recommended to include separate\r
  fields for the taxon author, qualifiers, certainty, etc. Labels can also include identification remarks, literature sources, and so on.`,A=N(),U=d("h5"),U.textContent="The example dataset",H=N(),O=d("p"),O.textContent=`When you click on the link for the example dataset you will be taken to a Google Sheet which includes fields that will be\r
  picked up by the tool as well some example records. Hover over the field headings to see the comments describing how each field \r
  should be used. You are welcome to make a copy of this sheet for your own use (File >> Make a copy).\r
  To download the data go to File >> Download and select 'Comma separated values (.csv)'.`,T=N(),K=d("p"),K.textContent=`The spreadsheet includes a field called 'print', which can be used for flagging and filtering records for printing. \r
  Just enter appropriate values here, then hover on the top of the column (above the field name), click the little triangle\r
  that appears, select 'Create a filter', click on the striped triangle now in the field heading, and set the appropriate options. \r
  You can add as many filtering columns as you need to your spreadsheet. You may want fields for institution where the specimens \r
  are deposited, and date deposited, for example, which can also be used for filtering records.`,D=N(),M=d("p"),M.textContent=`To print labels for filtered records you will need to copy and paste them into a separate spreadsheet before downloading\r
  the CSV file. Unfortunately Google Sheets exports everything in a spreadsheet, ignoring any filters applied.`,ee=N(),V=d("h4"),V.textContent="Duplicate labels",re=N(),fe=d("p"),fe.textContent=`If you want to duplicate labels for each specimen in a series (e.g. several insects of the same species collected together, \r
  or duplicate herbarium specimens), you will need to include a field in your dataset with a count (call the field 'count'). If you \r
  have a field with counts of specimens per age/sex, the tool will deduce counts from that field.`,z=N(),te=d("h4"),te.textContent="Label options",de=N(),ae=d("p"),ae.textContent=`Once you've added your data you will see a list of options for customizing your label design. When you click the print label button \r
  your choices will be saved for the next time you want to print labels. Use a small dataset to get the label design right before \r
  generating large batches of labels.`,ve=N(),he=d("p"),he.innerHTML=`<em>It is strongly recommended that you <strong>print</strong> a small number of test labels to check that your design works well when
    physically printed before you print large batches of actual specimen labels.</em>`,ce=N(),J=d("h4"),J.textContent="Printing labels",ie=N(),oe=d("p"),oe.textContent=`When you click the print button the browser will open the standard print dialog. Make sure to set the page size\r
  and margins appropriately before printing. You can either print directly from here or you can save the labels as a PDF\r
  for later printing. It is recommended to use the 'Save as PDF' option rather than 'Microsoft Print to PDF'\r
  as this gives better results.`,ue=N(),j=d("p"),j.textContent="For guidelines on printing archival quality specimen labels please see the NSCF Collection Management Manual.",se=N(),be=d("h3"),be.textContent="Acknowledgements",me=N(),Re=d("p"),Re.textContent=`Several members of the NSCF community provided inputs and suggestions on label design, and the layout of and \r
  functionality of this tool.`,De=F(`\r
- language translations provided by...`)},m(Q,Y){ke(e,Q,Y),y(Q,l,Y),y(Q,i,Y),y(Q,t,Y),y(Q,r,Y),y(Q,o,Y),y(Q,s,Y),y(Q,a,Y),y(Q,f,Y),y(Q,c,Y),y(Q,g,Y),y(Q,h,Y),y(Q,m,Y),y(Q,_,Y),y(Q,I,Y),y(Q,C,Y),y(Q,L,Y),y(Q,P,Y),y(Q,k,Y),y(Q,w,Y),y(Q,R,Y),y(Q,E,Y),y(Q,$,Y),y(Q,b,Y),y(Q,p,Y),y(Q,A,Y),y(Q,U,Y),y(Q,H,Y),y(Q,O,Y),y(Q,T,Y),y(Q,K,Y),y(Q,D,Y),y(Q,M,Y),y(Q,ee,Y),y(Q,V,Y),y(Q,re,Y),y(Q,fe,Y),y(Q,z,Y),y(Q,te,Y),y(Q,de,Y),y(Q,ae,Y),y(Q,ve,Y),y(Q,he,Y),y(Q,ce,Y),y(Q,J,Y),y(Q,ie,Y),y(Q,oe,Y),y(Q,ue,Y),y(Q,j,Y),y(Q,se,Y),y(Q,be,Y),y(Q,me,Y),y(Q,Re,Y),y(Q,De,Y),Ee=!0},p:pe,i(Q){Ee||(G(e.$$.fragment,Q),Ee=!0)},o(Q){le(e.$$.fragment,Q),Ee=!1},d(Q){Q&&(v(l),v(i),v(t),v(r),v(o),v(s),v(a),v(f),v(c),v(g),v(h),v(m),v(_),v(I),v(C),v(L),v(P),v(k),v(w),v(R),v(E),v($),v(b),v(p),v(A),v(U),v(H),v(O),v(T),v(K),v(D),v(M),v(ee),v(V),v(re),v(fe),v(z),v(te),v(de),v(ae),v(ve),v(he),v(ce),v(J),v(ie),v(oe),v(ue),v(j),v(se),v(be),v(me),v(Re),v(De)),we(e,Q)}}}class cu extends Pe{constructor(e){super(),Te(this,e,null,fu,Ae,{})}}const du={"/":Ns,"/design":xa,"/mappings":uu,"/info":cu};function hu(n){let e,l,i;return l=new ls({props:{routes:du}}),{c(){e=d("div"),Ce(l.$$.fragment),S(e,"class","container svelte-jsyzv8")},m(t,r){y(t,e,r),ke(l,e,null),i=!0},p:pe,i(t){i||(G(l.$$.fragment,t),i=!0)},o(t){le(l.$$.fragment,t),i=!1},d(t){t&&v(e),we(l)}}}function pu(n){let e=en([]),l=en({}),i=en({});return fi("data",e),fi("settings",l),fi("mappings",i),[]}class mu extends Pe{constructor(e){super(),Te(this,e,pu,hu,Ae,{})}}new mu({target:document.body});
